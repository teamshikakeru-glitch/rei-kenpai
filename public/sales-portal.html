<!DOCTYPE html>
<html lang="ja">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
  <meta name="apple-mobile-web-app-capable" content="yes">
  <title>Rei å–¶æ¥­ãƒãƒ¼ã‚¿ãƒ«</title>
  <script src="https://cdn.jsdelivr.net/npm/@supabase/supabase-js@2"></script>
  <style>
    * { box-sizing: border-box; margin: 0; padding: 0; }
    body { 
      font-family: -apple-system, BlinkMacSystemFont, "Segoe UI", sans-serif; 
      background: #f5f6fa; 
      color: #2c2c2c; 
      line-height: 1.5;
      font-size: 14px;
      padding-bottom: 70px;
    }
    
    /* ãƒ­ã‚°ã‚¤ãƒ³ç”»é¢ */
    #loginScreen {
      min-height: 100vh;
      display: flex;
      align-items: center;
      justify-content: center;
      background: linear-gradient(135deg, #2d5a47 0%, #3d7a5f 100%);
      padding: 1rem;
    }
    .login-card {
      background: white;
      border-radius: 16px;
      padding: 2rem;
      width: 100%;
      max-width: 360px;
    }
    .login-logo {
      text-align: center;
      margin-bottom: 1.5rem;
    }
    .login-logo-symbol {
      font-size: 2.5rem;
      color: #2d5a47;
    }
    .login-logo-text {
      font-size: 1rem;
      color: #5a5a5a;
      margin-top: 0.25rem;
    }
    .login-title {
      font-size: 1.1rem;
      font-weight: 600;
      text-align: center;
      margin-bottom: 1.25rem;
    }
    .form-group { margin-bottom: 1rem; }
    .form-label {
      display: block;
      font-size: 0.8rem;
      font-weight: 500;
      margin-bottom: 0.4rem;
      color: #5a5a5a;
    }
    .form-input {
      width: 100%;
      padding: 0.7rem 0.9rem;
      font-size: 16px;
      border: 2px solid #e5e2dd;
      border-radius: 8px;
      appearance: none; -webkit-appearance: none;
    }
    .form-input:focus {
      outline: none;
      border-color: #2d5a47;
    }
    .form-input.error {
      border-color: #dc3545;
    }
    .form-hint {
      font-size: 0.75rem;
      color: #8a8a8a;
      margin-top: 0.3rem;
    }
    .form-hint.error {
      color: #dc3545;
    }
    .btn {
      display: block;
      width: 100%;
      padding: 0.75rem;
      font-size: 1rem;
      font-weight: 600;
      border: none;
      border-radius: 8px;
      cursor: pointer;
    }
    .btn-primary { background: #2d5a47; color: white; }
    .btn-primary:active { background: #3d7a5f; }
    .btn-secondary { background: #f5f6fa; color: #2c2c2c; border: 1px solid #e5e2dd; }
    .btn-sm { padding: 0.5rem 0.75rem; font-size: 0.85rem; width: auto; }
    .login-footer {
      text-align: center;
      margin-top: 1.25rem;
      font-size: 0.85rem;
      color: #8a8a8a;
    }
    .login-footer a { color: #2d5a47; text-decoration: none; font-weight: 600; }
    .error-box {
      background: #fee;
      color: #dc3545;
      padding: 0.6rem;
      border-radius: 8px;
      margin-bottom: 1rem;
      font-size: 0.8rem;
    }
    .hidden { display: none !important; }

    /* ãƒ¡ã‚¤ãƒ³ã‚¢ãƒ—ãƒª */
    #mainApp { display: none; }
    .header {
      background: #2d5a47;
      color: white;
      padding: 0.75rem 1rem;
      position: sticky;
      top: 0;
      z-index: 100;
    }
    .header-inner {
      display: flex;
      align-items: center;
      justify-content: space-between;
    }
    .header-logo { font-size: 1.1rem; font-weight: 700; }
    .header-user { display: flex; align-items: center; gap: 0.5rem; font-size: 0.85rem; }
    .header-logout {
      background: rgba(255,255,255,0.15);
      color: white;
      border: none;
      padding: 0.4rem 0.7rem;
      border-radius: 6px;
      font-size: 0.75rem;
    }
    
    /* ä¸‹éƒ¨ãƒŠãƒ“ã‚²ãƒ¼ã‚·ãƒ§ãƒ³ */
    .bottom-nav {
      position: fixed;
      bottom: 0;
      left: 0;
      right: 0;
      background: white;
      border-top: 1px solid #e5e2dd;
      display: flex;
      z-index: 100;
      padding-bottom: env(safe-area-inset-bottom);
    }
    .nav-btn {
      flex: 1;
      padding: 0.5rem 0.25rem;
      font-size: 0.65rem;
      color: #8a8a8a;
      background: none;
      border: none;
      display: flex;
      flex-direction: column;
      align-items: center;
      gap: 0.2rem;
    }
    .nav-btn-icon { font-size: 1.25rem; }
    .nav-btn.active { color: #2d5a47; }
    
    /* ã‚³ãƒ³ãƒ†ãƒ³ãƒ„ */
    .main { padding: 1rem; }
    .page { display: none; }
    .page.active { display: block; }
    
    /* ã‚«ãƒ¼ãƒ‰ */
    .card {
      background: white;
      border-radius: 12px;
      box-shadow: 0 2px 8px rgba(0,0,0,0.06);
      margin-bottom: 1rem;
      overflow: hidden;
    }
    .card-header {
      padding: 0.75rem 1rem;
      border-bottom: 1px solid #e5e2dd;
      display: flex;
      align-items: center;
      justify-content: space-between;
    }
    .card-title { font-size: 0.9rem; font-weight: 600; }
    .card-body { padding: 1rem; }
    
    /* çµ±è¨ˆã‚°ãƒªãƒƒãƒ‰ */
    .stats-grid {
      display: grid;
      grid-template-columns: repeat(2, 1fr);
      gap: 0.75rem;
      margin-bottom: 1rem;
    }
    .stat-card {
      background: white;
      border-radius: 12px;
      padding: 1rem;
      box-shadow: 0 2px 8px rgba(0,0,0,0.06);
    }
    .stat-label { font-size: 0.7rem; color: #8a8a8a; margin-bottom: 0.25rem; }
    .stat-value { font-size: 1.5rem; font-weight: 700; color: #2d5a47; }
    .stat-sub { font-size: 0.7rem; color: #8a8a8a; }
    
    /* ãƒ—ãƒ­ãƒ•ã‚£ãƒ¼ãƒ«ã‚«ãƒ¼ãƒ‰ï¼ˆã‚²ãƒ¼ãƒŸãƒ•ã‚£ã‚±ãƒ¼ã‚·ãƒ§ãƒ³ï¼‰ */
    .profile-card {
      background: linear-gradient(135deg, #2d5a47 0%, #3d7a5f 50%, #4d9a6f 100%);
      border-radius: 16px;
      padding: 1.25rem;
      color: white;
      margin-bottom: 1rem;
      position: relative;
      overflow: hidden;
    }
    .profile-card::before {
      content: '';
      position: absolute;
      top: -50%;
      right: -50%;
      width: 100%;
      height: 100%;
      background: radial-gradient(circle, rgba(255,255,255,0.1) 0%, transparent 70%);
    }
    .profile-header {
      display: flex;
      align-items: center;
      gap: 1rem;
      position: relative;
      z-index: 1;
    }
    .profile-avatar {
      width: 60px;
      height: 60px;
      border-radius: 50%;
      background: rgba(255,255,255,0.2);
      display: flex;
      align-items: center;
      justify-content: center;
      font-size: 1.5rem;
      border: 3px solid rgba(255,255,255,0.3);
    }
    .profile-info { flex: 1; }
    .profile-name { font-size: 1.2rem; font-weight: 700; margin-bottom: 0.25rem; }
    .profile-level {
      display: inline-flex;
      align-items: center;
      gap: 0.25rem;
      background: rgba(255,255,255,0.2);
      padding: 0.2rem 0.6rem;
      border-radius: 100px;
      font-size: 0.75rem;
      font-weight: 600;
    }
    .profile-stats {
      display: grid;
      grid-template-columns: repeat(3, 1fr);
      gap: 0.5rem;
      margin-top: 1rem;
      position: relative;
      z-index: 1;
    }
    .profile-stat {
      text-align: center;
      background: rgba(255,255,255,0.1);
      border-radius: 8px;
      padding: 0.5rem;
    }
    .profile-stat-value { font-size: 1.3rem; font-weight: 700; }
    .profile-stat-label { font-size: 0.65rem; opacity: 0.8; }
    
    /* ãƒãƒƒã‚¸ã‚³ãƒ¬ã‚¯ã‚·ãƒ§ãƒ³ */
    .badge-collection {
      display: flex;
      gap: 0.5rem;
      flex-wrap: wrap;
      margin-top: 0.75rem;
      position: relative;
      z-index: 1;
    }
    .achievement-badge {
      display: inline-flex;
      align-items: center;
      gap: 0.25rem;
      background: rgba(255,215,0,0.2);
      border: 1px solid rgba(255,215,0,0.5);
      padding: 0.2rem 0.5rem;
      border-radius: 100px;
      font-size: 0.7rem;
      font-weight: 600;
    }
    .achievement-badge.locked {
      background: rgba(255,255,255,0.1);
      border-color: rgba(255,255,255,0.2);
      opacity: 0.5;
    }
    
    /* ç›®æ¨™é€²æ—ãƒãƒ¼ï¼ˆæ”¹å–„ç‰ˆï¼‰ */
    .goal-section { margin-bottom: 1rem; }
    .goal-header {
      display: flex;
      justify-content: space-between;
      align-items: center;
      margin-bottom: 0.5rem;
    }
    .goal-title { font-size: 0.8rem; font-weight: 600; }
    .goal-numbers { font-size: 0.75rem; color: #5a5a5a; }
    .goal-bar {
      height: 12px;
      background: #e5e2dd;
      border-radius: 6px;
      overflow: hidden;
      box-shadow: inset 0 2px 4px rgba(0,0,0,0.1);
    }
    .goal-fill {
      height: 100%;
      background: linear-gradient(90deg, #ff6b6b, #ffc107, #28a745);
      background-size: 200% 100%;
      border-radius: 6px;
      transition: width 0.5s ease-out;
      position: relative;
      animation: shimmer 2s ease-in-out infinite;
    }
    .goal-fill::after {
      content: '';
      position: absolute;
      top: 0;
      left: 0;
      right: 0;
      bottom: 0;
      background: linear-gradient(90deg, transparent, rgba(255,255,255,0.3), transparent);
      animation: shine 2s ease-in-out infinite;
    }
    @keyframes shimmer {
      0%, 100% { background-position: 0% 0%; }
      50% { background-position: 100% 0%; }
    }
    @keyframes shine {
      0% { transform: translateX(-100%); }
      100% { transform: translateX(100%); }
    }
    .goal-fill.low { background: linear-gradient(90deg, #ff6b6b, #ff8787); }
    .goal-fill.mid { background: linear-gradient(90deg, #ffc107, #ffd700); }
    .goal-fill.high { background: linear-gradient(90deg, #28a745, #5cb85c); }
    .goal-fill.over { 
      background: linear-gradient(90deg, #28a745, #20c997, #28a745);
      animation: celebrate 1s ease-in-out infinite;
    }
    @keyframes celebrate {
      0%, 100% { transform: scaleY(1); }
      50% { transform: scaleY(1.1); }
    }
    
    /* åŠ±ã¾ã—ãƒ¡ãƒƒã‚»ãƒ¼ã‚¸ */
    .motivation-card {
      background: linear-gradient(135deg, #667eea, #764ba2);
      border-radius: 12px;
      padding: 1rem;
      color: white;
      margin-bottom: 1rem;
      display: flex;
      align-items: center;
      gap: 0.75rem;
    }
    .motivation-icon { font-size: 2rem; }
    .motivation-text { flex: 1; }
    .motivation-main { font-weight: 600; font-size: 0.95rem; }
    .motivation-sub { font-size: 0.8rem; opacity: 0.9; margin-top: 0.25rem; }
    
    /* ãƒ©ãƒ³ã‚­ãƒ³ã‚°ã‚«ãƒ¼ãƒ‰æ”¹å–„ */
    .rank-card {
      background: white;
      border-radius: 12px;
      padding: 1rem;
      margin-bottom: 0.5rem;
      display: flex;
      align-items: center;
      gap: 0.75rem;
      box-shadow: 0 2px 8px rgba(0,0,0,0.06);
      transition: transform 0.2s, box-shadow 0.2s;
    }
    .rank-card:hover {
      transform: translateY(-2px);
      box-shadow: 0 4px 12px rgba(0,0,0,0.1);
    }
    .rank-card.my-rank {
      background: linear-gradient(135deg, #e8f0ec, #d4edda);
      border: 2px solid #2d5a47;
    }
    .rank-position {
      width: 36px;
      height: 36px;
      border-radius: 50%;
      display: flex;
      align-items: center;
      justify-content: center;
      font-weight: 700;
      font-size: 1rem;
    }
    .rank-position.gold { background: linear-gradient(135deg, #ffd700, #ffec8b); color: #8b6914; }
    .rank-position.silver { background: linear-gradient(135deg, #c0c0c0, #e8e8e8); color: #666; }
    .rank-position.bronze { background: linear-gradient(135deg, #cd7f32, #daa06d); color: #5c3d1e; }
    .rank-position.normal { background: #f5f6fa; color: #8a8a8a; }
    .rank-info { flex: 1; }
    .rank-name { font-weight: 600; font-size: 0.95rem; }
    .rank-stats { font-size: 0.75rem; color: #8a8a8a; }
    .rank-value { font-weight: 700; font-size: 1.1rem; color: #2d5a47; }
    .rank-change { font-size: 0.7rem; margin-left: 0.25rem; }
    .rank-change.up { color: #28a745; }
    .rank-change.down { color: #dc3545; }
    
    /* ãƒªã‚¹ãƒˆã‚¢ã‚¤ãƒ†ãƒ  */
    .list-item {
      padding: 0.75rem 1rem;
      border-bottom: 1px solid #f0f0f0;
      display: flex;
      align-items: center;
      gap: 0.75rem;
    }
    .list-item:last-child { border-bottom: none; }
    .list-item-icon {
      width: 36px;
      height: 36px;
      border-radius: 50%;
      background: #e8f0ec;
      display: flex;
      align-items: center;
      justify-content: center;
      font-size: 1rem;
      flex-shrink: 0;
    }
    .list-item-content { flex: 1; min-width: 0; }
    .list-item-title {
      font-weight: 600;
      font-size: 0.9rem;
      white-space: nowrap;
      overflow: hidden;
      text-overflow: ellipsis;
    }
    .list-item-sub { font-size: 0.75rem; color: #8a8a8a; }
    .list-item-right { text-align: right; flex-shrink: 0; }
    
    /* ãƒãƒƒã‚¸ */
    .badge {
      display: inline-block;
      padding: 0.2rem 0.5rem;
      border-radius: 100px;
      font-size: 0.65rem;
      font-weight: 600;
    }
    .badge-gray { background: #f5f6fa; color: #8a8a8a; }
    .badge-blue { background: #cce5ff; color: #004085; }
    .badge-yellow { background: #fff3cd; color: #856404; }
    .badge-green { background: #d4edda; color: #155724; }
    .badge-red { background: #f8d7da; color: #721c24; }
    
    /* ã‚¢ãƒ©ãƒ¼ãƒˆã‚«ãƒ¼ãƒ‰ */
    .alert-card {
      background: #fff3cd;
      border: 1px solid #ffc107;
      border-radius: 12px;
      padding: 1rem;
      margin-bottom: 1rem;
    }
    .alert-card-title {
      font-weight: 600;
      font-size: 0.85rem;
      color: #856404;
      margin-bottom: 0.5rem;
    }
    .alert-card-item {
      font-size: 0.8rem;
      color: #856404;
      padding: 0.25rem 0;
    }
    
    /* ãƒ¢ãƒ¼ãƒ€ãƒ« */
    .modal-bg {
      position: fixed;
      top: 0; left: 0; right: 0; bottom: 0;
      background: rgba(0,0,0,0.5);
      display: none;
      align-items: flex-end;
      justify-content: center;
      z-index: 1000;
    }
    .modal-bg.show { display: flex; }
    .modal-box {
      background: white;
      border-radius: 16px 16px 0 0;
      width: 100%;
      max-height: 90vh;
      overflow: hidden;
    }
    .modal-head {
      padding: 1rem;
      border-bottom: 1px solid #e5e2dd;
      display: flex;
      align-items: center;
      justify-content: space-between;
    }
    .modal-head h3 { font-size: 1rem; }
    .modal-close {
      width: 28px; height: 28px;
      border: none;
      background: #f5f6fa;
      border-radius: 50%;
      font-size: 1rem;
    }
    .modal-content {
      padding: 1rem;
      max-height: calc(90vh - 130px);
      overflow-y: auto;
    }
    .modal-foot {
      padding: 0.75rem 1rem;
      border-top: 1px solid #e5e2dd;
      display: flex;
      gap: 0.5rem;
    }
    .modal-foot .btn { flex: 1; }
    
    /* æ²ç¤ºæ¿ */
    .post-item {
      padding: 0.75rem;
      border-bottom: 1px solid #f0f0f0;
    }
    .post-header {
      display: flex;
      align-items: center;
      gap: 0.5rem;
      margin-bottom: 0.4rem;
    }
    .post-avatar {
      width: 28px;
      height: 28px;
      border-radius: 50%;
      background: #2d5a47;
      color: white;
      display: flex;
      align-items: center;
      justify-content: center;
      font-size: 0.7rem;
      font-weight: 600;
    }
    .post-name { font-weight: 600; font-size: 0.85rem; }
    .post-time { font-size: 0.7rem; color: #8a8a8a; margin-left: auto; }
    .post-content { font-size: 0.9rem; line-height: 1.5; }
    
    /* æŠ•ç¨¿å…¥åŠ› */
    .post-input-area {
      padding: 0.75rem;
      background: white;
      border-top: 1px solid #e5e2dd;
      display: flex;
      gap: 0.5rem;
    }
    .post-input {
      flex: 1;
      padding: 0.6rem;
      border: 1px solid #e5e2dd;
      border-radius: 20px;
      font-size: 14px;
      appearance: none; -webkit-appearance: none;
    }
    .post-send {
      width: 36px;
      height: 36px;
      border-radius: 50%;
      background: #2d5a47;
      color: white;
      border: none;
      font-size: 1rem;
    }
    
    /* ã‚¹ã‚±ã‚¸ãƒ¥ãƒ¼ãƒ« */
    .schedule-date {
      font-weight: 600;
      font-size: 0.85rem;
      padding: 0.5rem 1rem;
      background: #f5f6fa;
      color: #5a5a5a;
    }
    .schedule-item {
      padding: 0.75rem 1rem;
      border-bottom: 1px solid #f0f0f0;
      display: flex;
      align-items: center;
      gap: 0.75rem;
    }
    .schedule-check {
      width: 22px;
      height: 22px;
      border: 2px solid #e5e2dd;
      border-radius: 50%;
      flex-shrink: 0;
    }
    .schedule-check.done {
      background: #2d5a47;
      border-color: #2d5a47;
    }
    .schedule-check.done::after {
      content: 'âœ“';
      color: white;
      display: flex;
      align-items: center;
      justify-content: center;
      font-size: 0.75rem;
    }
    .schedule-info { flex: 1; }
    .schedule-company { font-weight: 600; font-size: 0.9rem; }
    .schedule-memo { font-size: 0.75rem; color: #8a8a8a; }
    
    /* çµŒè²» */
    .expense-total {
      background: linear-gradient(135deg, #2d5a47, #3d7a5f);
      color: white;
      border-radius: 12px;
      padding: 1rem;
      margin-bottom: 1rem;
      text-align: center;
    }
    .expense-total-label { font-size: 0.8rem; opacity: 0.9; }
    .expense-total-value { font-size: 2rem; font-weight: 700; }
    
    /* é€±å ± */
    .report-section { margin-bottom: 1rem; }
    .report-title {
      font-size: 0.8rem;
      font-weight: 600;
      color: #5a5a5a;
      margin-bottom: 0.5rem;
    }
    .report-grid {
      display: grid;
      grid-template-columns: repeat(3, 1fr);
      gap: 0.5rem;
    }
    .report-item {
      background: #f5f6fa;
      border-radius: 8px;
      padding: 0.75rem;
      text-align: center;
    }
    .report-value { font-size: 1.25rem; font-weight: 700; color: #2d5a47; }
    .report-label { font-size: 0.7rem; color: #8a8a8a; }
    
    /* FAB */
    .fab {
      position: fixed;
      bottom: 80px;
      right: 16px;
      width: 50px;
      height: 50px;
      border-radius: 50%;
      background: #2d5a47;
      color: white;
      border: none;
      font-size: 1.5rem;
      box-shadow: 0 4px 12px rgba(0,0,0,0.2);
      z-index: 90;
    }
    
    /* ç©º */
    .empty {
      text-align: center;
      padding: 2rem;
      color: #8a8a8a;
      font-size: 0.85rem;
    }
    
    /* é€šçŸ¥ãƒãƒƒã‚¸ */
    .notif-badge {
      position: absolute;
      top: -4px;
      right: -4px;
      background: #dc3545;
      color: white;
      font-size: 0.6rem;
      min-width: 16px;
      height: 16px;
      border-radius: 8px;
      display: flex;
      align-items: center;
      justify-content: center;
      font-weight: 700;
    }
    .nav-btn { position: relative; }
    
    /* é€šçŸ¥ãƒªã‚¹ãƒˆ */
    .notif-item {
      padding: 0.75rem 1rem;
      border-bottom: 1px solid #f0f0f0;
      display: flex;
      gap: 0.75rem;
      align-items: flex-start;
    }
    .notif-item.unread { background: #e8f4fd; }
    .notif-icon {
      width: 32px;
      height: 32px;
      border-radius: 50%;
      display: flex;
      align-items: center;
      justify-content: center;
      font-size: 0.9rem;
      flex-shrink: 0;
    }
    .notif-icon.success { background: #d4edda; }
    .notif-icon.error { background: #f8d7da; }
    .notif-icon.info { background: #cce5ff; }
    .notif-content { flex: 1; }
    .notif-title { font-weight: 600; font-size: 0.85rem; }
    .notif-text { font-size: 0.8rem; color: #5a5a5a; }
    .notif-time { font-size: 0.7rem; color: #8a8a8a; }
    
    /* TODOãƒªã‚¹ãƒˆ */
    .my-todo-item {
      padding: 0.75rem 1rem;
      border-bottom: 1px solid #f0f0f0;
      display: flex;
      gap: 0.75rem;
      align-items: flex-start;
    }
    .my-todo-check {
      width: 20px;
      height: 20px;
      border: 2px solid #e5e2dd;
      border-radius: 50%;
      flex-shrink: 0;
      cursor: pointer;
    }
    .my-todo-check.done {
      background: #2d5a47;
      border-color: #2d5a47;
    }
    .my-todo-content { flex: 1; }
    .my-todo-title { font-weight: 600; font-size: 0.9rem; }
    .my-todo-meta { font-size: 0.75rem; color: #8a8a8a; }
    
    /* ãƒ©ãƒ³ã‚­ãƒ³ã‚° */
    .rank-item {
      display: flex;
      align-items: center;
      gap: 0.75rem;
      padding: 0.75rem 1rem;
      border-bottom: 1px solid #f0f0f0;
    }
    .rank-num {
      width: 28px; height: 28px;
      border-radius: 50%;
      display: flex;
      align-items: center;
      justify-content: center;
      font-weight: 700;
      font-size: 0.8rem;
      background: #f5f6fa;
      color: #8a8a8a;
    }
    .rank-num.gold { background: linear-gradient(135deg, #ffd700, #ffec8b); color: #8b6914; }
    .rank-num.silver { background: linear-gradient(135deg, #c0c0c0, #e8e8e8); color: #666; }
    .rank-num.bronze { background: linear-gradient(135deg, #cd7f32, #daa06d); color: #5c3d1e; }
    .rank-name { flex: 1; font-weight: 600; font-size: 0.9rem; }
    .rank-val { font-weight: 700; color: #2d5a47; }

    /* ã‚¿ãƒ– */
    .tabs {
      display: flex;
      border-bottom: 1px solid #e5e2dd;
      background: white;
      margin: -1rem -1rem 1rem -1rem;
    }
    .tab-btn {
      flex: 1;
      padding: 0.75rem;
      font-size: 0.85rem;
      font-weight: 500;
      color: #8a8a8a;
      background: none;
      border: none;
      border-bottom: 2px solid transparent;
    }
    .tab-btn.active {
      color: #2d5a47;
      border-bottom-color: #2d5a47;
    }
    .tab-content { display: none; }
    .tab-content.active { display: block; }
    
    /* ã‚«ãƒ¬ãƒ³ãƒ€ãƒ¼ */
    .calendar-grid {
      display: grid;
      grid-template-columns: repeat(7, 1fr);
      gap: 2px;
    }
    .calendar-header {
      text-align: center;
      font-size: 0.7rem;
      font-weight: 600;
      color: #8a8a8a;
      padding: 0.5rem 0;
    }
    .calendar-header.sun { color: #dc3545; }
    .calendar-header.sat { color: #17a2b8; }
    .calendar-day {
      aspect-ratio: 1;
      display: flex;
      flex-direction: column;
      align-items: center;
      justify-content: center;
      font-size: 0.85rem;
      border-radius: 8px;
      cursor: pointer;
      position: relative;
      background: #f5f6fa;
    }
    .calendar-day:hover { background: #e8f0ec; }
    .calendar-day.other-month { color: #ccc; background: transparent; }
    .calendar-day.today { background: #2d5a47; color: white; font-weight: 700; }
    .calendar-day.selected { border: 2px solid #c9a962; }
    .calendar-day.has-schedule::after {
      content: '';
      position: absolute;
      bottom: 4px;
      width: 6px;
      height: 6px;
      border-radius: 50%;
      background: #c9a962;
    }
    .calendar-day.today.has-schedule::after { background: white; }

    /* ãƒãƒ‹ãƒ¥ã‚¢ãƒ«ç”¨ã‚¹ã‚¿ã‚¤ãƒ« */
    .faq-item {
      border-bottom: 1px solid #f0f0f0;
    }
    .faq-question {
      padding: 1rem;
      font-weight: 600;
      cursor: pointer;
      display: flex;
      align-items: center;
      gap: 0.75rem;
    }
    .faq-question:hover {
      background: #f8f8f8;
    }
    .faq-icon {
      font-size: 1.2rem;
    }
    .faq-arrow {
      margin-left: auto;
      color: #8a8a8a;
      transition: transform 0.3s;
    }
    .faq-item.open .faq-arrow {
      transform: rotate(180deg);
    }
    .faq-answer {
      display: none;
      padding: 0 1rem 1rem 3rem;
      font-size: 0.9rem;
      color: #5a5a5a;
      line-height: 1.8;
    }
    .faq-item.open .faq-answer {
      display: block;
    }
    .talk-box {
      background: #e8f0ec;
      border-radius: 12px;
      padding: 1rem;
      margin: 0.75rem 0;
      font-size: 0.9rem;
    }
    .talk-label {
      font-size: 0.75rem;
      color: #2d5a47;
      font-weight: 600;
      margin-bottom: 0.5rem;
    }
    /* ãƒ‰ãƒ©ãƒƒã‚°ï¼†ãƒ‰ãƒ­ãƒƒãƒ—ç”¨ã‚¹ã‚¿ã‚¤ãƒ« */
    .sortable-item {
      margin-bottom: 0.75rem;
      position: relative;
      transition: transform 0.2s, box-shadow 0.2s;
    }
    .sortable-item.dragging {
      opacity: 0.8;
      transform: scale(1.02);
      box-shadow: 0 8px 20px rgba(0,0,0,0.2);
      z-index: 100;
    }
    .sortable-item.drag-over {
      border-top: 3px solid #2d5a47;
    }
    .drag-handle {
      position: absolute;
      left: -30px;
      top: 50%;
      transform: translateY(-50%);
      font-size: 1.2rem;
      color: #8a8a8a;
      cursor: grab;
      padding: 0.5rem;
      user-select: none;
    }
    .drag-handle:active {
      cursor: grabbing;
    }
    .sort-mode .sortable-item {
      margin-left: 35px;
      border: 2px dashed #ccc;
      border-radius: 12px;
      padding: 4px;
    }
    .sort-mode .drag-handle {
      display: block !important;
    }
    .sort-mode .sortable-item:hover {
      border-color: #2d5a47;
    }
    /* ã‚¹ãƒãƒ›ç”¨ï¼šè¨­å®šãƒ¢ãƒ¼ãƒ€ãƒ« */
    .sort-list-item {
      display: flex;
      align-items: center;
      padding: 1rem;
      border-bottom: 1px solid #e5e2dd;
      gap: 0.75rem;
    }
    .sort-list-item:last-child {
      border-bottom: none;
    }
    .sort-list-icon {
      font-size: 1.2rem;
    }
    .sort-list-name {
      flex: 1;
      font-weight: 500;
    }
    .sort-list-arrows {
      display: flex;
      flex-direction: column;
      gap: 0.25rem;
    }
    .sort-list-arrows button {
      background: #f5f6fa;
      border: none;
      border-radius: 4px;
      padding: 0.25rem 0.5rem;
      cursor: pointer;
      font-size: 0.8rem;
    }
    .sort-list-arrows button:hover {
      background: #e5e2dd;
    }
    .sort-list-arrows button:disabled {
      opacity: 0.3;
      cursor: not-allowed;
    }
    @media (max-width: 600px) {
      #sortModeToggle {
        display: none !important;
      }
    }
  </style>
</head>
<body>

<!-- ãƒ­ã‚°ã‚¤ãƒ³ç”»é¢ -->
<div id="loginScreen">
  <div class="login-card">
    <div class="login-logo">
      <div class="login-logo-symbol">ç¤¼</div>
      <div class="login-logo-text">å–¶æ¥­ãƒãƒ¼ã‚¿ãƒ«</div>
    </div>
    <h2 class="login-title">ãƒ­ã‚°ã‚¤ãƒ³</h2>
    <div id="loginError" class="error-box hidden"></div>
    <div class="form-group">
      <label class="form-label">ãŠåå‰</label>
      <input type="text" class="form-input" id="loginName" placeholder="å±±ç”°å¤ªéƒ">
    </div>
    <div class="form-group">
      <label class="form-label">ãƒ‘ã‚¹ãƒ¯ãƒ¼ãƒ‰</label>
      <input type="password" class="form-input" id="loginPass" placeholder="ãƒ‘ã‚¹ãƒ¯ãƒ¼ãƒ‰">
    </div>
    <button class="btn btn-primary" id="loginBtn">ãƒ­ã‚°ã‚¤ãƒ³</button>
    <div class="login-footer">
      åˆã‚ã¦ã®æ–¹ã¯ <a href="javascript:void(0)" id="showRegisterLink">æ–°è¦ç™»éŒ²</a>
    </div>
  </div>
</div>

<!-- æ–°è¦ç™»éŒ²ãƒ¢ãƒ¼ãƒ€ãƒ« -->
<div class="modal-bg" id="registerModal">
  <div class="modal-box">
    <div class="modal-head">
      <h3>æ–°è¦ç™»éŒ²</h3>
      <button class="modal-close" onclick="closeModal('registerModal')">&times;</button>
    </div>
    <div class="modal-content">
      <div id="registerError" class="error-box hidden"></div>
      <div class="form-group">
        <label class="form-label">ãŠåå‰ *</label>
        <input type="text" class="form-input" id="registerName">
      </div>
      <div class="form-group">
        <label class="form-label">ãƒ‘ã‚¹ãƒ¯ãƒ¼ãƒ‰ *</label>
        <input type="password" class="form-input" id="registerPass" placeholder="4æ–‡å­—ä»¥ä¸Šã§å…¥åŠ›" oninput="validatePassword()">
        <div class="form-hint" id="registerPassHint">â€» 4æ–‡å­—ä»¥ä¸Šã§å…¥åŠ›ã—ã¦ãã ã•ã„</div>
      </div>
    </div>
    <div class="modal-foot">
      <button class="btn btn-secondary" onclick="closeModal('registerModal')">ã‚­ãƒ£ãƒ³ã‚»ãƒ«</button>
      <button class="btn btn-primary" id="registerBtn">ç™»éŒ²</button>
    </div>
  </div>
</div>

<!-- ãƒ¡ã‚¤ãƒ³ã‚¢ãƒ—ãƒª -->
<div id="mainApp">
  <header class="header">
    <div class="header-inner">
      <div class="header-logo">ç¤¼ å–¶æ¥­ãƒãƒ¼ã‚¿ãƒ«</div>
      <div class="header-user">
        <span id="userName"></span>
        <button class="header-logout" id="logoutBtn">ãƒ­ã‚°ã‚¢ã‚¦ãƒˆ</button>
      </div>
    </div>
  </header>

  <main class="main">
    <!-- ãƒ›ãƒ¼ãƒ  -->
    <div class="page active" id="page-home">
      
      <!-- å›ºå®šï¼šãƒ—ãƒ­ãƒ•ã‚£ãƒ¼ãƒ«ã‚«ãƒ¼ãƒ‰ -->
      <div class="profile-card">
        <div class="profile-header">
          <div class="profile-avatar" id="profileAvatar">ğŸ‘¤</div>
          <div class="profile-info">
            <div class="profile-name" id="profileName">-</div>
            <div class="profile-level" id="profileLevel">
              <span>â­</span>
              <span id="levelText">Lv.1 æ–°äººå–¶æ¥­</span>
            </div>
          </div>
          <!-- ãƒ©ãƒ³ã‚­ãƒ³ã‚°ã‚’ç›®ç«‹ã¤ä½ç½®ã« -->
          <div style="text-align:center; background:rgba(255,255,255,0.2); padding:0.5rem 1rem; border-radius:12px;">
            <div style="font-size:1.8rem; font-weight:800;" id="profileRank">-</div>
            <div style="font-size:0.65rem; opacity:0.9;">ãƒ©ãƒ³ã‚­ãƒ³ã‚°</div>
          </div>
        </div>
        <div class="profile-stats">
          <div class="profile-stat">
            <div class="profile-stat-value" id="profileClosed">0</div>
            <div class="profile-stat-label">æˆç´„</div>
          </div>
          <div class="profile-stat">
            <div class="profile-stat-value" id="profileNego">0</div>
            <div class="profile-stat-label">å•†è«‡ä¸­</div>
          </div>
          <div class="profile-stat">
            <div class="profile-stat-value" id="profileProspect">0</div>
            <div class="profile-stat-label">è¦‹è¾¼ã¿</div>
          </div>
        </div>
        <div class="badge-collection" id="badgeCollection"></div>
      </div>

      <!-- ä¸¦ã³æ›¿ãˆãƒœã‚¿ãƒ³ï¼ˆPCç”¨ï¼‰ -->
      <div id="sortModeToggle" style="display:flex; justify-content:flex-end; margin-bottom:0.5rem;">
        <button class="btn btn-sm btn-secondary" onclick="toggleSortMode()" id="sortModeBtn">
          <span id="sortModeIcon">âš™ï¸</span> <span id="sortModeText">ä¸¦ã³æ›¿ãˆ</span>
        </button>
      </div>

      <!-- ä¸¦ã³æ›¿ãˆå¯èƒ½ãªã‚³ãƒ³ãƒ†ãƒŠ -->
      <div id="sortableContainer">
        <!-- 1. å£²ä¸Šé«˜ -->
        <div class="sortable-item" data-section="sales">
          <div class="drag-handle" style="display:none;">â‰¡</div>
          <div class="card" style="background: linear-gradient(135deg, #667eea, #764ba2); color: white; margin:0;">
            <div class="card-body" style="text-align:center; padding:1.5rem;">
              <div style="font-size:0.85rem; opacity:0.9;">ğŸ’° ä»Šæœˆã®å£²ä¸Šé«˜</div>
              <div style="font-size:2.5rem; font-weight:800;" id="profileSales">Â¥0</div>
              <div style="font-size:0.8rem; opacity:0.8;">æˆç´„ <span id="profileClosedCount">0</span>ç¤¾ Ã— 500ä¸‡å††</div>
            </div>
          </div>
        </div>

        <!-- åŠ±ã¾ã—ãƒ¡ãƒƒã‚»ãƒ¼ã‚¸ -->
        <div class="sortable-item" data-section="motivation">
          <div class="drag-handle" style="display:none;">â‰¡</div>
          <div class="motivation-card" id="motivationCard" style="margin:0;">
            <div class="motivation-icon" id="motivationIcon">ğŸ’ª</div>
            <div class="motivation-text">
              <div class="motivation-main" id="motivationMain">ä»Šæ—¥ã‚‚é ‘å¼µã‚Šã¾ã—ã‚‡ã†ï¼</div>
              <div class="motivation-sub" id="motivationSub">ç›®æ¨™é”æˆã¾ã§ã‚ã¨å°‘ã—</div>
            </div>
          </div>
        </div>

        <!-- é€šçŸ¥ã‚«ãƒ¼ãƒ‰ï¼ˆæ¡ä»¶ä»˜ãè¡¨ç¤ºï¼‰ -->
        <div class="sortable-item" data-section="notification" id="notifWrapper" style="display:none;">
          <div class="drag-handle" style="display:none;">â‰¡</div>
          <div class="card" id="newNotifCard" style="background:linear-gradient(135deg, #ff6b6b, #ee5a5a); color:white; margin:0;">
            <div class="card-body" onclick="switchPage('notifications')" style="cursor:pointer;">
              <div style="display:flex; align-items:center; gap:0.75rem;">
                <div style="font-size:1.5rem;">ğŸ””</div>
                <div style="flex:1;">
                  <div style="font-weight:600;" id="newNotifTitle">æ–°ã—ã„é€šçŸ¥ãŒã‚ã‚Šã¾ã™</div>
                  <div style="font-size:0.8rem; opacity:0.9;" id="newNotifPreview"></div>
                </div>
                <div style="font-size:1.2rem;">â†’</div>
              </div>
            </div>
          </div>
        </div>

        <!-- 2. é€²æ—ã‚µãƒãƒªãƒ¼ -->
        <div class="sortable-item" data-section="progress">
          <div class="drag-handle" style="display:none;">â‰¡</div>
          <div class="card" id="kpiCalcCard" style="margin:0;">
            <div class="card-header">
              <span class="card-title">ğŸ“Š é€²æ—ã‚µãƒãƒªãƒ¼</span>
            </div>
            <div class="card-body" style="font-size:0.85rem;">
              <div id="kpiCalcContent">
                <div style="color:#8a8a8a; text-align:center;">ç›®æ¨™ã‚’è¨­å®šã™ã‚‹ã¨è¨ˆç®—çµæœãŒè¡¨ç¤ºã•ã‚Œã¾ã™</div>
              </div>
            </div>
          </div>
        </div>

        <!-- ãƒ•ã‚©ãƒ­ãƒ¼ã‚¢ãƒƒãƒ—ã‚¢ãƒ©ãƒ¼ãƒˆ -->
        <div class="alert-card" id="followupAlert" style="display:none;">
          <div class="alert-card-title">âš ï¸ ãƒ•ã‚©ãƒ­ãƒ¼ãŒå¿…è¦ãªæ¡ˆä»¶</div>
          <div id="followupList"></div>
        </div>

        <!-- 3. ä»Šæ—¥ã®äºˆå®š -->
        <div class="sortable-item" data-section="schedule">
          <div class="drag-handle" style="display:none;">â‰¡</div>
          <div class="card" style="margin:0;">
            <div class="card-header">
              <span class="card-title">ğŸ“… ä»Šæ—¥ã®äºˆå®š</span>
            </div>
            <div id="todaySchedule"></div>
          </div>
        </div>

        <!-- 4. æœˆã®ç›®æ¨™ -->
        <div class="sortable-item" data-section="goal">
          <div class="drag-handle" style="display:none;">â‰¡</div>
          <div class="card" style="margin:0;">
            <div class="card-header">
              <span class="card-title">ğŸ¯ ä»Šæœˆã®ç›®æ¨™</span>
              <button class="btn btn-sm btn-secondary" onclick="openGoalModal()">è¨­å®š</button>
            </div>
            <div class="card-body">
              <div style="text-align:center; padding:1rem; background:#f8f9fa; border-radius:12px; margin-bottom:1rem;">
                <div style="font-size:0.8rem; color:#8a8a8a;">å—æ³¨ç›®æ¨™</div>
                <div style="font-size:2.5rem; font-weight:800; color:#2d5a47;">
                  <span id="goalClosedCurrent2">0</span><span style="font-size:1.2rem; color:#8a8a8a;"> / <span id="goalClosedTarget2">0</span>ç¤¾</span>
                </div>
                <div class="goal-bar" style="margin-top:0.5rem; height:16px;"><div class="goal-fill" id="goalClosedBar" style="width:0%"></div></div>
              </div>
              <div style="font-size:0.75rem; color:#8a8a8a; margin-bottom:0.75rem; padding:0.5rem; background:#f5f6fa; border-radius:8px;">
                ğŸ’¡ å—æ³¨ã™ã‚‹ãŸã‚ã«å¿…è¦ãªæ•°ã‚’é€†ç®—ã—ã¦ã„ã¾ã™
              </div>
              <div class="goal-section">
                <div class="goal-header">
                  <span class="goal-title">
                    <span style="display:inline-flex; align-items:center; justify-content:center; width:20px; height:20px; background:#ff6b6b; color:white; border-radius:50%; font-size:0.7rem; margin-right:0.25rem;">â‘ </span>
                    è¦‹è¾¼ã¿
                  </span>
                  <span class="goal-numbers"><span id="goalProspectCurrent">0</span> / <span id="goalProspectTarget">0</span></span>
                </div>
                <div class="goal-bar"><div class="goal-fill" id="goalProspectBar" style="width:0%"></div></div>
                <div style="font-size:0.65rem; color:#8a8a8a; margin-top:0.25rem;">å°å…¥ã‚’å‰å‘ãã«æ¤œè¨ä¸­ï¼ˆDï¼‰</div>
              </div>
              <div class="goal-section">
                <div class="goal-header">
                  <span class="goal-title">
                    <span style="display:inline-flex; align-items:center; justify-content:center; width:20px; height:20px; background:#ffc107; color:#1a1f2e; border-radius:50%; font-size:0.7rem; margin-right:0.25rem;">â‘¡</span>
                    å•†è«‡ï¼ˆå®Ÿæ–½æ¸ˆã¿ï¼‰
                  </span>
                  <span class="goal-numbers"><span id="goalNegoCurrent">0</span> / <span id="goalNegoTarget">0</span></span>
                </div>
                <div class="goal-bar"><div class="goal-fill" id="goalNegoBar" style="width:0%"></div></div>
                <div style="font-size:0.65rem; color:#8a8a8a; margin-top:0.25rem;">å®Ÿéš›ã«é¢ä¼šå•†è«‡ã‚’å®Ÿæ–½ã—ãŸä¼šç¤¾ï¼ˆCï¼‰</div>
              </div>
              <div class="goal-section" style="margin-bottom:0">
                <div class="goal-header">
                  <span class="goal-title">
                    <span style="display:inline-flex; align-items:center; justify-content:center; width:20px; height:20px; background:#17a2b8; color:white; border-radius:50%; font-size:0.7rem; margin-right:0.25rem;">â‘¢</span>
                    ã‚¢ãƒï¼ˆé¢ä¼šç¢ºå®šï¼‰
                  </span>
                  <span class="goal-numbers"><span id="goalAppoCurrent">0</span> / <span id="goalAppoTarget">0</span></span>
                </div>
                <div class="goal-bar"><div class="goal-fill" id="goalAppoBar" style="width:0%"></div></div>
                <div style="font-size:0.65rem; color:#8a8a8a; margin-top:0.25rem;">é¢ä¼šå•†è«‡ãŒç¢ºå®šã—ãŸã‚¢ãƒï¼ˆBï¼‰â€»å¤–æ³¨æˆæœç‰©</div>
              </div>
            </div>
          </div>
        </div>

        <!-- 5. æ‹…å½“ä¼šç¤¾ -->
        <div class="sortable-item" data-section="prospects">
          <div class="drag-handle" style="display:none;">â‰¡</div>
          <div class="card" style="margin:0;">
            <div class="card-header">
              <span class="card-title">ğŸ¢ æ‹…å½“ä¼šç¤¾</span>
              <button class="btn btn-sm btn-secondary" onclick="switchPage('prospects')">ã™ã¹ã¦è¦‹ã‚‹</button>
            </div>
            <div id="myProspectsList"></div>
          </div>
        </div>

        <!-- 6. TODO -->
        <div class="sortable-item" data-section="todo">
          <div class="drag-handle" style="display:none;">â‰¡</div>
          <div class="card" id="newTodoCard" style="display:none; background:linear-gradient(135deg, #ffc107, #e0a800); color:#1a1f2e; margin:0; margin-bottom:0.5rem;">
            <div class="card-body" onclick="switchPage('mytodos')" style="cursor:pointer;">
              <div style="display:flex; align-items:center; gap:0.75rem;">
                <div style="font-size:1.5rem;">ğŸ“‹</div>
                <div style="flex:1;">
                  <div style="font-weight:600;" id="newTodoTitle">æœªå®Œäº†ã®TODOãŒã‚ã‚Šã¾ã™</div>
                  <div style="font-size:0.8rem; opacity:0.9;" id="newTodoPreview"></div>
                </div>
                <div style="font-size:1.2rem;">â†’</div>
              </div>
            </div>
          </div>
          <div class="card" style="margin:0;">
            <div class="card-header">
              <span class="card-title">ğŸ“‹ TODOï¼ˆæŒ‡ç¤ºï¼‰</span>
              <button class="btn btn-sm btn-secondary" onclick="switchPage('mytodos')">ã™ã¹ã¦è¦‹ã‚‹</button>
            </div>
            <div id="homeTodoList"></div>
          </div>
        </div>
      </div>
    </div>

    <!-- è¨ªå•å…ˆ -->
    <div class="page" id="page-prospects">
      <div class="card" style="background: linear-gradient(135deg, #2d5a47, #3d7a5f); color: white;">
        <div class="card-body" style="text-align:center;">
          <div style="font-size:0.85rem; opacity:0.9;">ç™»éŒ²è‘¬å„€ç¤¾</div>
          <div style="font-size:2rem; font-weight:700;" id="totalProspectsCount">0</div>
          <div style="font-size:0.8rem; opacity:0.8;" id="myProspectsCount">ã‚ãªãŸã®æ‹…å½“: 0ç¤¾</div>
        </div>
      </div>
        </div>
      </div>

      <div class="card">
        <div class="card-header">
          <span class="card-title">ğŸ“‹ TODOï¼ˆæŒ‡ç¤ºï¼‰</span>
          <button class="btn btn-sm btn-secondary" onclick="switchPage('mytodos')">ã™ã¹ã¦è¦‹ã‚‹</button>
        </div>
        <div id="homeTodoList"></div>
      </div>
    </div>

    <!-- è¨ªå•å…ˆ -->
    <div class="page" id="page-prospects">
      <div class="card" style="background: linear-gradient(135deg, #2d5a47, #3d7a5f); color: white;">
        <div class="card-body" style="text-align:center;">
          <div style="font-size:0.85rem; opacity:0.9;">ç™»éŒ²è‘¬å„€ç¤¾</div>
          <div style="font-size:2rem; font-weight:700;" id="totalProspectsCount">0</div>
          <div style="font-size:0.8rem; opacity:0.8;" id="myProspectsCount">ã‚ãªãŸã®æ‹…å½“: 0ç¤¾</div>
        </div>
      </div>

      <div class="card">
        <div class="card-header">
          <span class="card-title">ğŸ“ ã‚¨ãƒªã‚¢ã‹ã‚‰é¸ã¶</span>
        </div>
        <div class="card-body" style="padding:0;">
          <div id="regionList"></div>
        </div>
      </div>

      <div class="card">
        <div class="card-body" style="padding: 0.75rem;">
          <div style="display:flex; gap:0.5rem; flex-wrap:wrap;">
            <select class="form-input" id="filterRegion" style="flex:1; min-width:80px; padding:0.5rem;">
              <option value="">å…¨ã‚¨ãƒªã‚¢</option>
            </select>
            <select class="form-input" id="filterPref" style="flex:1; min-width:80px; padding:0.5rem;">
              <option value="">å…¨éƒ½é“åºœçœŒ</option>
            </select>
            <select class="form-input" id="filterStatus" style="flex:1; min-width:80px; padding:0.5rem;">
              <option value="">å…¨çŠ¶æ…‹</option>
              <option value="æœªè¨ªå•">æœªè¨ªå•</option>
              <option value="è¨ªå•æ¸ˆã¿">è¨ªå•æ¸ˆã¿</option>
              <option value="å•†è«‡ä¸­">å•†è«‡ä¸­</option>
              <option value="è¦‹è¾¼ã¿">è¦‹è¾¼ã¿</option>
              <option value="æˆç´„">æˆç´„</option>
            </select>
          </div>
        </div>
      </div>

      <div id="prospectsList"></div>
    </div>

    <!-- ã‚¹ã‚±ã‚¸ãƒ¥ãƒ¼ãƒ« -->
    <div class="page" id="page-schedule">
      <div class="tabs">
        <button class="tab-btn active" onclick="switchTab('scheduleTab', 'upcoming')">äºˆå®š</button>
        <button class="tab-btn" onclick="switchTab('scheduleTab', 'done')">å®Œäº†</button>
      </div>
      <div class="tab-content active" id="scheduleTab-upcoming">
        <div id="upcomingSchedules"></div>
      </div>
      <div class="tab-content" id="scheduleTab-done">
        <div id="doneSchedules"></div>
      </div>
      <button class="fab" onclick="openScheduleModal()">+</button>
    </div>

    <!-- ã‚«ãƒ¬ãƒ³ãƒ€ãƒ¼ -->
    <div class="page" id="page-calendar">
      <div class="card">
        <div class="card-header">
          <button class="btn btn-sm btn-secondary" onclick="changeMonth(-1)">â—€</button>
          <span class="card-title" id="calendarTitle">2026å¹´1æœˆ</span>
          <button class="btn btn-sm btn-secondary" onclick="changeMonth(1)">â–¶</button>
        </div>
        <div class="card-body" style="padding:0.5rem;">
          <div id="calendarGrid"></div>
        </div>
      </div>
      <div class="card">
        <div class="card-header">
          <span class="card-title" id="selectedDateTitle">äºˆå®š</span>
          <button class="btn btn-sm btn-primary" onclick="openScheduleModal()">+ è¿½åŠ </button>
        </div>
        <div id="selectedDateSchedules"></div>
      </div>
    </div>

    <!-- æ²ç¤ºæ¿ -->
    <div class="page" id="page-board">
      <div class="card" style="margin-bottom:60px;">
        <div id="postsList" style="max-height: calc(100vh - 220px); overflow-y: auto;"></div>
      </div>
      <div class="post-input-area" style="position:fixed; bottom:56px; left:0; right:0;">
        <input type="text" class="post-input" id="postInput" placeholder="æŠ•ç¨¿ã‚’å…¥åŠ›...">
        <button class="post-send" onclick="sendPost()">â†‘</button>
      </div>
    </div>

    <!-- ãã®ä»– -->
    <div class="page" id="page-more">
      <div class="card">
        <div class="list-item" onclick="switchPage('notifications')">
          <div class="list-item-icon">ğŸ””</div>
          <div class="list-item-content">
            <div class="list-item-title">é€šçŸ¥</div>
            <div class="list-item-sub" id="notifCount">0ä»¶ã®æœªèª­</div>
          </div>
          <div class="list-item-right">â†’</div>
        </div>
        <div class="list-item" onclick="switchPage('mytodos')">
          <div class="list-item-icon">ğŸ“‹</div>
          <div class="list-item-content">
            <div class="list-item-title">TODOï¼ˆæŒ‡ç¤ºï¼‰</div>
            <div class="list-item-sub" id="todoCount">0ä»¶ã®æœªå®Œäº†</div>
          </div>
          <div class="list-item-right">â†’</div>
        </div>
        <div class="list-item" onclick="switchPage('board')">
          <div class="list-item-icon">ğŸ’¬</div>
          <div class="list-item-content">
            <div class="list-item-title">æ²ç¤ºæ¿</div>
          </div>
          <div class="list-item-right">â†’</div>
        </div>
        <div class="list-item" onclick="switchPage('knowledge')">
          <div class="list-item-icon">ğŸ“š</div>
          <div class="list-item-content">
            <div class="list-item-title">ãƒŠãƒ¬ãƒƒã‚¸å…±æœ‰</div>
          </div>
          <div class="list-item-right">â†’</div>
        </div>
        <div class="list-item" onclick="switchPage('report')">
          <div class="list-item-icon">ğŸ“Š</div>
          <div class="list-item-content">
            <div class="list-item-title">é€±å ±ãƒ»æœˆå ±</div>
          </div>
          <div class="list-item-right">â†’</div>
        </div>
        <div class="list-item" onclick="switchPage('manual')">
          <div class="list-item-icon">ğŸ“–</div>
          <div class="list-item-content">
            <div class="list-item-title">å–¶æ¥­ãƒãƒ‹ãƒ¥ã‚¢ãƒ« / FAQ</div>
            <div class="list-item-sub">ã‚ˆãã‚ã‚‹è³ªå•ãƒ»å–¶æ¥­ãƒˆãƒ¼ã‚¯é›†</div>
          </div>
          <div class="list-item-right">â†’</div>
        </div>
        <div class="list-item" onclick="switchPage('help')" style="background:linear-gradient(135deg, #e8f4fd, #d1e9ff);">
          <div class="list-item-icon">â“</div>
          <div class="list-item-content">
            <div class="list-item-title">ã“ã®ã‚¢ãƒ—ãƒªã®ä½¿ã„æ–¹</div>
            <div class="list-item-sub">åˆã‚ã¦ã®æ–¹ã¯ã“ã¡ã‚‰</div>
          </div>
          <div class="list-item-right">â†’</div>
        </div>
        <div class="list-item" onclick="switchPage('sortSettings')">
          <div class="list-item-icon">âš™ï¸</div>
          <div class="list-item-content">
            <div class="list-item-title">ãƒ›ãƒ¼ãƒ ç”»é¢ã®ä¸¦ã³æ›¿ãˆ</div>
            <div class="list-item-sub">è¡¨ç¤ºé †åºã‚’ã‚«ã‚¹ã‚¿ãƒã‚¤ã‚º</div>
          </div>
          <div class="list-item-right">â†’</div>
        </div>
      </div>
    </div>

    <!-- ä¸¦ã³æ›¿ãˆè¨­å®šãƒšãƒ¼ã‚¸ï¼ˆã‚¹ãƒãƒ›ç”¨ï¼‰ -->
    <div class="page" id="page-sortSettings">
      <button class="btn btn-secondary btn-sm" onclick="switchPage('more')" style="margin-bottom:1rem;">â† æˆ»ã‚‹</button>
      <div class="card">
        <div class="card-header">
          <span class="card-title">âš™ï¸ ãƒ›ãƒ¼ãƒ ç”»é¢ã®ä¸¦ã³æ›¿ãˆ</span>
        </div>
        <div class="card-body" style="padding:0;">
          <div id="sortSettingsList"></div>
        </div>
      </div>
      <div style="padding:1rem;">
        <button class="btn btn-primary" onclick="saveSortOrder()" style="width:100%;">ä¿å­˜ã™ã‚‹</button>
        <button class="btn btn-secondary" onclick="resetSortOrder()" style="width:100%; margin-top:0.5rem;">ãƒ‡ãƒ•ã‚©ãƒ«ãƒˆã«æˆ»ã™</button>
      </div>
    </div>

    <!-- é€šçŸ¥ -->
    <div class="page" id="page-notifications">
      <button class="btn btn-secondary btn-sm" onclick="switchPage('more')" style="margin-bottom:1rem;">â† æˆ»ã‚‹</button>
      <div class="card">
        <div class="card-header">
          <span class="card-title">ğŸ”” é€šçŸ¥</span>
          <button class="btn btn-sm btn-secondary" onclick="markAllRead()">å…¨ã¦æ—¢èª­</button>
        </div>
        <div id="notificationsList"></div>
      </div>
    </div>

    <!-- TODO -->
    <div class="page" id="page-mytodos">
      <button class="btn btn-secondary btn-sm" onclick="switchPage('more')" style="margin-bottom:1rem;">â† æˆ»ã‚‹</button>
      <div class="card">
        <div class="card-header">
          <span class="card-title">ğŸ“‹ TODOï¼ˆæŒ‡ç¤ºï¼‰</span>
        </div>
        <div id="myTodosList"></div>
      </div>
    </div>

    <!-- çµŒè²» -->
    <div class="page" id="page-expenses">
      <div class="expense-total">
        <div class="expense-total-label">ä»Šæœˆã®ç”³è«‹åˆè¨ˆ</div>
        <div class="expense-total-value" id="expenseTotal">Â¥0</div>
      </div>
      <div class="card">
        <div class="card-header">
          <span class="card-title">çµŒè²»ä¸€è¦§</span>
          <button class="btn btn-sm btn-primary" onclick="openExpenseModal()">+ ç”³è«‹</button>
        </div>
        <div id="expensesList"></div>
      </div>
    </div>

    <!-- ãƒŠãƒ¬ãƒƒã‚¸ -->
    <div class="page" id="page-knowledge">
      <button class="btn btn-secondary btn-sm" onclick="switchPage('more')" style="margin-bottom:1rem;">â† æˆ»ã‚‹</button>
      <div class="card">
        <div class="card-header">
          <span class="card-title">ãƒŠãƒ¬ãƒƒã‚¸å…±æœ‰</span>
          <button class="btn btn-sm btn-primary" onclick="openKnowledgeModal()">+ æŠ•ç¨¿</button>
        </div>
      </div>
      <div id="knowledgeList"></div>
    </div>

    <!-- ãƒ©ãƒ³ã‚­ãƒ³ã‚° -->
    <div class="page" id="page-ranking">
      <div class="card">
        <div class="card-header">
          <span class="card-title">ğŸ† è¨ªå•æ•°ãƒ©ãƒ³ã‚­ãƒ³ã‚°</span>
        </div>
        <div id="rankingList"></div>
      </div>
    </div>

    <!-- é€±å ±ãƒ»æœˆå ± -->
    <div class="page" id="page-report">
      <button class="btn btn-secondary btn-sm" onclick="switchPage('more')" style="margin-bottom:1rem;">â† æˆ»ã‚‹</button>
      
      <!-- KPIã‚µãƒãƒªãƒ¼ã‚«ãƒ¼ãƒ‰ -->
      <div class="card" style="background: linear-gradient(135deg, #2d5a47, #3d7a5f); color: white; margin-bottom: 1rem;">
        <div class="card-body">
          <div style="text-align:center; margin-bottom:1rem;">
            <div style="font-size:0.85rem; opacity:0.9;">ä»Šæœˆã®æˆç¸¾</div>
            <div style="font-size:2rem; font-weight:700;" id="reportMainClosed">0</div>
            <div style="font-size:0.85rem;">ç¤¾ æˆç´„</div>
          </div>
          <div style="display:grid; grid-template-columns:repeat(3,1fr); gap:0.5rem; text-align:center;">
            <div style="background:rgba(255,255,255,0.1); padding:0.5rem; border-radius:8px;">
              <div style="font-size:1.2rem; font-weight:700;" id="reportMainProspect">0</div>
              <div style="font-size:0.7rem; opacity:0.8;">è¦‹è¾¼ã¿</div>
            </div>
            <div style="background:rgba(255,255,255,0.1); padding:0.5rem; border-radius:8px;">
              <div style="font-size:1.2rem; font-weight:700;" id="reportMainNego">0</div>
              <div style="font-size:0.7rem; opacity:0.8;">å•†è«‡</div>
            </div>
            <div style="background:rgba(255,255,255,0.1); padding:0.5rem; border-radius:8px;">
              <div style="font-size:1.2rem; font-weight:700;" id="reportMainAppo">0</div>
              <div style="font-size:0.7rem; opacity:0.8;">ã‚¢ãƒ</div>
            </div>
          </div>
        </div>
      </div>

      <!-- è»¢æ›ç‡ã‚«ãƒ¼ãƒ‰ -->
      <div class="card">
        <div class="card-header">
          <span class="card-title">ğŸ“ˆ è»¢æ›ç‡åˆ†æ</span>
        </div>
        <div class="card-body">
          <div style="font-size:0.75rem; color:#8a8a8a; margin-bottom:1rem; padding:0.5rem; background:#f5f6fa; border-radius:8px;">
            ğŸ’¡ å„ã‚¹ãƒ†ãƒƒãƒ—ã§ã©ã‚Œã ã‘æ¬¡ã«é€²ã‚ãŸã‹ã®å‰²åˆã§ã™
          </div>
          <div style="margin-bottom:1rem;">
            <div style="display:flex; justify-content:space-between; align-items:center; margin-bottom:0.5rem;">
              <span style="font-size:0.85rem;">
                <span style="display:inline-flex; align-items:center; justify-content:center; width:18px; height:18px; background:#17a2b8; color:white; border-radius:50%; font-size:0.65rem; margin-right:0.25rem;">â‘¢</span>
                ã‚¢ãƒ â†’ å•†è«‡ï¼ˆé¢ä¼šå®Ÿæ–½ç‡ï¼‰
              </span>
              <span style="font-weight:600;" id="reportBetaRate">0%</span>
            </div>
            <div class="goal-bar"><div class="goal-fill" id="reportBetaBar" style="width:0%"></div></div>
            <div style="display:flex; justify-content:space-between; font-size:0.7rem; color:#8a8a8a; margin-top:0.25rem;">
              <span>ç›®æ¨™: 70%ï¼ˆC/Bï¼‰</span>
              <span id="reportBetaStatus">-</span>
            </div>
          </div>
          <div style="margin-bottom:1rem;">
            <div style="display:flex; justify-content:space-between; align-items:center; margin-bottom:0.5rem;">
              <span style="font-size:0.85rem;">
                <span style="display:inline-flex; align-items:center; justify-content:center; width:18px; height:18px; background:#ffc107; color:#1a1f2e; border-radius:50%; font-size:0.65rem; margin-right:0.25rem;">â‘¡</span>
                å•†è«‡ â†’ è¦‹è¾¼ã¿
              </span>
              <span style="font-weight:600;" id="reportGammaRate">0%</span>
            </div>
            <div class="goal-bar"><div class="goal-fill" id="reportGammaBar" style="width:0%"></div></div>
            <div style="display:flex; justify-content:space-between; font-size:0.7rem; color:#8a8a8a; margin-top:0.25rem;">
              <span>ç›®æ¨™: 50%ï¼ˆD/Cï¼‰</span>
              <span id="reportGammaStatus">-</span>
            </div>
          </div>
          <div>
            <div style="display:flex; justify-content:space-between; align-items:center; margin-bottom:0.5rem;">
              <span style="font-size:0.85rem;">
                <span style="display:inline-flex; align-items:center; justify-content:center; width:18px; height:18px; background:#ff6b6b; color:white; border-radius:50%; font-size:0.65rem; margin-right:0.25rem;">â‘ </span>
                è¦‹è¾¼ã¿ â†’ å—æ³¨
              </span>
              <span style="font-weight:600;" id="reportDeltaRate">0%</span>
            </div>
            <div class="goal-bar"><div class="goal-fill" id="reportDeltaBar" style="width:0%"></div></div>
            <div style="display:flex; justify-content:space-between; font-size:0.7rem; color:#8a8a8a; margin-top:0.25rem;">
              <span>ç›®æ¨™: 10%ï¼ˆE/Dï¼‰</span>
              <span id="reportDeltaStatus">-</span>
            </div>
          </div>
        </div>
      </div>

      <!-- ãƒ•ã‚¡ãƒãƒ«åˆ†æ -->
      <div class="card">
        <div class="card-header">
          <span class="card-title">ğŸ”» ãƒ•ã‚¡ãƒãƒ«åˆ†æ</span>
        </div>
        <div class="card-body" id="funnelAnalysis">
          <!-- JSã§å‹•çš„ç”Ÿæˆ -->
        </div>
      </div>

      <!-- ç›®æ¨™é”æˆçŠ¶æ³ -->
      <div class="card">
        <div class="card-header">
          <span class="card-title">ğŸ¯ ç›®æ¨™é”æˆçŠ¶æ³</span>
        </div>
        <div class="card-body" id="goalAchievement">
          <!-- JSã§å‹•çš„ç”Ÿæˆ -->
        </div>
      </div>

      <!-- çµŒè²»ã‚µãƒãƒªãƒ¼ -->
      <div class="card">
        <div class="card-header">
          <span class="card-title">ğŸ’° çµŒè²»ã‚µãƒãƒªãƒ¼</span>
        </div>
        <div class="card-body">
          <div class="report-grid">
            <div class="report-item">
              <div class="report-value" id="reportExpense">Â¥0</div>
              <div class="report-label">åˆè¨ˆ</div>
            </div>
            <div class="report-item">
              <div class="report-value" id="reportExpenseCount">0</div>
              <div class="report-label">ä»¶æ•°</div>
            </div>
            <div class="report-item">
              <div class="report-value" id="reportTransport">Â¥0</div>
              <div class="report-label">äº¤é€šè²»</div>
            </div>
          </div>
          <div id="expenseBreakdown" style="margin-top:1rem;"></div>
        </div>
      </div>
    </div>

    <!-- å–¶æ¥­ãƒãƒ‹ãƒ¥ã‚¢ãƒ« / FAQ -->
    <div class="page" id="page-manual">
      <div class="card" style="background: linear-gradient(135deg, #2d5a47, #3d7a5f); color: white; margin-bottom: 1rem;">
        <div class="card-body" style="text-align:center;">
          <div style="font-size: 2rem; margin-bottom: 0.5rem;">ğŸ“–</div>
          <div style="font-size: 1.1rem; font-weight: 700;">å–¶æ¥­ãƒãƒ‹ãƒ¥ã‚¢ãƒ«</div>
          <div style="font-size: 0.8rem; opacity: 0.9;">ç¤¼ï¼ˆReiï¼‰ã‚·ã‚¹ãƒ†ãƒ å®Œå…¨ã‚¬ã‚¤ãƒ‰</div>
        </div>
      </div>

      <!-- è‘¬å„€æ¥­ç•Œã®åŸºç¤çŸ¥è­˜ -->
      <div class="card">
        <div class="card-header">
          <span class="card-title">ğŸ›ï¸ è‘¬å„€æ¥­ç•Œã®åŸºç¤çŸ¥è­˜</span>
        </div>
        <div class="faq-item" onclick="toggleFaq(this)">
          <div class="faq-question">
            <span class="faq-icon">ğŸ“Š</span>
            <span>è‘¬å„€æ¥­ç•Œã®å¸‚å ´è¦æ¨¡</span>
            <span class="faq-arrow">â–¼</span>
          </div>
          <div class="faq-answer">
            <p><strong>å¸‚å ´è¦æ¨¡</strong></p>
            <p>ãƒ»å›½å†…è‘¬å„€å¸‚å ´ï¼šç´„1.8å…†å††</p>
            <p>ãƒ»å¹´é–“æ­»äº¡è€…æ•°ï¼šç´„156ä¸‡äººï¼ˆ2023å¹´ï¼‰</p>
            <p>ãƒ»ä»Šå¾Œã‚‚é«˜é½¢åŒ–ã§å¢—åŠ å‚¾å‘</p>
            <br>
            <p><strong>è‘¬å„€1ä»¶ã‚ãŸã‚Šã®å¹³å‡è²»ç”¨</strong></p>
            <p>ãƒ»ä¸€èˆ¬è‘¬ï¼š150ã€œ200ä¸‡å††</p>
            <p>ãƒ»å®¶æ—è‘¬ï¼š50ã€œ100ä¸‡å††</p>
            <p>ãƒ»ç›´è‘¬ï¼š20ã€œ40ä¸‡å††</p>
            <div class="talk-box">
              <div class="talk-label">ğŸ’¬ å–¶æ¥­ãƒˆãƒ¼ã‚¯ä¾‹</div>
              ã€Œè‘¬å„€æ¥­ç•Œã¯å¹´é–“ç´„1.8å…†å††ã®å¸‚å ´ã§ã€é«˜é½¢åŒ–ã«ä¼´ã„ä»Šå¾Œã‚‚æ‹¡å¤§ãŒè¦‹è¾¼ã¾ã‚Œã¦ã„ã¾ã™ã€‚ãã®ä¸­ã§ã€é æ–¹ã®æ–¹ã¸ã®å¯¾å¿œã¯å¾¡ç¤¾ã®å·®åˆ¥åŒ–ãƒã‚¤ãƒ³ãƒˆã«ãªã‚Šã¾ã™ã€‚ã€
            </div>
          </div>
        </div>
        <div class="faq-item" onclick="toggleFaq(this)">
          <div class="faq-question">
            <span class="faq-icon">ğŸ‘¨â€ğŸ‘©â€ğŸ‘§â€ğŸ‘¦</span>
            <span>è‘¬å„€å½¢æ…‹ã®ãƒˆãƒ¬ãƒ³ãƒ‰</span>
            <span class="faq-arrow">â–¼</span>
          </div>
          <div class="faq-answer">
            <p><strong>è‘¬å„€å½¢æ…‹ã®å¤‰åŒ–</strong></p>
            <p>ãƒ»<strong>å®¶æ—è‘¬</strong>ï¼šå…¨ä½“ã®ç´„55%ï¼ˆå¢—åŠ ä¸­ï¼‰</p>
            <p>ãƒ»ä¸€èˆ¬è‘¬ï¼šç´„30%ï¼ˆæ¸›å°‘å‚¾å‘ï¼‰</p>
            <p>ãƒ»ç›´è‘¬ãƒ»ç«è‘¬å¼ï¼šç´„15%ï¼ˆå¢—åŠ ä¸­ï¼‰</p>
            <br>
            <p><strong>å®¶æ—è‘¬ãŒå¢—ãˆã‚‹ç†ç”±</strong></p>
            <p>ãƒ»ã‚³ãƒ­ãƒŠç¦ã§å°è¦æ¨¡åŒ–ãŒé€²ã‚“ã </p>
            <p>ãƒ»é«˜é½¢åŒ–ã§å‚åˆ—è€…ãŒæ¸›å°‘</p>
            <p>ãƒ»è²»ç”¨ã‚’æŠ‘ãˆãŸã„ãƒ‹ãƒ¼ã‚º</p>
            <p>ãƒ»ã€Œæ•…äººã®æ„å‘ã€ã¨ã—ã¦é¸ã°ã‚Œã‚‹</p>
            <div class="talk-box">
              <div class="talk-label">ğŸ’¬ å–¶æ¥­ãƒˆãƒ¼ã‚¯ä¾‹</div>
              ã€Œå®¶æ—è‘¬ãŒå¢—ãˆã‚‹ä¸€æ–¹ã§ã€ã€æœ¬å½“ã¯å‚åˆ—ã—ãŸã‹ã£ãŸã€ã¨ã„ã†æ–¹ã‚‚å¤šã„ã‚“ã§ã™ã€‚ç¤¼ã‚·ã‚¹ãƒ†ãƒ ã¯ã€ãã†ã„ã£ãŸæ–¹ã®æ°—æŒã¡ã‚’å±Šã‘ã‚‹æ‰‹æ®µã«ãªã‚Šã¾ã™ã€‚ã€
            </div>
          </div>
        </div>
        <div class="faq-item" onclick="toggleFaq(this)">
          <div class="faq-question">
            <span class="faq-icon">ğŸ’´</span>
            <span>é¦™å…¸ã®ç›¸å ´ã¨å®Ÿæ…‹</span>
            <span class="faq-arrow">â–¼</span>
          </div>
          <div class="faq-answer">
            <p><strong>é¦™å…¸ã®ç›¸å ´</strong></p>
            <p>ãƒ»å‹äººãƒ»çŸ¥äººï¼š5,000ã€œ10,000å††</p>
            <p>ãƒ»ä¼šç¤¾é–¢ä¿‚ï¼š5,000ã€œ10,000å††</p>
            <p>ãƒ»è¦ªæ—ï¼š10,000ã€œ50,000å††</p>
            <p>ãƒ»è¿‘ã„è¦ªæ—ï¼š30,000ã€œ100,000å††</p>
            <br>
            <p><strong>é¦™å…¸è¾é€€ã®å¢—åŠ </strong></p>
            <p>ãƒ»å®¶æ—è‘¬ã§ã¯ç´„40%ãŒé¦™å…¸è¾é€€</p>
            <p>ãƒ»ã€Œæ°—ã‚’é£ã‚ã›ãŸããªã„ã€ã¨ã„ã†éºæ—ã®æ°—æŒã¡</p>
            <p>ãƒ»ã—ã‹ã—ã€Œä½•ã‹ã—ãŸã„ã€ã¨ã„ã†å‚åˆ—ã§ããªã„æ–¹ã‚‚å¤šã„</p>
            <div class="talk-box">
              <div class="talk-label">ğŸ’¬ å–¶æ¥­ãƒˆãƒ¼ã‚¯ä¾‹</div>
              ã€Œé¦™å…¸è¾é€€ãŒå¢—ãˆã¦ã„ã‚‹ä¸€æ–¹ã§ã€ã€ä½•ã‹ã—ãŸã„ã€ã¨ã„ã†å£°ã‚‚å¤šã„ã‚“ã§ã™ã€‚çŒ®æ¯ãªã‚‰ã€éºæ—æ§˜ã®è² æ‹…ã«ãªã‚‰ãªã„å½¢ã§æ°—æŒã¡ã‚’å±Šã‘ã‚‰ã‚Œã¾ã™ã€‚ã€
            </div>
          </div>
        </div>
        <div class="faq-item" onclick="toggleFaq(this)">
          <div class="faq-question">
            <span class="faq-icon">ğŸ¢</span>
            <span>è‘¬å„€ç¤¾ã®èª²é¡Œ</span>
            <span class="faq-arrow">â–¼</span>
          </div>
          <div class="faq-answer">
            <p><strong>è‘¬å„€ç¤¾ãŒæŠ±ãˆã‚‹èª²é¡Œ</strong></p>
            <p>ãƒ»ä¾¡æ ¼ç«¶äº‰ã®æ¿€åŒ–</p>
            <p>ãƒ»å®¶æ—è‘¬å¢—åŠ ã«ã‚ˆã‚‹å˜ä¾¡ã®ä½ä¸‹</p>
            <p>ãƒ»å·®åˆ¥åŒ–ãŒé›£ã—ã„</p>
            <p>ãƒ»äººæ‰‹ä¸è¶³</p>
            <p>ãƒ»ãƒ‡ã‚¸ã‚¿ãƒ«åŒ–ã®é…ã‚Œ</p>
            <br>
            <p><strong>ç¤¼ã§è§£æ±ºã§ãã‚‹ã“ã¨</strong></p>
            <p>ãƒ»é æ–¹å¯¾å¿œã¨ã„ã†ä»˜åŠ ä¾¡å€¤</p>
            <p>ãƒ»éºæ—æº€è¶³åº¦ã®å‘ä¸Š</p>
            <p>ãƒ»ä»–ç¤¾ã¨ã®å·®åˆ¥åŒ–</p>
            <p>ãƒ»è¿½åŠ ã‚³ã‚¹ãƒˆãªã—ã§å°å…¥å¯èƒ½</p>
            <div class="talk-box">
              <div class="talk-label">ğŸ’¬ å–¶æ¥­ãƒˆãƒ¼ã‚¯ä¾‹</div>
              ã€Œè‘¬å„€ç¤¾æ§˜ã®å·®åˆ¥åŒ–ã¯é›£ã—ããªã£ã¦ã„ã¾ã™ã‚ˆã­ã€‚ç¤¼ã‚’å°å…¥ã„ãŸã ãã¨ã€ã€é æ–¹ã®æ–¹ã¸ã®å¯¾å¿œã‚‚ã§ãã‚‹ã€ã¨ã„ã†ä»˜åŠ ä¾¡å€¤ã‚’ã€è¿½åŠ ã‚³ã‚¹ãƒˆãªã—ã§ã”æä¾›ã§ãã¾ã™ã€‚ã€
            </div>
          </div>
        </div>
      </div>

      <!-- åŸºç¤çŸ¥è­˜ -->
      <div class="card">
        <div class="card-header">
          <span class="card-title">ğŸ“š ã‚µãƒ¼ãƒ“ã‚¹åŸºç¤çŸ¥è­˜</span>
        </div>
        <div class="faq-item" onclick="toggleFaq(this)">
          <div class="faq-question">
            <span class="faq-icon">â“</span>
            <span>ã€ŒçŒ®æ¯ã€ã¨ã€Œé¦™å…¸ã€ã®é•ã„ã¯ï¼Ÿ</span>
            <span class="faq-arrow">â–¼</span>
          </div>
          <div class="faq-answer">
            <p><strong>é¦™å…¸ï¼ˆã“ã†ã§ã‚“ï¼‰</strong></p>
            <p>ãƒ»è‘¬å„€ã«å‚åˆ—ã™ã‚‹éš›ã«æŒå‚ã™ã‚‹é‡‘éŠ­</p>
            <p>ãƒ»å°ç­’ã«å…¥ã‚Œã¦ç›´æ¥æ‰‹æ¸¡ã—</p>
            <p>ãƒ»ç¾é‡‘ã®ã¿</p>
            <br>
            <p><strong>çŒ®æ¯ï¼ˆã‘ã‚“ã±ã„ï¼‰</strong></p>
            <p>ãƒ»é æ–¹ãªã©ã§å‚åˆ—ã§ããªã„æ–¹ãŒã‚ªãƒ³ãƒ©ã‚¤ãƒ³ã§é€ã‚‹å¼”æ„</p>
            <p>ãƒ»ã‚¯ãƒ¬ã‚¸ãƒƒãƒˆã‚«ãƒ¼ãƒ‰ã§æ±ºæ¸ˆ</p>
            <p>ãƒ»ã‚¹ãƒãƒ›ã‹ã‚‰24æ™‚é–“ã„ã¤ã§ã‚‚å¯èƒ½</p>
            <p>ãƒ»ãƒ¡ãƒƒã‚»ãƒ¼ã‚¸ã‚‚æ·»ãˆã‚‰ã‚Œã‚‹</p>
            <div class="talk-box">
              <div class="talk-label">ğŸ’¬ å–¶æ¥­ãƒˆãƒ¼ã‚¯ä¾‹</div>
              ã€Œé¦™å…¸ã¯å‚åˆ—ã•ã‚Œã‚‹æ–¹ã‹ã‚‰ã„ãŸã ãã¾ã™ãŒã€é æ–¹ã§ã©ã†ã—ã¦ã‚‚æ¥ã‚‰ã‚Œãªã„æ–¹ã‚‚ã„ã‚‰ã£ã—ã‚ƒã„ã¾ã™ã‚ˆã­ã€‚ãã†ã„ã£ãŸæ–¹ãŒ"æ°—æŒã¡ã ã‘ã§ã‚‚å±Šã‘ãŸã„"ã¨ã„ã†æ™‚ã«ä½¿ãˆã‚‹ã®ãŒã€çŒ®æ¯ã€ã§ã™ã€‚é¦™å…¸ã®ã‚ªãƒ³ãƒ©ã‚¤ãƒ³ç‰ˆã¨ãŠè€ƒãˆãã ã•ã„ã€‚ã€
            </div>
          </div>
        </div>
        <div class="faq-item" onclick="toggleFaq(this)">
          <div class="faq-question">
            <span class="faq-icon">ğŸ’°</span>
            <span>è²»ç”¨ã¨æ”¯æ‰•ã„æ–¹æ³•ã¯ï¼Ÿ</span>
            <span class="faq-arrow">â–¼</span>
          </div>
          <div class="faq-answer">
            <p><strong>åˆæœŸè²»ç”¨</strong></p>
            <p>ãƒ»å°å…¥è²»ç”¨ï¼š<strong>500ä¸‡å††</strong></p>
            <br>
            <p><strong>ğŸ‰ ITè£œåŠ©é‡‘ã§æœ€å¤§2/3è£œåŠ©ï¼</strong></p>
            <p>ãƒ»ITå°å…¥è£œåŠ©é‡‘ã‚’æ´»ç”¨ã§æœ€å¤§ç´„333ä¸‡å††è£œåŠ©</p>
            <p>ãƒ»å®Ÿè³ªè² æ‹…ï¼šç´„167ä¸‡å††ã€œ</p>
            <p>ãƒ»è£œåŠ©é‡‘ç”³è«‹ã‚‚ã‚µãƒãƒ¼ãƒˆã—ã¾ã™</p>
            <br>
            <p><strong>æ‰‹æ•°æ–™</strong></p>
            <p>ãƒ»çŒ®æ¯1ä»¶ã«ã¤ã <strong>11.6%</strong></p>
            <p>ã€€- Stripeæ±ºæ¸ˆæ‰‹æ•°æ–™: 3.6%</p>
            <p>ã€€- ã‚·ã‚¹ãƒ†ãƒ åˆ©ç”¨æ–™: 8%</p>
            <p>ãƒ»éºæ—ã¸ã®æ”¯æ‰•ã„: <strong>88.4%</strong></p>
            <br>
            <p><strong>å…·ä½“ä¾‹</strong></p>
            <p>ãƒ»10,000å††ã®çŒ®æ¯ â†’ éºæ—ã«8,840å††</p>
            <p>ãƒ»30,000å††ã®çŒ®æ¯ â†’ éºæ—ã«26,520å††</p>
            <br>
            <p><strong>è«‹æ±‚ãƒ»æ”¯æ‰•ã„æ–¹æ³•</strong></p>
            <p>ãƒ»<strong>æœˆæœ«ç· ã‚</strong>ã§é›†è¨ˆ</p>
            <p>ãƒ»ç¿Œæœˆã«è«‹æ±‚æ›¸ã‚’ç™ºè¡Œ</p>
            <p>ãƒ»è‘¬å„€ç¤¾æ§˜ã‹ã‚‰å¼Šç¤¾ã¸ãŠæ”¯æ‰•ã„</p>
            <div class="talk-box">
              <div class="talk-label">ğŸ’¬ å–¶æ¥­ãƒˆãƒ¼ã‚¯ä¾‹</div>
              ã€ŒåˆæœŸè²»ç”¨ã¯500ä¸‡å††ã§ã™ãŒã€ITè£œåŠ©é‡‘ã‚’ä½¿ãˆã°æœ€å¤§2/3ã€ç´„333ä¸‡å††ã®è£œåŠ©ãŒå‡ºã¾ã™ã€‚å®Ÿè³ª167ä¸‡å††ç¨‹åº¦ã§ã”å°å…¥ã„ãŸã ã‘ã¾ã™ã€‚è£œåŠ©é‡‘ç”³è«‹ã®ã‚µãƒãƒ¼ãƒˆã‚‚ã—ã¦ã„ã¾ã™ã®ã§ã€ã”å®‰å¿ƒãã ã•ã„ã€‚ã€
            </div>
          </div>
        </div>
      </div>

      <!-- ã‚»ã‚­ãƒ¥ãƒªãƒ†ã‚£ -->
      <div class="card">
        <div class="card-header">
          <span class="card-title">ğŸ”’ ã‚»ã‚­ãƒ¥ãƒªãƒ†ã‚£</span>
        </div>
        <div class="faq-item" onclick="toggleFaq(this)">
          <div class="faq-question">
            <span class="faq-icon">ğŸ›¡ï¸</span>
            <span>ã‚¯ãƒ¬ã‚¸ãƒƒãƒˆã‚«ãƒ¼ãƒ‰æ±ºæ¸ˆã¯å®‰å…¨ï¼Ÿ</span>
            <span class="faq-arrow">â–¼</span>
          </div>
          <div class="faq-answer">
            <p><strong>Stripeã‚’ä½¿ç”¨</strong></p>
            <p>ãƒ»ä¸–ç•Œæœ€å¤§ç´šã®æ±ºæ¸ˆãƒ—ãƒ©ãƒƒãƒˆãƒ•ã‚©ãƒ¼ãƒ </p>
            <p>ãƒ»Amazonã€Googleã€Shopifyãªã©ã‚‚æ¡ç”¨</p>
            <p>ãƒ»PCI DSS Level 1èªè¨¼å–å¾—ï¼ˆæœ€é«˜ãƒ¬ãƒ™ãƒ«ï¼‰</p>
            <br>
            <p><strong>ã‚»ã‚­ãƒ¥ãƒªãƒ†ã‚£å¯¾ç­–</strong></p>
            <p>ãƒ»ã‚«ãƒ¼ãƒ‰æƒ…å ±ã¯å¼Šç¤¾ã‚µãƒ¼ãƒãƒ¼ã‚’é€šéã—ãªã„</p>
            <p>ãƒ»SSL/TLSæš—å·åŒ–é€šä¿¡</p>
            <p>ãƒ»ä¸æ­£åˆ©ç”¨æ¤œçŸ¥ã‚·ã‚¹ãƒ†ãƒ </p>
            <div class="talk-box">
              <div class="talk-label">ğŸ’¬ å–¶æ¥­ãƒˆãƒ¼ã‚¯ä¾‹</div>
              ã€Œæ±ºæ¸ˆã¯Stripeã¨ã„ã†ä¸–ç•Œæœ€å¤§ã®æ±ºæ¸ˆä¼šç¤¾ã‚’ä½¿ã£ã¦ã„ã¾ã™ã€‚Amazonã‚„Googleã‚‚ä½¿ã£ã¦ã„ã‚‹ã‚µãƒ¼ãƒ“ã‚¹ã§ã€ã‚«ãƒ¼ãƒ‰æƒ…å ±ã¯ç§ãŸã¡ã®ã‚µãƒ¼ãƒãƒ¼ã«ã¯ä¸€åˆ‡æ®‹ã‚Šã¾ã›ã‚“ã€‚ã€
            </div>
          </div>
        </div>
      </div>

      <!-- å–¶æ¥­ã‚¢ãƒ—ãƒ­ãƒ¼ãƒ -->
      <div class="card">
        <div class="card-header">
          <span class="card-title">ğŸ¯ å–¶æ¥­ã‚¢ãƒ—ãƒ­ãƒ¼ãƒ</span>
        </div>
        <div class="faq-item" onclick="toggleFaq(this)">
          <div class="faq-question">
            <span class="faq-icon">ğŸš€</span>
            <span>æœ€åˆã®ã‚¢ãƒ—ãƒ­ãƒ¼ãƒæ–¹æ³•</span>
            <span class="faq-arrow">â–¼</span>
          </div>
          <div class="faq-answer">
            <p><strong>ã‚¹ãƒ†ãƒƒãƒ—1: ã‚¢ã‚¤ã‚¹ãƒ–ãƒ¬ã‚¤ã‚¯</strong></p>
            <div class="talk-box">
              <div class="talk-label">ğŸ’¬ å–¶æ¥­ãƒˆãƒ¼ã‚¯ä¾‹</div>
              ã€ŒãŠå¿™ã—ã„ã¨ã“ã‚å¤±ç¤¼ã„ãŸã—ã¾ã™ã€‚é æ–¹ã®æ–¹ã¸ã®å¯¾å¿œã«ã¤ã„ã¦ãŠä¼ºã„ã—ãŸãã¦ãŠé‚ªé­”ã—ã¾ã—ãŸã€‚ã€
            </div>
            <br>
            <p><strong>ã‚¹ãƒ†ãƒƒãƒ—2: èª²é¡Œã®ç¢ºèª</strong></p>
            <div class="talk-box">
              <div class="talk-label">ğŸ’¬ å–¶æ¥­ãƒˆãƒ¼ã‚¯ä¾‹</div>
              ã€Œæœ€è¿‘ã€é æ–¹ã‹ã‚‰ã®å‚åˆ—ãŒé›£ã—ã„ã¨ã„ã†å£°ã¯å¢—ãˆã¦ã„ã¾ã™ã‹ï¼Ÿã€<br><br>
              ã€Œã‚³ãƒ­ãƒŠä»¥é™ã€å®¶æ—è‘¬ãŒå¢—ãˆã¦ã€é¦™å…¸ã‚’æ¸¡ã›ãªã‹ã£ãŸæ–¹ã‹ã‚‰ã®å•ã„åˆã‚ã›ã¯ã‚ã‚Šã¾ã›ã‚“ã‹ï¼Ÿã€
            </div>
            <br>
            <p><strong>ã‚¹ãƒ†ãƒƒãƒ—3: è§£æ±ºç­–ã®æç¤º</strong></p>
            <div class="talk-box">
              <div class="talk-label">ğŸ’¬ å–¶æ¥­ãƒˆãƒ¼ã‚¯ä¾‹</div>
              ã€Œå®Ÿã¯ã€ãã†ã„ã£ãŸæ–¹å‘ã‘ã«"ã‚ªãƒ³ãƒ©ã‚¤ãƒ³ã§é¦™å…¸ã‚’é€ã‚Œã‚‹"ã‚µãƒ¼ãƒ“ã‚¹ãŒã‚ã‚‹ã‚“ã§ã™ã€‚éºæ—æ§˜ã«ã¨ã£ã¦ã‚‚ã€å‚åˆ—ã§ããªã„æ–¹ã‹ã‚‰ã®ãŠæ°—æŒã¡ã‚’å—ã‘å–ã‚Œã‚‹ãƒ¡ãƒªãƒƒãƒˆãŒã‚ã‚Šã¾ã™ã€‚ã€
            </div>
          </div>
        </div>
        <div class="faq-item" onclick="toggleFaq(this)">
          <div class="faq-question">
            <span class="faq-icon">ğŸ¤”</span>
            <span>ã‚ˆãã‚ã‚‹åè«–ã¸ã®å¯¾å¿œ</span>
            <span class="faq-arrow">â–¼</span>
          </div>
          <div class="faq-answer">
            <p><strong>ã€Œã†ã¡ã¯å¿…è¦ãªã„ã€</strong></p>
            <div class="talk-box">
              <div class="talk-label">ğŸ’¬ å¯¾å¿œä¾‹</div>
              ã€ŒãŠã£ã—ã‚ƒã‚‹é€šã‚Šã€å…¨ã¦ã®è‘¬å„€ã§ä½¿ã‚ã‚Œã‚‹ã‚ã‘ã§ã¯ã‚ã‚Šã¾ã›ã‚“ã€‚ãŸã ã€ã„ã–"é æ–¹ã®æ–¹ãŒå‚åˆ—ã§ããªã„"ã¨ãªã£ãŸæ™‚ã«ã€ã”æ¡ˆå†…ã§ãã‚‹é¸æŠè‚¢ãŒã‚ã‚‹ã¨éºæ—æ§˜ã«å–œã°ã‚Œã¾ã™ã€‚å°å…¥ã‚³ã‚¹ãƒˆã‚¼ãƒ­ãªã®ã§ã€é¸æŠè‚¢ã¨ã—ã¦æŒã£ã¦ãŠãã ã‘ã§ã‚‚ä¾¡å€¤ãŒã‚ã‚Šã¾ã™ã€‚ã€
            </div>
            <br>
            <p><strong>ã€Œé«˜é½¢è€…ã¯ãƒãƒƒãƒˆã‚’ä½¿ãˆãªã„ã€</strong></p>
            <div class="talk-box">
              <div class="talk-label">ğŸ’¬ å¯¾å¿œä¾‹</div>
              ã€ŒçŒ®æ¯ã‚’é€ã‚‹ã®ã¯å‚åˆ—ã§ããªã„æ–¹ã€ã¤ã¾ã‚Šé æ–¹ã®è¦ªæˆšã‚„å‹äººã§ã™ã€‚æ¯”è¼ƒçš„è‹¥ã„ä¸–ä»£ã‚‚å¤šã„ã§ã™ã—ã€ãŠå­ã•ã‚“ã‚„ãŠå­«ã•ã‚“ãŒä»£ã‚ã‚Šã«æ“ä½œã•ã‚Œã‚‹ã‚±ãƒ¼ã‚¹ã‚‚å¤šã„ã§ã™ã€‚ã€
            </div>
            <br>
            <p><strong>ã€Œè²»ç”¨ãŒé«˜ã„ã€ã€Œ500ä¸‡ã¯å‡ºã›ãªã„ã€</strong></p>
            <div class="talk-box">
              <div class="talk-label">ğŸ’¬ å¯¾å¿œä¾‹</div>
              ã€ŒãŠã£ã—ã‚ƒã‚‹é€šã‚Šã€500ä¸‡å††ã¯å¤§ããªé‡‘é¡ã§ã™ã‚ˆã­ã€‚ãŸã ã€ITè£œåŠ©é‡‘ã‚’ä½¿ãˆã°æœ€å¤§2/3ã€ç´„333ä¸‡å††ã®è£œåŠ©ãŒå‡ºã¾ã™ã€‚å®Ÿè³ª167ä¸‡å††ç¨‹åº¦ã§ã”å°å…¥ã„ãŸã ã‘ã¾ã™ã€‚è£œåŠ©é‡‘ã®ç”³è«‹ã‚µãƒãƒ¼ãƒˆã‚‚è¡Œã£ã¦ã„ã¾ã™ã®ã§ã€ãœã²ã”æ¤œè¨ãã ã•ã„ã€‚ã€
            </div>
            <br>
            <p><strong>ã€Œæ¤œè¨ã—ã¾ã™ã€</strong></p>
            <div class="talk-box">
              <div class="talk-label">ğŸ’¬ å¯¾å¿œä¾‹</div>
              ã€Œã‚ã‚ŠãŒã¨ã†ã”ã–ã„ã¾ã™ã€‚ã¡ãªã¿ã«ã€ã”æ¤œè¨ã„ãŸã ãä¸Šã§æ°—ã«ãªã‚‹ç‚¹ã‚„ã€è¿½åŠ ã§çŸ¥ã‚ŠãŸã„æƒ…å ±ã¯ã‚ã‚Šã¾ã™ã‹ï¼Ÿã€<br><br>
              â†’å…·ä½“çš„ãªæ‡¸å¿µã‚’å¼•ãå‡ºã—ã¦ãã®å ´ã§è§£æ¶ˆã™ã‚‹
            </div>
          </div>
        </div>
      </div>

      <!-- ã‚¯ãƒ­ãƒ¼ã‚¸ãƒ³ã‚°ãƒ†ã‚¯ãƒ‹ãƒƒã‚¯ -->
      <div class="card">
        <div class="card-header">
          <span class="card-title">ğŸ ã‚¯ãƒ­ãƒ¼ã‚¸ãƒ³ã‚°ãƒ†ã‚¯ãƒ‹ãƒƒã‚¯</span>
        </div>
        <div class="faq-item" onclick="toggleFaq(this)">
          <div class="faq-question">
            <span class="faq-icon">âœ…</span>
            <span>ã‚¯ãƒ­ãƒ¼ã‚¸ãƒ³ã‚°ã®åŸºæœ¬</span>
            <span class="faq-arrow">â–¼</span>
          </div>
          <div class="faq-answer">
            <p><strong>ã‚¯ãƒ­ãƒ¼ã‚¸ãƒ³ã‚°ã®3åŸå‰‡</strong></p>
            <p>1ï¸âƒ£ <strong>é¸æŠè‚¢ã‚’ä¸ãˆã‚‹</strong>ï¼šYes/Noã§ã¯ãªãã€Aã‹Bã‹ã§èã</p>
            <p>2ï¸âƒ£ <strong>å°ã•ãªYesã‚’ç©ã¿é‡ã­ã‚‹</strong>ï¼šæ®µéšçš„ã«åˆæ„ã‚’å¾—ã‚‹</p>
            <p>3ï¸âƒ£ <strong>è¡Œå‹•ã‚’å…·ä½“åŒ–ã™ã‚‹</strong>ï¼šã€Œã„ã¤ã€ã€Œèª°ãŒã€ã€Œä½•ã‚’ã€ã‚’æ˜ç¢ºã«</p>
            <br>
            <p><strong>ã‚¿ã‚¤ãƒŸãƒ³ã‚°ã®è¦‹æ¥µã‚</strong></p>
            <p>ãƒ»è³ªå•ãŒå…·ä½“çš„ã«ãªã£ã¦ããŸ</p>
            <p>ãƒ»ã€Œã†ã¡ã®å ´åˆã¯â€¦ã€ã¨è‡ªç¤¾ã«å½“ã¦ã¯ã‚å§‹ã‚ãŸ</p>
            <p>ãƒ»æ–™é‡‘ã‚„æ‰‹ç¶šãã«ã¤ã„ã¦èã„ã¦ããŸ</p>
            <p>ãƒ»ã†ãªãšãã‚„ç›¸ã¥ã¡ãŒå¢—ãˆãŸ</p>
          </div>
        </div>
        <div class="faq-item" onclick="toggleFaq(this)">
          <div class="faq-question">
            <span class="faq-icon">ğŸ’¬</span>
            <span>ã‚¯ãƒ­ãƒ¼ã‚¸ãƒ³ã‚°ãƒˆãƒ¼ã‚¯é›†</span>
            <span class="faq-arrow">â–¼</span>
          </div>
          <div class="faq-answer">
            <p><strong>ãƒ†ã‚¹ãƒˆã‚¯ãƒ­ãƒ¼ã‚¸ãƒ³ã‚°</strong></p>
            <div class="talk-box">
              <div class="talk-label">ğŸ’¬ ãƒˆãƒ¼ã‚¯ä¾‹</div>
              ã€Œã‚‚ã—å°å…¥ã•ã‚Œã‚‹ã¨ã—ãŸã‚‰ã€ã©ãªãŸãŒã”æ‹…å½“ã•ã‚Œã¾ã™ã‹ï¼Ÿã€<br><br>
              ã€Œå®Ÿéš›ã«ä½¿ã†å ´é¢ã‚’ã‚¤ãƒ¡ãƒ¼ã‚¸ã™ã‚‹ã¨ã€ã©ã‚“ãªè‘¬å„€ã§ä½¿ãˆãã†ã§ã™ã‹ï¼Ÿã€
            </div>
            <br>
            <p><strong>é¸æŠå¼ã‚¯ãƒ­ãƒ¼ã‚¸ãƒ³ã‚°</strong></p>
            <div class="talk-box">
              <div class="talk-label">ğŸ’¬ ãƒˆãƒ¼ã‚¯ä¾‹</div>
              ã€Œå°å…¥ã®ã”èª¬æ˜ã¯ã€ä»Šé€±ã¨æ¥é€±ã©ã¡ã‚‰ãŒã”éƒ½åˆã‚ˆã‚ã—ã„ã§ã™ã‹ï¼Ÿã€<br><br>
              ã€Œã¾ãšã¯1ä»¶è©¦ã—ã¦ã¿ã‚‹ã‹ã€è³‡æ–™ã‚’ãŠæ¸¡ã—ã—ã¦å¾Œæ—¥ã”æ¤œè¨ã„ãŸã ãã‹ã€ã©ã¡ã‚‰ãŒã‚ˆã‚ã—ã„ã§ã™ã‹ï¼Ÿã€
            </div>
            <br>
            <p><strong>æœŸé™ã‚’è¨­ã‘ã‚‹ã‚¯ãƒ­ãƒ¼ã‚¸ãƒ³ã‚°</strong></p>
            <div class="talk-box">
              <div class="talk-label">ğŸ’¬ ãƒˆãƒ¼ã‚¯ä¾‹</div>
              ã€Œä»Šæœˆä¸­ã«ãŠç”³ã—è¾¼ã¿ã„ãŸã ã‘ã‚Œã°ã€å°å…¥ã‚µãƒãƒ¼ãƒˆã‚’å„ªå…ˆçš„ã«ã”å¯¾å¿œã§ãã¾ã™ã€‚ã€
            </div>
            <br>
            <p><strong>ãƒªã‚¹ã‚¯ã‚¼ãƒ­è¨´æ±‚</strong></p>
            <div class="talk-box">
              <div class="talk-label">ğŸ’¬ ãƒˆãƒ¼ã‚¯ä¾‹</div>
              ã€ŒåˆæœŸè²»ç”¨ã‚‚æœˆé¡è²»ç”¨ã‚‚ã‹ã‹ã‚Šã¾ã›ã‚“ã€‚ã¾ãšã¯ç™»éŒ²ã ã‘ã—ã¦ãŠã„ã¦ã€å®Ÿéš›ã«ä½¿ãˆãã†ãªæ¡ˆä»¶ãŒæ¥ãŸã‚‰ä½¿ã†ã€ã¨ã„ã†å½¢ã§ã„ã‹ãŒã§ã—ã‚‡ã†ã‹ï¼Ÿã€
            </div>
          </div>
        </div>
        <div class="faq-item" onclick="toggleFaq(this)">
          <div class="faq-question">
            <span class="faq-icon">ğŸ¯</span>
            <span>æˆç´„ã¾ã§ã®æµã‚Œ</span>
            <span class="faq-arrow">â–¼</span>
          </div>
          <div class="faq-answer">
            <p><strong>ç†æƒ³çš„ãªå•†è«‡ã®æµã‚Œ</strong></p>
            <p>1ï¸âƒ£ ä¿¡é ¼é–¢ä¿‚æ§‹ç¯‰ï¼ˆã‚¢ã‚¤ã‚¹ãƒ–ãƒ¬ã‚¤ã‚¯ï¼‰ï¼š2åˆ†</p>
            <p>2ï¸âƒ£ èª²é¡Œã®ãƒ’ã‚¢ãƒªãƒ³ã‚°ï¼š5åˆ†</p>
            <p>3ï¸âƒ£ ã‚µãƒ¼ãƒ“ã‚¹èª¬æ˜ï¼š5åˆ†</p>
            <p>4ï¸âƒ£ è³ªç–‘å¿œç­”ãƒ»åè«–å‡¦ç†ï¼š5åˆ†</p>
            <p>5ï¸âƒ£ ã‚¯ãƒ­ãƒ¼ã‚¸ãƒ³ã‚°ï¼š3åˆ†</p>
            <br>
            <p><strong>æ¬¡ã®ã‚¢ã‚¯ã‚·ãƒ§ãƒ³ã‚’å¿…ãšæ±ºã‚ã‚‹</strong></p>
            <p>ãƒ»å°å…¥æ±ºå®š â†’ ãã®å ´ã§ç™»éŒ²ã‚µãƒãƒ¼ãƒˆ</p>
            <p>ãƒ»æ¤œè¨ä¸­ â†’ æ¬¡å›è¨ªå•æ—¥ã‚’æ±ºã‚ã‚‹</p>
            <p>ãƒ»è¦‹é€ã‚Š â†’ ç†ç”±ã‚’èã„ã¦è¨˜éŒ²ã€3ãƒ¶æœˆå¾Œã«å†ã‚¢ãƒ—ãƒ­ãƒ¼ãƒ</p>
            <div class="talk-box">
              <div class="talk-label">ğŸ’¬ ãƒˆãƒ¼ã‚¯ä¾‹ï¼ˆæ¬¡å›ã«ã¤ãªã’ã‚‹ï¼‰</div>
              ã€Œæœ¬æ—¥ã¯ãŠæ™‚é–“ã„ãŸã ãã‚ã‚ŠãŒã¨ã†ã”ã–ã„ã¾ã—ãŸã€‚æ¥é€±ã®æ°´æ›œæ—¥ã«æ”¹ã‚ã¦ãŠä¼ºã„ã—ã¦ã‚‚ã‚ˆã‚ã—ã„ã§ã—ã‚‡ã†ã‹ï¼Ÿãã®éš›ã«ã€å®Ÿéš›ã®æ“ä½œç”»é¢ã‚’ãŠè¦‹ã›ã§ãã‚Œã°ã¨æ€ã„ã¾ã™ã€‚ã€
            </div>
          </div>
        </div>
        <div class="faq-item" onclick="toggleFaq(this)">
          <div class="faq-question">
            <span class="faq-icon">ğŸš«</span>
            <span>NGãªã‚¯ãƒ­ãƒ¼ã‚¸ãƒ³ã‚°</span>
            <span class="faq-arrow">â–¼</span>
          </div>
          <div class="faq-answer">
            <p><strong>ã‚„ã£ã¦ã¯ã„ã‘ãªã„ã“ã¨</strong></p>
            <p>âŒ æŠ¼ã—å£²ã‚Šæ„Ÿã‚’å‡ºã™</p>
            <p>â†’ã€Œä»Šæ—¥æ±ºã‚ã¦ãã ã•ã„ã€ã¨è¿«ã‚‹</p>
            <br>
            <p>âŒ æ›–æ˜§ãªã¾ã¾çµ‚ã‚ã‚‹</p>
            <p>â†’ã€Œã¾ãŸæ¥ã¾ã™ã€ã§æ¬¡ã®ã‚¢ã‚¯ã‚·ãƒ§ãƒ³ãŒä¸æ˜ç¢º</p>
            <br>
            <p>âŒ å˜˜ã‚„èª‡å¼µ</p>
            <p>â†’ã€Œã¿ã‚“ãªä½¿ã£ã¦ã¾ã™ã€ã€Œçµ¶å¯¾ã«ä¾¿åˆ©ã§ã™ã€</p>
            <br>
            <p>âŒ ç«¶åˆã®æ‚ªå£</p>
            <p>â†’ã€ŒAç¤¾ã¯å¯¾å¿œãŒæ‚ªã„ã§ã™ã‚ˆã€</p>
            <br>
            <p><strong>ä»£ã‚ã‚Šã«ã‚„ã‚‹ã“ã¨</strong></p>
            <p>â­• ç›¸æ‰‹ã®ãƒšãƒ¼ã‚¹ã‚’å°Šé‡ã—ã¤ã¤ã€å…·ä½“çš„ãªæ¬¡ã®ã‚¹ãƒ†ãƒƒãƒ—ã‚’ææ¡ˆ</p>
            <p>â­• äº‹å®Ÿãƒ™ãƒ¼ã‚¹ã§ç¤¼ã®ãƒ¡ãƒªãƒƒãƒˆã‚’ä¼ãˆã‚‹</p>
            <p>â­• ã€ŒãŠè©¦ã—ã€ã€Œãƒªã‚¹ã‚¯ã‚¼ãƒ­ã€ã‚’å¼·èª¿ã™ã‚‹</p>
          </div>
        </div>
      </div>

      <!-- é¢ä¼šå•†è«‡ãƒ»å®Œå…¨ãƒãƒ‹ãƒ¥ã‚¢ãƒ«ï¼ˆæ–°è¦è¿½åŠ ï¼‰ -->
      <div class="card">
        <div class="card-header" style="background:linear-gradient(135deg, #667eea, #764ba2); color:white;">
          <span class="card-title">ğŸ¯ é¢ä¼šå•†è«‡ãƒ»å®Œå…¨ãƒãƒ‹ãƒ¥ã‚¢ãƒ«</span>
        </div>
        <div class="faq-item" onclick="toggleFaq(this)">
          <div class="faq-question">
            <span class="faq-icon">â±ï¸</span>
            <span>å•†è«‡ã®å…¨ä½“åƒï¼ˆ30åˆ†ï¼‰</span>
            <span class="faq-arrow">â–¼</span>
          </div>
          <div class="faq-answer">
            <p><strong>ã‚¿ã‚¤ãƒ ã‚¹ã‚±ã‚¸ãƒ¥ãƒ¼ãƒ«</strong></p>
            <p>0ã€œ3åˆ† â†’ ã‚¢ã‚¤ã‚¹ãƒ–ãƒ¬ã‚¤ã‚¯</p>
            <p>3ã€œ5åˆ† â†’ å‰æåˆã‚ã›</p>
            <p>5ã€œ10åˆ† â†’ åˆ©ç”¨ã‚¤ãƒ¡ãƒ¼ã‚¸</p>
            <p>10ã€œ13åˆ† â†’ åˆ¤æ–­è»¸</p>
            <p>13ã€œ17åˆ† â†’ æ‰‹é–“ã®æ•°å€¤åŒ–</p>
            <p>17ã€œ20åˆ† â†’ æ±ºè£æ§‹é€ ãƒ»æ™‚æœŸ</p>
            <p>20ã€œ22åˆ† â†’ NOç†ç”±ã®äº‹å‰å›å</p>
            <p>22ã€œ25åˆ† â†’ ä¾¡æ ¼æç¤ºï¼ˆ500ä¸‡ï¼‰</p>
            <p>25ã€œ28åˆ† â†’ æœ€çµ‚ã‚¯ãƒ­ãƒ¼ã‚¸ãƒ³ã‚°</p>
            <p>28ã€œ30åˆ† â†’ æ¬¡ã‚¢ã‚¯ã‚·ãƒ§ãƒ³ç¢ºå®š</p>
            <div style="background:#fff3cd; padding:0.75rem; border-radius:8px; margin-top:1rem;">
              <strong>ğŸ“Œ ãƒã‚¤ãƒ³ãƒˆ</strong><br>
              ãƒ»ã†ã¾ãè©±ã•ãªãã¦ã„ã„<br>
              ãƒ»å£²ã‚‰ãªãã¦ã„ã„<br>
              ãƒ»<strong>è³ªå•ã®é †ç•ªã ã‘å®ˆã‚‹</strong>
            </div>
          </div>
        </div>
        <div class="faq-item" onclick="toggleFaq(this)">
          <div class="faq-question">
            <span class="faq-icon">ğŸ§Š</span>
            <span>0ã€œ3åˆ†ï½œã‚¢ã‚¤ã‚¹ãƒ–ãƒ¬ã‚¤ã‚¯</span>
            <span class="faq-arrow">â–¼</span>
          </div>
          <div class="faq-answer">
            <p><strong>ğŸ¯ ç›®çš„</strong></p>
            <p>ãƒ»ç·Šå¼µã‚’ä¸‹ã’ã‚‹</p>
            <p>ãƒ»ã€Œå£²ã‚‰ã‚Œã«æ¥ãŸã€è­¦æˆ’å¿ƒã‚’å¤–ã™</p>
            <br>
            <p><strong>âŒ NGãƒ‘ã‚¿ãƒ¼ãƒ³</strong></p>
            <p>ãƒ»å¤©æ°—ã®è©±ã ã‘</p>
            <p>ãƒ»ã€Œæœ¬æ—¥ã¯ãŠå¿™ã—ã„ä¸­ã€œã€ã§çµ‚ã‚ã‚‹</p>
            <p>ãƒ»è‡ªåˆ†ã®è©±ã‚’å§‹ã‚ã‚‹</p>
            <br>
            <p><strong>â­• æ­£è§£ãƒ‘ã‚¿ãƒ¼ãƒ³</strong></p>
            <div class="talk-box">
              <div class="talk-label">ãƒ‘ã‚¿ãƒ¼ãƒ³â‘ ï¼šæ¥­ç•Œã«å¯„ã›ã‚‹ï¼ˆæœ€å„ªå…ˆï¼‰</div>
              ã€Œä»Šæ—¥ã¯ã‚ã‚ŠãŒã¨ã†ã”ã–ã„ã¾ã™ã€‚æœ€è¿‘ã€è‘¬å„€ã®å½¢ã‚‚ã‹ãªã‚Šå¤‰ã‚ã£ã¦ãã¦ã¾ã™ã‚ˆã­ã€‚ã€<br>
              â†’ ç›¸æ‰‹ï¼šã€Œãã†ã§ã™ã­ã€å®¶æ—è‘¬ãŒå¢—ãˆã¾ã—ãŸã­ã€<br>
              ğŸ‘‰ YESãŒå‡ºãŸã‚‰æˆåŠŸ
            </div>
            <div class="talk-box">
              <div class="talk-label">ãƒ‘ã‚¿ãƒ¼ãƒ³â‘¡ï¼šäº‹å‰ã‚¢ãƒã«è§¦ã‚Œã‚‹ï¼ˆå®‰å…¨ï¼‰</div>
              ã€Œä»Šå›ã€äº‹å‰ã«æ¦‚è¦ã‚’ã”è¦§ã„ãŸã ã„ãŸä¸Šã§ãŠæ™‚é–“ã„ãŸã ã„ãŸã¨èã„ã¦ã„ã¾ã™ã€‚ã‚ã‚ŠãŒã¨ã†ã”ã–ã„ã¾ã™ã€‚ã€<br>
              ğŸ‘‰ "è©±ã‚’èãæ°—ãŒã‚ã‚‹äºº"æ‰±ã„ã«ãªã‚‹
            </div>
            <div class="talk-box">
              <div class="talk-label">ãƒ‘ã‚¿ãƒ¼ãƒ³â‘¢ï¼šå ´æ‰€ãƒã‚¿ï¼ˆå¯¾é¢æ™‚ï¼‰</div>
              ã€Œã“ã¡ã‚‰ã€åˆã‚ã¦æ¥ãŸã‚“ã§ã™ãŒã€ã“ã®è¾ºã‚Šã¯ã‚ˆãè‘¬å„€ã•ã‚Œã‚‹åœ°åŸŸãªã‚“ã§ã™ã‹ï¼Ÿã€<br>
              ğŸ‘‰ åœ°åŸŸå¯†ç€æ„ŸãŒå‡ºã‚‹
            </div>
          </div>
        </div>
        <div class="faq-item" onclick="toggleFaq(this)">
          <div class="faq-question">
            <span class="faq-icon">ğŸ§­</span>
            <span>3ã€œ5åˆ†ï½œå‰æåˆã‚ã›ï¼ˆä¸»å°æ¨©ã‚’å–ã‚‹ï¼‰</span>
            <span class="faq-arrow">â–¼</span>
          </div>
          <div class="faq-answer">
            <p><strong>ğŸ¯ ç›®çš„</strong></p>
            <p>ãƒ»å•†è«‡ã®"ç©ºæ°—"ã‚’æ±ºã‚ã‚‹</p>
            <p>ãƒ»å£²ã‚Šè¾¼ã¿æ„Ÿã‚’æ¶ˆã™</p>
            <div class="talk-box">
              <div class="talk-label">ğŸ’¬ ä¸¸èª­ã¿å°æœ¬</div>
              ã€Œä»Šæ—¥ã¯ã€å¾¡ç¤¾ã«ã“ã®ä»•çµ„ã¿ãŒåˆã†ã‹ã©ã†ã‹ã‚’ä¸€ç·’ã«åˆ¤æ–­ã™ã‚‹æ™‚é–“ã«ã§ãã‚Œã°ã¨æ€ã£ã¦ã„ã¾ã™ã€‚ã€<br><br>
              ã€Œ30åˆ†ã»ã©ã§å¤§ä¸ˆå¤«ã§ã—ã‚‡ã†ã‹ï¼Ÿã€
            </div>
            <p style="margin-top:1rem;"><strong>âœ… æˆåŠŸåˆ¤å®š</strong></p>
            <p>ç›¸æ‰‹ãŒã€Œã¯ã„ã€ã¨è¨€ã† â†’ ä¸»å°æ¨©ã¯å–¶æ¥­å´ã¸</p>
          </div>
        </div>
        <div class="faq-item" onclick="toggleFaq(this)">
          <div class="faq-question">
            <span class="faq-icon">ğŸ–¼ï¸</span>
            <span>5ã€œ10åˆ†ï½œåˆ©ç”¨ã‚¤ãƒ¡ãƒ¼ã‚¸ï¼ˆè‡ªåˆ†ã”ã¨åŒ–ï¼‰</span>
            <span class="faq-arrow">â–¼</span>
          </div>
          <div class="faq-answer">
            <p><strong>ğŸ¯ ç›®çš„</strong></p>
            <p>æŠ½è±¡ â†’ å…·ä½“ã¸</p>
            <div class="talk-box">
              <div class="talk-label">ğŸ’¬ è³ªå•â‘ </div>
              ã€Œå¾¡ç¤¾ã§ä½¿ã†ã¨ã—ãŸã‚‰ã€ã©ã‚“ãªè‘¬å„€ã‚’æƒ³å®šã•ã‚Œã¾ã™ã‹ï¼Ÿã€
            </div>
            <p><strong>æƒ³å®šè¿”ç­”</strong></p>
            <p>ãƒ»ã€Œå®¶æ—è‘¬ã€</p>
            <p>ãƒ»ã€ŒçœŒå¤–ã®è¦ªæˆšãŒå¤šã„æ™‚ã€</p>
            <br>
            <p><strong>å‡ºã¦ã“ãªã‹ã£ãŸå ´åˆ</strong></p>
            <div class="talk-box">
              <div class="talk-label">ğŸ’¬ åˆ†å²ãƒˆãƒ¼ã‚¯</div>
              ã€Œä¾‹ãˆã°ã§ã™ãŒã€æœ€è¿‘å¢—ãˆã¦ã„ã‚‹å®¶æ—è‘¬ã‚„ä¸€æ—¥è‘¬ã§ã¯ã€ä½¿ãˆãã†ã§ã—ã‚‡ã†ã‹ï¼Ÿã€<br>
              ğŸ‘‰ YESãŒå‡ºãŸã‚‰OK
            </div>
          </div>
        </div>
        <div class="faq-item" onclick="toggleFaq(this)">
          <div class="faq-question">
            <span class="faq-icon">ğŸ¯</span>
            <span>10ã€œ13åˆ†ï½œåˆ¤æ–­è»¸ã‚’å–ã‚‹ã€æœ€é‡è¦ã€‘</span>
            <span class="faq-arrow">â–¼</span>
          </div>
          <div class="faq-answer">
            <p><strong>ğŸ¯ ç›®çš„</strong></p>
            <p>ç›¸æ‰‹ã®"è©•ä¾¡åŸºæº–"ã‚’1æœ¬ã«ã™ã‚‹</p>
            <div class="talk-box">
              <div class="talk-label">ğŸ’¬ è³ªå•</div>
              ã€Œå°å…¥ã‚’è€ƒãˆã‚‹ä¸Šã§ã€ä¸€ç•ªå¤§äº‹ã«ãªã‚Šãã†ãªãƒã‚¤ãƒ³ãƒˆã¯ä½•ã§ã—ã‚‡ã†ï¼Ÿã€
            </div>
            <p><strong>æƒ³å®šè¿”ç­”</strong></p>
            <p>ãƒ»ã€Œç¾å ´ã®æ‰‹é–“ã€</p>
            <p>ãƒ»ã€ŒãŠé‡‘ã®ç®¡ç†ã€</p>
            <p>ãƒ»ã€Œéºæ—ã¸ã®èª¬æ˜ã€</p>
            <div style="background:#d4edda; padding:0.75rem; border-radius:8px; margin-top:1rem;">
              <strong>ğŸ“ ãƒã‚¤ãƒ³ãƒˆ</strong><br>
              ãƒ»ã“ã®è¨€è‘‰ã‚’ãƒ¡ãƒ¢ã™ã‚‹<br>
              ãƒ»ä»¥é™ã€<strong>åŒã˜è¨€è‘‰ã‚’ä½¿ã†</strong>
            </div>
          </div>
        </div>
        <div class="faq-item" onclick="toggleFaq(this)">
          <div class="faq-question">
            <span class="faq-icon">ğŸ”¢</span>
            <span>13ã€œ17åˆ†ï½œæ‰‹é–“ã‚’æ•°å­—ã«å¤‰ãˆã‚‹</span>
            <span class="faq-arrow">â–¼</span>
          </div>
          <div class="faq-answer">
            <p><strong>ğŸ¯ ç›®çš„</strong></p>
            <p>500ä¸‡å††ã‚’"äº¤æ›æ¡ä»¶"ã«å¤‰ãˆã‚‹</p>
            <p style="margin-top:1rem;"><strong>å¿…ãšèã3å•ï¼ˆé †ç•ªå³å®ˆï¼‰</strong></p>
            <div class="talk-box">
              <div class="talk-label">Q1</div>
              ã€Œä»Šã€ãã®ä½œæ¥­ã¯1ä»¶ã‚ãŸã‚Šä½•åˆ†ãã‚‰ã„ã‹ã‹ã£ã¦ã„ã¾ã™ã‹ï¼Ÿã€
            </div>
            <div class="talk-box">
              <div class="talk-label">Q2</div>
              ã€Œãã‚ŒãŒ10åˆ†æ¸›ã‚‹ã¨ã—ãŸã‚‰ã€æœˆã«ä½•ä»¶åˆ†ãã‚‰ã„æ¥½ã«ãªã‚Šã¾ã™ã‹ï¼Ÿã€
            </div>
            <div class="talk-box">
              <div class="talk-label">Q3</div>
              ã€Œãã‚Œã€ç¾å ´ã®æ–¹ã¯å–œã³ãã†ã§ã™ã‹ï¼Ÿã€
            </div>
            <div style="background:#f8d7da; padding:0.75rem; border-radius:8px; margin-top:1rem;">
              <strong>âš ï¸ æ³¨æ„</strong><br>
              ãƒ»1å•ã§ã‚‚é£›ã°ã•ãªã„<br>
              ãƒ»ç­”ãˆãŒæ›–æ˜§ã§ã‚‚æ¬¡ã¸é€²ã¾ãªã„
            </div>
          </div>
        </div>
        <div class="faq-item" onclick="toggleFaq(this)">
          <div class="faq-question">
            <span class="faq-icon">ğŸ¢</span>
            <span>17ã€œ20åˆ†ï½œæ±ºè£æ§‹é€ ãƒ»æ™‚æœŸ</span>
            <span class="faq-arrow">â–¼</span>
          </div>
          <div class="faq-answer">
            <p><strong>ğŸ¯ ç›®çš„</strong></p>
            <p>è¿½ã†ã‹ï¼æ¨ã¦ã‚‹ã‹åˆ¤æ–­</p>
            <div class="talk-box">
              <div class="talk-label">ğŸ’¬ è³ªå•â‘ </div>
              ã€Œæœ€çµ‚çš„ãªåˆ¤æ–­ã¯ã€ã©ãªãŸã«ãªã‚Šã¾ã™ã‹ï¼Ÿã€
            </div>
            <div class="talk-box">
              <div class="talk-label">ğŸ’¬ è³ªå•â‘¡</div>
              ã€Œæ±ºã¾ã‚‹ã¨ã—ãŸã‚‰ã€ã„ã¤é ƒã«ãªã‚Šãã†ã§ã™ã‹ï¼Ÿã€
            </div>
            <p style="margin-top:1rem;"><strong>ğŸš¦ åˆ¤å®š</strong></p>
            <p>âœ… äººï¼‹æœŸé™ â†’ <strong>è¦‹è¾¼ã¿</strong></p>
            <p>âŒ ã©ã¡ã‚‰ã‚‚ä¸æ˜ â†’ <strong>æ·±è¿½ã„ç¦æ­¢</strong></p>
          </div>
        </div>
        <div class="faq-item" onclick="toggleFaq(this)">
          <div class="faq-question">
            <span class="faq-icon">ğŸš«</span>
            <span>20ã€œ22åˆ†ï½œNOç†ç”±ã®äº‹å‰å›å</span>
            <span class="faq-arrow">â–¼</span>
          </div>
          <div class="faq-answer">
            <p><strong>ğŸ¯ ç›®çš„</strong></p>
            <p>ä¾¡æ ¼å¾Œã®æ‹’å¦ã‚’é˜²ã</p>
            <div class="talk-box">
              <div class="talk-label">ğŸ’¬ è³ªå•</div>
              ã€Œã“ã“ã¾ã§èã„ã¦ã€ã‚‚ã—ä»Šã€å°å…¥ã—ãªã„ã¨ã—ãŸã‚‰ç†ç”±ã¯ä½•ã«ãªã‚Šãã†ã§ã™ã‹ï¼Ÿã€
            </div>
            <p><strong>æƒ³å®šè¿”ç­”</strong></p>
            <p>ãƒ»ã€Œä¾¡æ ¼ã€</p>
            <p>ãƒ»ã€Œé‹ç”¨ã€</p>
            <p>ãƒ»ã€Œå¿…è¦æ€§ã€</p>
            <p style="margin-top:1rem;">ğŸ‘‰ <strong>ã“ã‚Œã‚’è¦šãˆã¦ä¾¡æ ¼ã¸</strong></p>
          </div>
        </div>
        <div class="faq-item" onclick="toggleFaq(this)">
          <div class="faq-question">
            <span class="faq-icon">ğŸ’°</span>
            <span>22ã€œ25åˆ†ï½œä¾¡æ ¼æç¤ºï¼ˆ500ä¸‡å††ï¼‰</span>
            <span class="faq-arrow">â–¼</span>
          </div>
          <div class="faq-answer">
            <p><strong>è¨€ã„æ–¹ï¼ˆè¨€ã„åˆ‡ã‚Šï¼‰</strong></p>
            <div class="talk-box">
              <div class="talk-label">ğŸ’¬ ä¾¡æ ¼æç¤º</div>
              ã€Œå°å…¥è²»ç”¨ã¨ã—ã¦ã¯ã€500ä¸‡å††ã«ãªã‚Šã¾ã™ã€‚ã€<br><br>
              <strong>ï¼ˆæ²ˆé»™OKï¼‰</strong><br><br>
              ã€Œç‡ç›´ã«ã€ã©ã†æ„Ÿã˜ã‚‰ã‚Œã¾ã—ãŸã‹ï¼Ÿã€
            </div>
          </div>
        </div>
        <div class="faq-item" onclick="toggleFaq(this)">
          <div class="faq-question">
            <span class="faq-icon">ğŸ¯</span>
            <span>25ã€œ28åˆ†ï½œæœ€çµ‚ã‚¯ãƒ­ãƒ¼ã‚¸ãƒ³ã‚°</span>
            <span class="faq-arrow">â–¼</span>
          </div>
          <div class="faq-answer">
            <div class="talk-box">
              <div class="talk-label">ğŸ’¬ å¿…é ˆè³ªå•</div>
              ã€Œã‚‚ã—ä»Šå›ã€ç¤¾é•·åˆ¤æ–­ã§è¦‹é€ã‚‹ã¨ã—ãŸã‚‰ã€å¼•ã£ã‹ã‹ã‚‹ã®ã¯<strong>ä¾¡æ ¼ãƒ»é‹ç”¨ãƒ»å¿…è¦æ€§</strong>ã®ã©ã‚Œã ã¨æ€ã„ã¾ã™ã‹ï¼Ÿã€
            </div>
            <p style="margin-top:1rem;"><strong>ğŸ§© åˆ†å²å¯¾å¿œ</strong></p>
            <p>ğŸ’´ <strong>ä¾¡æ ¼</strong> â†’ 8%é‚„å…ƒæç¤º</p>
            <p>âš™ï¸ <strong>é‹ç”¨</strong> â†’ ç¾å ´ãƒˆãƒ¼ã‚¯</p>
            <p>â“ <strong>å¿…è¦æ€§</strong> â†’ å°†æ¥ãƒªã‚¹ã‚¯</p>
          </div>
        </div>
        <div class="faq-item" onclick="toggleFaq(this)">
          <div class="faq-question">
            <span class="faq-icon">ğŸ</span>
            <span>28ã€œ30åˆ†ï½œæ¬¡ã‚¢ã‚¯ã‚·ãƒ§ãƒ³ç¢ºå®š</span>
            <span class="faq-arrow">â–¼</span>
          </div>
          <div class="faq-answer">
            <div class="talk-box">
              <div class="talk-label">ğŸ’¬ æ­£è§£å°æœ¬</div>
              ã€Œã§ã¯æ¬¡å›ã€ä¾¡æ ¼ã¨å°å…¥åˆ¤æ–­ã ã‘ã«çµã£ã¦ç¤¾é•·ã«15åˆ†ã ã‘ã”èª¬æ˜ã—ãŸã„ã§ã™ã€‚ã€<br><br>
              ã€Œâ—¯æ—¥ã¨â—¯æ—¥ãªã‚‰ã€ã©ã¡ã‚‰ãŒå–ã‚Šã‚„ã™ãã†ã§ã™ã‹ï¼Ÿã€
            </div>
          </div>
        </div>
      </div>

      <!-- æ±ºè£è€…åŒå¸­ãƒ‘ã‚¿ãƒ¼ãƒ³ï¼ˆæ–°è¦è¿½åŠ ï¼‰ -->
      <div class="card">
        <div class="card-header" style="background:linear-gradient(135deg, #ff6b6b, #ee5a5a); color:white;">
          <span class="card-title">ğŸ‘” æ±ºè£è€…åŒå¸­ãƒ‘ã‚¿ãƒ¼ãƒ³</span>
        </div>
        <div class="faq-item" onclick="toggleFaq(this)">
          <div class="faq-question">
            <span class="faq-icon">âš ï¸</span>
            <span>æ±ºè£è€…åŒå¸­æ™‚ã®å¿ƒæ§‹ãˆ</span>
            <span class="faq-arrow">â–¼</span>
          </div>
          <div class="faq-answer">
            <div style="background:#fff3cd; padding:1rem; border-radius:8px; margin-bottom:1rem;">
              <strong>ğŸ“Œ ãƒã‚¤ãƒ³ãƒˆ</strong><br><br>
              ãƒ»ç¤¾é•·ãŒã„ã‚‹æ™‚ã¯<strong>èª¬å¾—ã—ãªã„</strong><br>
              ãƒ»åˆ¤æ–­ææ–™ã‚’<strong>é †ç•ªã©ãŠã‚Šå‡ºã™</strong><br>
              ãƒ»ãã®å ´ã§æ±ºã¾ã£ã¦ã‚‚<strong>ç„¦ã‚‰ãªã„</strong>
            </div>
            <p>1å›ç›®ã‹ã‚‰æ±ºè£è€…ãŒã„ã‚‹å•†è«‡ã¯<strong>ãƒãƒ£ãƒ³ã‚¹ã§ã‚‚ã‚ã‚Šã€æ³¨æ„ãŒå¿…è¦ãªå ´é¢</strong>ã€‚</p>
            <p style="margin-top:0.5rem;">å°æœ¬ã‚’å®ˆã‚‹ã¨ğŸ‘‡</p>
            <p>âœ… æŠ¼ã—å£²ã‚Šã«ãªã‚‰ãªã„</p>
            <p>âœ… ä¾¡æ ¼ã§é€ƒã’ã‚‰ã‚Œãªã„</p>
            <p>âœ… æ±ºã¾ã‚‰ãªãã¦ã‚‚ç´å¾—æ„ŸãŒæ®‹ã‚‹</p>
          </div>
        </div>
        <div class="faq-item" onclick="toggleFaq(this)">
          <div class="faq-question">
            <span class="faq-icon">ğŸ§Š</span>
            <span>ã‚¢ã‚¤ã‚¹ãƒ–ãƒ¬ã‚¤ã‚¯ï¼ˆæ±ºè£è€…å‘ã‘ï¼‰</span>
            <span class="faq-arrow">â–¼</span>
          </div>
          <div class="faq-answer">
            <p><strong>ğŸ¯ ç›®çš„</strong></p>
            <p>ãƒ»ã€Œå£²ã‚‰ã‚Œã‚‹å ´ã€â†’ã€Œåˆ¤æ–­ã™ã‚‹å ´ã€ã«å¤‰ãˆã‚‹</p>
            <p>ãƒ»ç¤¾é•·ã®è­¦æˆ’å¿ƒã‚’ä¸‹ã’ã‚‹</p>
            <div class="talk-box">
              <div class="talk-label">ãƒ‘ã‚¿ãƒ¼ãƒ³â‘ ï¼šæ±ºè£è€…ã¸ã®æ•¬æ„ï¼ˆæœ€å„ªå…ˆï¼‰</div>
              ã€Œä»Šæ—¥ã¯ç¤¾é•·ã‚‚ã”åŒå¸­ã„ãŸã ã„ã¦ã‚ã‚ŠãŒã¨ã†ã”ã–ã„ã¾ã™ã€‚ç¾å ´ã®è©±ã¨ã€çµŒå–¶ã®è¦–ç‚¹ã€ä¸¡æ–¹ä¼ºãˆã‚‹ã®ã¯ã™ã”ãåŠ©ã‹ã‚Šã¾ã™ã€‚ã€<br>
              ğŸ‘‰ ç¤¾é•·ã®å­˜åœ¨ä¾¡å€¤ã‚’å…ˆã«è‚¯å®š
            </div>
            <div class="talk-box">
              <div class="talk-label">ãƒ‘ã‚¿ãƒ¼ãƒ³â‘¡ï¼šæ¥­ç•Œå¤‰åŒ–ãƒˆãƒ¼ã‚¯ï¼ˆçŸ­ãï¼‰</div>
              ã€Œæœ€è¿‘ã€è‘¬å„€ã®å½¢ãŒã‹ãªã‚Šå¤‰ã‚ã£ã¦ãã¦ã„ã¾ã™ã‚ˆã­ã€‚ç¤¾é•·ã¨ã—ã¦ã¯ã€ãã®ã‚ãŸã‚Šã©ã†è¦‹ã¦ã„ã‚‰ã£ã—ã‚ƒã„ã¾ã™ã‹ï¼Ÿã€<br>
              ğŸ‘‰ ã„ããªã‚Šè³ªå•ï¼ä¸»å°æ¨©
            </div>
          </div>
        </div>
        <div class="faq-item" onclick="toggleFaq(this)">
          <div class="faq-question">
            <span class="faq-icon">ğŸ§­</span>
            <span>å‰æåˆã‚ã›ï¼ˆä»Šæ—¥æ±ºã‚ã‚‹ç©ºæ°—ã‚’ä½œã‚‹ï¼‰</span>
            <span class="faq-arrow">â–¼</span>
          </div>
          <div class="faq-answer">
            <div class="talk-box">
              <div class="talk-label">ğŸ’¬ ä¸¸èª­ã¿å°æœ¬</div>
              ã€Œä»Šæ—¥ã¯ã€ã“ã®ä»•çµ„ã¿ã‚’<strong>å°å…¥ã™ã‚‹ã‹ãƒ»è¦‹é€ã‚‹ã‹ã‚’åˆ¤æ–­</strong>ã™ã‚‹ãŸã‚ã®æ™‚é–“ã«ã§ãã‚Œã°ã¨æ€ã£ã¦ã„ã¾ã™ã€‚ã€<br><br>
              ã€Œ30åˆ†ã»ã©ã§ã‚ˆã‚ã—ã„ã§ã—ã‚‡ã†ã‹ï¼Ÿã€
            </div>
            <p style="margin-top:1rem;">ğŸ‘‰ ã“ã“ã§YESãŒå‡ºãŸã‚‰ â†’ <strong>ä»Šæ—¥æ±ºã¾ã£ã¦ã‚‚OKãªç©ºæ°—ã«ãªã‚‹</strong></p>
          </div>
        </div>
        <div class="faq-item" onclick="toggleFaq(this)">
          <div class="faq-question">
            <span class="faq-icon">ğŸ¯</span>
            <span>åˆ¤æ–­è»¸ï¼ˆç¤¾é•·ã®è©•ä¾¡åŸºæº–ã‚’å›ºå®šï¼‰</span>
            <span class="faq-arrow">â–¼</span>
          </div>
          <div class="faq-answer">
            <div class="talk-box">
              <div class="talk-label">ğŸ’¬ è³ªå•</div>
              ã€Œå°å…¥ã™ã‚‹ã‹ã©ã†ã‹ã‚’æ±ºã‚ã‚‹ä¸Šã§ã€ç¤¾é•·ã¨ã—ã¦ä¸€ç•ªæ°—ã«ãªã‚‹ãƒã‚¤ãƒ³ãƒˆã¯ã©ã“ã§ã—ã‚‡ã†ï¼Ÿã€
            </div>
            <p><strong>ã‚ˆãå‡ºã‚‹è¨€è‘‰</strong></p>
            <p>ãƒ»ã€Œç¾å ´ãŒå›ã‚‹ã‹ã€</p>
            <p>ãƒ»ã€Œãƒªã‚¹ã‚¯ãŒãªã„ã‹ã€</p>
            <p>ãƒ»ã€Œæœ¬å½“ã«å¿…è¦ã‹ã€</p>
            <div style="background:#d4edda; padding:0.75rem; border-radius:8px; margin-top:1rem;">
              ğŸ‘‰ ã“ã®è¨€è‘‰ã‚’ä»¥é™ãšã£ã¨ä½¿ã†<br>
              ï¼ˆç¾å ´æ‹…å½“è€…ã®è¨€è‘‰ã‚ˆã‚Š<strong>å„ªå…ˆ</strong>ï¼‰
            </div>
          </div>
        </div>
        <div class="faq-item" onclick="toggleFaq(this)">
          <div class="faq-question">
            <span class="faq-icon">ğŸ”¢</span>
            <span>æ‰‹é–“ã®æ•°å€¤åŒ–ï¼ˆç¤¾é•·ã‚’å·»ãè¾¼ã‚€ï¼‰</span>
            <span class="faq-arrow">â–¼</span>
          </div>
          <div class="faq-answer">
            <div class="talk-box">
              <div class="talk-label">Q1ï¼ˆç¾å ´å‘ã‘ï¼‰</div>
              ã€Œç¾å ´ã§ã¯ã€ä»Šãã®ä½œæ¥­ã¯1ä»¶ã‚ãŸã‚Šä½•åˆ†ãã‚‰ã„ã‹ã‹ã£ã¦ã„ã¾ã™ã‹ï¼Ÿã€
            </div>
            <div class="talk-box">
              <div class="talk-label">Q2</div>
              ã€Œãã‚ŒãŒ10åˆ†æ¸›ã‚‹ã¨ã—ãŸã‚‰ã€æœˆã«ä½•ä»¶åˆ†ãã‚‰ã„ã«ãªã‚Šã¾ã™ã‹ï¼Ÿã€
            </div>
            <div class="talk-box">
              <div class="talk-label">Q3ï¼ˆç¤¾é•·ã«å‘ã‘ã¦ï¼‰</div>
              ã€Œç¤¾é•·ã‹ã‚‰è¦‹ã¦ã€ãã‚Œã ã‘æ™‚é–“ãŒç©ºãã¨ã€ç¾å ´ã¯ã‹ãªã‚Šæ¥½ã«ãªã‚Šã¾ã™ã‹ï¼Ÿã€
            </div>
            <p style="margin-top:1rem;">ğŸ‘‰ <strong>ç¤¾é•·ã«"ã†ãªãšã‹ã›ãŸã‚‰å‹ã¡"</strong></p>
          </div>
        </div>
        <div class="faq-item" onclick="toggleFaq(this)">
          <div class="faq-question">
            <span class="faq-icon">ğŸ’°</span>
            <span>ä¾¡æ ¼æç¤ºï¼ˆæ±ºè£è€…å‘ã‘ï¼‰</span>
            <span class="faq-arrow">â–¼</span>
          </div>
          <div class="faq-answer">
            <div class="talk-box">
              <div class="talk-label">ğŸ’¬ è¨€ã„æ–¹ï¼ˆè¨€ã„åˆ‡ã‚Šï¼‰</div>
              ã€Œå°å…¥è²»ç”¨ã¨ã—ã¦ã¯ã€500ä¸‡å††ã«ãªã‚Šã¾ã™ã€‚ã€<br><br>
              <strong>ï¼ˆæ²ˆé»™OKï¼‰</strong><br><br>
              ã€Œç‡ç›´ã«èã„ã¦ã€ç¤¾é•·ã¨ã—ã¦ã¯ã©ã†æ„Ÿã˜ã‚‰ã‚Œã¾ã™ã‹ï¼Ÿã€
            </div>
          </div>
        </div>
        <div class="faq-item" onclick="toggleFaq(this)">
          <div class="faq-question">
            <span class="faq-icon">ğŸ</span>
            <span>GO / NO ã‚’å–ã‚‹</span>
            <span class="faq-arrow">â–¼</span>
          </div>
          <div class="faq-answer">
            <p><strong>â­• GOã®å ´åˆ</strong></p>
            <div class="talk-box">
              <div class="talk-label">ğŸ’¬</div>
              ã€Œã‚ã‚ŠãŒã¨ã†ã”ã–ã„ã¾ã™ã€‚ã§ã¯ã“ã®å‰æã§ã€å°å…¥ã«å‘ã‘ãŸæº–å‚™ã‚’é€²ã‚ã¾ã™ã€‚ã€
            </div>
            <p style="margin-top:1rem;"><strong>â­• ä¿ç•™ã®å ´åˆ</strong></p>
            <div class="talk-box">
              <div class="talk-label">ğŸ’¬</div>
              ã€Œã§ã¯æ¬¡å›ã€ä¾¡æ ¼ã¨å°å…¥åˆ¤æ–­ã ã‘ã«çµã£ã¦ã€æ”¹ã‚ã¦15åˆ†ã„ãŸã ã‘ã¾ã™ã‹ï¼Ÿã€
            </div>
            <p style="margin-top:1rem;"><strong>â­• NOã®å ´åˆ</strong></p>
            <div class="talk-box">
              <div class="talk-label">ğŸ’¬</div>
              ã€Œæ­£ç›´ã«ã‚ã‚ŠãŒã¨ã†ã”ã–ã„ã¾ã™ã€‚ä»Šå›ã¯è¦‹é€ã‚‹åˆ¤æ–­ã‚‚ã€çµŒå–¶åˆ¤æ–­ã¨ã—ã¦æ­£ã—ã„ã¨æ€ã„ã¾ã™ã€‚ã€<br>
              ğŸ‘‰ <strong>é–¢ä¿‚ã‚’åˆ‡ã‚‰ãªã„</strong>
            </div>
          </div>
        </div>
      </div>

      <!-- å•ã„åˆã‚ã›å¯¾å¿œ -->
      <div class="card">
        <div class="card-header">
          <span class="card-title">ğŸ“ å•ã„åˆã‚ã›å¯¾å¿œ</span>
        </div>
        <div class="faq-item" onclick="toggleFaq(this)">
          <div class="faq-question">
            <span class="faq-icon">âŒ</span>
            <span>çŒ®æ¯ã‚’ã‚­ãƒ£ãƒ³ã‚»ãƒ«ã—ãŸã„</span>
            <span class="faq-arrow">â–¼</span>
          </div>
          <div class="faq-answer">
            <p><strong>åŸºæœ¬æ–¹é‡</strong></p>
            <p>ãƒ»æ±ºæ¸ˆå®Œäº†å¾Œã®ã‚­ãƒ£ãƒ³ã‚»ãƒ«ã¯åŸå‰‡ä¸å¯</p>
            <p>ãƒ»æ±ºæ¸ˆå‰ï¼ˆStripeç”»é¢ã§ã‚„ã‚ãŸå ´åˆï¼‰ã¯å•é¡Œãªã—</p>
            <div class="talk-box">
              <div class="talk-label">ğŸ’¬ å¯¾å¿œä¾‹</div>
              ã€Œç”³ã—è¨³ã”ã–ã„ã¾ã›ã‚“ãŒã€çŒ®æ¯ã¯æ±ºæ¸ˆå®Œäº†å¾Œã®ã‚­ãƒ£ãƒ³ã‚»ãƒ«ã¯æ‰¿ã£ã¦ãŠã‚Šã¾ã›ã‚“ã€‚é¦™å…¸ã¨åŒæ§˜ã€ä¸€åº¦ãŠæ¸¡ã—ã—ãŸã‚‚ã®ã¯ãŠè¿”ã—ã§ããªã„ã¨ãŠè€ƒãˆãã ã•ã„ã€‚ã€
            </div>
            <p style="margin-top:0.5rem; font-size:0.8rem; color:#8a8a8a;">â€»ç‰¹åˆ¥ãªäº‹æƒ…ãŒã‚ã‚‹å ´åˆã¯ç®¡ç†è€…ã«ç›¸è«‡</p>
          </div>
        </div>
        <div class="faq-item" onclick="toggleFaq(this)">
          <div class="faq-question">
            <span class="faq-icon">ğŸ“§</span>
            <span>é ˜åæ›¸ãŒã»ã—ã„</span>
            <span class="faq-arrow">â–¼</span>
          </div>
          <div class="faq-answer">
            <p><strong>å¯¾å¿œæ–¹æ³•</strong></p>
            <p>ãƒ»Stripeã‹ã‚‰è‡ªå‹•ã§é ˜åæ›¸ãƒ¡ãƒ¼ãƒ«ãŒå±Šã</p>
            <p>ãƒ»å±Šã„ã¦ã„ãªã„å ´åˆã¯è¿·æƒ‘ãƒ¡ãƒ¼ãƒ«ãƒ•ã‚©ãƒ«ãƒ€ã‚’ç¢ºèª</p>
            <div class="talk-box">
              <div class="talk-label">ğŸ’¬ å¯¾å¿œä¾‹</div>
              ã€Œæ±ºæ¸ˆå®Œäº†æ™‚ã«ã”ç™»éŒ²ã®ãƒ¡ãƒ¼ãƒ«ã‚¢ãƒ‰ãƒ¬ã‚¹ã«é ˜åæ›¸ãŒå±Šã„ã¦ãŠã‚Šã¾ã™ã€‚ã‚‚ã—å±Šã„ã¦ã„ãªã„å ´åˆã¯ã€è¿·æƒ‘ãƒ¡ãƒ¼ãƒ«ãƒ•ã‚©ãƒ«ãƒ€ã‚’ã”ç¢ºèªãã ã•ã„ã€‚ã€
            </div>
          </div>
        </div>
        <div class="faq-item" onclick="toggleFaq(this)">
          <div class="faq-question">
            <span class="faq-icon">ğŸ”§</span>
            <span>ãƒšãƒ¼ã‚¸ãŒè¡¨ç¤ºã•ã‚Œãªã„</span>
            <span class="faq-arrow">â–¼</span>
          </div>
          <div class="faq-answer">
            <p><strong>ç¢ºèªãƒã‚¤ãƒ³ãƒˆ</strong></p>
            <p>1. URLãŒæ­£ã—ã„ã‹ç¢ºèª</p>
            <p>2. ãƒ–ãƒ©ã‚¦ã‚¶ã®ã‚­ãƒ£ãƒƒã‚·ãƒ¥ã‚’ã‚¯ãƒªã‚¢</p>
            <p>3. åˆ¥ã®ãƒ–ãƒ©ã‚¦ã‚¶ã§è©¦ã™</p>
            <p>4. Wi-Fi / ãƒ¢ãƒã‚¤ãƒ«å›ç·šã‚’åˆ‡ã‚Šæ›¿ãˆ</p>
            <p style="margin-top:0.5rem; font-size:0.8rem; color:#8a8a8a;">â€»ä¸Šè¨˜ã§è§£æ±ºã—ãªã„å ´åˆã¯ç®¡ç†è€…ã«é€£çµ¡</p>
          </div>
        </div>
      </div>
    </div>

    <!-- ãƒ˜ãƒ«ãƒ—ãƒšãƒ¼ã‚¸ï¼ˆä½¿ã„æ–¹ã‚¬ã‚¤ãƒ‰ï¼‰ -->
    <div class="page" id="page-help">
      <button class="btn btn-secondary btn-sm" onclick="switchPage('more')" style="margin-bottom:1rem;">â† æˆ»ã‚‹</button>
      
      <!-- ãƒ˜ãƒƒãƒ€ãƒ¼ -->
      <div class="card" style="background: linear-gradient(135deg, #667eea, #764ba2); color: white; margin-bottom: 1rem;">
        <div class="card-body" style="text-align:center;">
          <div style="font-size: 2.5rem; margin-bottom: 0.5rem;">â“</div>
          <div style="font-size: 1.2rem; font-weight: 700;">å–¶æ¥­ãƒãƒ¼ã‚¿ãƒ«ã®ä½¿ã„æ–¹</div>
          <div style="font-size: 0.85rem; opacity: 0.9;">åˆã‚ã¦ã®æ–¹å‘ã‘ã‚¬ã‚¤ãƒ‰</div>
        </div>
      </div>

      <!-- ç›®æ¬¡ -->
      <div class="card">
        <div class="card-header">
          <span class="card-title">ğŸ“‹ ç›®æ¬¡</span>
        </div>
        <div class="card-body" style="padding:0;">
          <div class="list-item" onclick="scrollToHelp('help-overview')">
            <div class="list-item-icon">ğŸ </div>
            <div class="list-item-content"><div class="list-item-title">ã‚¢ãƒ—ãƒªã®æ¦‚è¦</div></div>
            <div class="list-item-right">â†’</div>
          </div>
          <div class="list-item" onclick="scrollToHelp('help-home')">
            <div class="list-item-icon">ğŸ“Š</div>
            <div class="list-item-content"><div class="list-item-title">ãƒ›ãƒ¼ãƒ ç”»é¢ã®è¦‹æ–¹</div></div>
            <div class="list-item-right">â†’</div>
          </div>
          <div class="list-item" onclick="scrollToHelp('help-kpi')">
            <div class="list-item-icon">ğŸ¯</div>
            <div class="list-item-content"><div class="list-item-title">ç›®æ¨™ã¨â‘ â‘¡â‘¢ã®æ„å‘³</div></div>
            <div class="list-item-right">â†’</div>
          </div>
          <div class="list-item" onclick="scrollToHelp('help-prospect')">
            <div class="list-item-icon">ğŸ¢</div>
            <div class="list-item-content"><div class="list-item-title">è¨ªå•å…ˆã®ç™»éŒ²ãƒ»ç®¡ç†</div></div>
            <div class="list-item-right">â†’</div>
          </div>
          <div class="list-item" onclick="scrollToHelp('help-schedule')">
            <div class="list-item-icon">ğŸ“…</div>
            <div class="list-item-content"><div class="list-item-title">äºˆå®šã®ç™»éŒ²</div></div>
            <div class="list-item-right">â†’</div>
          </div>
          <div class="list-item" onclick="scrollToHelp('help-expense')">
            <div class="list-item-icon">ğŸ’°</div>
            <div class="list-item-content"><div class="list-item-title">çµŒè²»ç”³è«‹ã®æ–¹æ³•</div></div>
            <div class="list-item-right">â†’</div>
          </div>
        </div>
      </div>

      <!-- ã‚¢ãƒ—ãƒªã®æ¦‚è¦ -->
      <div class="card" id="help-overview">
        <div class="card-header">
          <span class="card-title">ğŸ  ã‚¢ãƒ—ãƒªã®æ¦‚è¦</span>
        </div>
        <div class="card-body">
          <p style="margin-bottom:1rem; line-height:1.8;">
            ã“ã®å–¶æ¥­ãƒãƒ¼ã‚¿ãƒ«ã¯ã€<strong>ç¤¼ï¼ˆReiï¼‰ã‚·ã‚¹ãƒ†ãƒ </strong>ã®å–¶æ¥­æ´»å‹•ã‚’ç®¡ç†ã™ã‚‹ãŸã‚ã®ã‚¢ãƒ—ãƒªã§ã™ã€‚
          </p>
          <div style="background:#f5f6fa; border-radius:12px; padding:1rem; margin-bottom:1rem;">
            <div style="font-weight:600; margin-bottom:0.5rem;">ğŸ“± ä¸»ãªæ©Ÿèƒ½</div>
            <ul style="margin:0; padding-left:1.2rem; line-height:2;">
              <li>å–¶æ¥­ç›®æ¨™ã®è¨­å®šãƒ»é€²æ—ç¢ºèª</li>
              <li>è¨ªå•å…ˆï¼ˆè‘¬å„€ç¤¾ï¼‰ã®ç®¡ç†</li>
              <li>è¨ªå•äºˆå®šã®ã‚«ãƒ¬ãƒ³ãƒ€ãƒ¼ç®¡ç†</li>
              <li>çµŒè²»ç”³è«‹</li>
              <li>ãƒ©ãƒ³ã‚­ãƒ³ã‚°ãƒ»å®Ÿç¸¾ç¢ºèª</li>
            </ul>
          </div>
          <div style="background:#e8f4fd; border-radius:12px; padding:1rem;">
            <div style="font-weight:600; margin-bottom:0.5rem;">ğŸ’¡ ãƒã‚¤ãƒ³ãƒˆ</div>
            <p style="margin:0; line-height:1.8;">
              æ¯æ—¥ã“ã®ã‚¢ãƒ—ãƒªã‚’é–‹ã„ã¦ã€ç›®æ¨™ã®é€²æ—ã¨ä»Šæ—¥ã®äºˆå®šã‚’ç¢ºèªã—ã¾ã—ã‚‡ã†ï¼
            </p>
          </div>
        </div>
      </div>

      <!-- ãƒ›ãƒ¼ãƒ ç”»é¢ã®è¦‹æ–¹ -->
      <div class="card" id="help-home">
        <div class="card-header">
          <span class="card-title">ğŸ“Š ãƒ›ãƒ¼ãƒ ç”»é¢ã®è¦‹æ–¹</span>
        </div>
        <div class="card-body">
          <div style="margin-bottom:1.5rem;">
            <div style="font-weight:600; color:#2d5a47; margin-bottom:0.5rem;">ğŸ‘¤ ãƒ—ãƒ­ãƒ•ã‚£ãƒ¼ãƒ«ã‚«ãƒ¼ãƒ‰</div>
            <div style="background:#e8f0ec; border-radius:8px; padding:0.75rem; line-height:1.8;">
              <p>â€¢ <strong>å£²ä¸Šé«˜</strong>ï¼šæˆç´„æ•° Ã— 500ä¸‡å††</p>
              <p>â€¢ <strong>ãƒ¬ãƒ™ãƒ«</strong>ï¼šæˆç´„æ•°ã«å¿œã˜ã¦ãƒ¬ãƒ™ãƒ«ã‚¢ãƒƒãƒ—</p>
              <p>â€¢ <strong>ãƒãƒƒã‚¸</strong>ï¼šå®Ÿç¸¾ã«å¿œã˜ã¦ç²å¾—</p>
            </div>
          </div>
          <div style="margin-bottom:1.5rem;">
            <div style="font-weight:600; color:#2d5a47; margin-bottom:0.5rem;">ğŸ¯ ä»Šæœˆã®ç›®æ¨™</div>
            <div style="background:#fff3cd; border-radius:8px; padding:0.75rem; line-height:1.8;">
              <p>å—æ³¨ç›®æ¨™ã‚’è¨­å®šã™ã‚‹ã¨ã€å¿…è¦ãªè¦‹è¾¼ã¿ãƒ»å•†è«‡ãƒ»ã‚¢ãƒæ•°ãŒè‡ªå‹•è¨ˆç®—ã•ã‚Œã¾ã™ã€‚</p>
              <p>ãƒ—ãƒ­ã‚°ãƒ¬ã‚¹ãƒãƒ¼ã§é”æˆåº¦ãŒä¸€ç›®ã§ã‚ã‹ã‚Šã¾ã™ã€‚</p>
            </div>
          </div>
          <div>
            <div style="font-weight:600; color:#2d5a47; margin-bottom:0.5rem;">ğŸ“… ä»Šæ—¥ã®äºˆå®š</div>
            <div style="background:#d1e9ff; border-radius:8px; padding:0.75rem; line-height:1.8;">
              <p>ä»Šæ—¥è¨ªå•äºˆå®šã®è‘¬å„€ç¤¾ãŒè¡¨ç¤ºã•ã‚Œã¾ã™ã€‚</p>
            </div>
          </div>
        </div>
      </div>

      <!-- ç›®æ¨™ã¨â‘ â‘¡â‘¢ã®æ„å‘³ -->
      <div class="card" id="help-kpi">
        <div class="card-header">
          <span class="card-title">ğŸ¯ ç›®æ¨™ã¨â‘ â‘¡â‘¢ã®æ„å‘³</span>
        </div>
        <div class="card-body">
          <p style="margin-bottom:1rem; line-height:1.8;">
            å–¶æ¥­æ´»å‹•ã¯<strong>ãƒ•ã‚¡ãƒãƒ«ï¼ˆæ¼æ–—ï¼‰</strong>ã®å½¢ã§é€²ã¿ã¾ã™ã€‚å¤šãã®ã‚¢ãƒã‹ã‚‰å¾ã€…ã«çµã‚Šè¾¼ã¾ã‚Œã€æœ€çµ‚çš„ã«æˆç´„ã«è‡³ã‚Šã¾ã™ã€‚
          </p>
          
          <div style="margin-bottom:1rem;">
            <div style="display:flex; align-items:center; gap:0.5rem; margin-bottom:0.5rem;">
              <span style="display:inline-flex; align-items:center; justify-content:center; width:28px; height:28px; background:#17a2b8; color:white; border-radius:50%; font-weight:600;">â‘¢</span>
              <span style="font-weight:600; font-size:1.1rem;">ã‚¢ãƒï¼ˆé¢ä¼šç¢ºå®šï¼‰= B</span>
            </div>
            <div style="background:#e3f2fd; border-radius:8px; padding:0.75rem; margin-left:2rem;">
              <p style="margin:0;"><strong>é¢ä¼šå•†è«‡ãŒç¢ºå®šã—ãŸã‚¢ãƒï¼ˆå¤–æ³¨æˆæœç‰©ï¼‰</strong></p>
              <p style="margin:0.5rem 0 0; font-size:0.85rem; color:#666;">ä¾‹ï¼šãƒ†ãƒ¬ã‚¢ãƒä¼šç¤¾ã‹ã‚‰ã‚‚ã‚‰ã£ãŸã€è¨ªå•ãŒç¢ºå®šã—ã¦ã„ã‚‹ãƒªã‚¹ãƒˆ</p>
            </div>
          </div>

          <div style="text-align:center; color:#8a8a8a; margin:0.5rem 0;">â†“ è»¢æ›ç‡â‘¢ 70%ï¼ˆCÃ·Bï¼‰</div>

          <div style="margin-bottom:1rem;">
            <div style="display:flex; align-items:center; gap:0.5rem; margin-bottom:0.5rem;">
              <span style="display:inline-flex; align-items:center; justify-content:center; width:28px; height:28px; background:#ffc107; color:#1a1f2e; border-radius:50%; font-weight:600;">â‘¡</span>
              <span style="font-weight:600; font-size:1.1rem;">å•†è«‡ï¼ˆå®Ÿæ–½æ¸ˆã¿ï¼‰= C</span>
            </div>
            <div style="background:#fff8e1; border-radius:8px; padding:0.75rem; margin-left:2rem;">
              <p style="margin:0;"><strong>å®Ÿéš›ã«é¢ä¼šå•†è«‡ã‚’å®Ÿæ–½ã—ãŸæ•°</strong></p>
              <p style="margin:0.5rem 0 0; font-size:0.85rem; color:#666;">ä¾‹ï¼šè¨ªå•ã—ã¦ææ¡ˆãƒ»ãƒ‡ãƒ¢ã‚’è¦‹ã›ãŸä¼šç¤¾</p>
            </div>
          </div>

          <div style="text-align:center; color:#8a8a8a; margin:0.5rem 0;">â†“ è»¢æ›ç‡â‘¡ 50%ï¼ˆDÃ·Cï¼‰</div>

          <div style="margin-bottom:1rem;">
            <div style="display:flex; align-items:center; gap:0.5rem; margin-bottom:0.5rem;">
              <span style="display:inline-flex; align-items:center; justify-content:center; width:28px; height:28px; background:#ff6b6b; color:white; border-radius:50%; font-weight:600;">â‘ </span>
              <span style="font-weight:600; font-size:1.1rem;">è¦‹è¾¼ã¿ = D</span>
            </div>
            <div style="background:#ffebee; border-radius:8px; padding:0.75rem; margin-left:2rem;">
              <p style="margin:0;"><strong>å°å…¥ã‚’å‰å‘ãã«æ¤œè¨ä¸­</strong></p>
              <p style="margin:0.5rem 0 0; font-size:0.85rem; color:#666;">ä¾‹ï¼šã€Œå°å…¥ã—ãŸã„ã€ã¨è¨€ã£ã¦ãã‚Œã¦ã„ã‚‹ã€å¥‘ç´„æ›¸å¾…ã¡ã®ä¼šç¤¾</p>
            </div>
          </div>

          <div style="text-align:center; color:#8a8a8a; margin:0.5rem 0;">â†“ è»¢æ›ç‡â‘  10%ï¼ˆEÃ·Dï¼‰</div>

          <div style="margin-bottom:1rem;">
            <div style="display:flex; align-items:center; gap:0.5rem; margin-bottom:0.5rem;">
              <span style="display:inline-flex; align-items:center; justify-content:center; width:28px; height:28px; background:#28a745; color:white; border-radius:50%; font-weight:600;">ğŸ†</span>
              <span style="font-weight:600; font-size:1.1rem;">å—æ³¨ = E</span>
            </div>
            <div style="background:#e8f5e9; border-radius:8px; padding:0.75rem; margin-left:2rem;">
              <p style="margin:0;"><strong>å¥‘ç´„å®Œäº†ï¼å£²ä¸Šè¨ˆä¸Š</strong></p>
              <p style="margin:0.5rem 0 0; font-size:0.85rem; color:#666;">1ç¤¾æˆç´„ = 500ä¸‡å††ã®å£²ä¸Š</p>
            </div>
          </div>

          <div style="background:#f5f6fa; border-radius:12px; padding:1rem; margin-top:1rem;">
            <div style="font-weight:600; margin-bottom:0.5rem;">ğŸ“ é€†ç®—ã®å…¬å¼</div>
            <p style="margin:0; line-height:1.8; font-size:0.9rem;">
              <strong>E = B Ã— â‘¢ Ã— â‘¡ Ã— â‘ </strong><br><br>
              æœˆ5ç¤¾å—æ³¨ï¼ˆE=5ï¼‰ã—ãŸã„å ´åˆï¼š<br>
              â†’ è¦‹è¾¼ã¿ D = 5Ã·10% = <strong>50ä»¶</strong><br>
              â†’ å•†è«‡ C = 50Ã·50% = <strong>100ä»¶</strong><br>
              â†’ ã‚¢ãƒ B = 100Ã·70% = <strong>143ä»¶</strong><br>
              â†’ <strong>1æ—¥ç´„7ä»¶ã®ã‚¢ãƒãŒå¿…è¦ï¼</strong>
            </p>
          </div>
        </div>
      </div>

      <!-- è¨ªå•å…ˆã®ç™»éŒ²ãƒ»ç®¡ç† -->
      <div class="card" id="help-prospect">
        <div class="card-header">
          <span class="card-title">ğŸ¢ è¨ªå•å…ˆã®ç™»éŒ²ãƒ»ç®¡ç†</span>
        </div>
        <div class="card-body">
          <div style="margin-bottom:1.5rem;">
            <div style="font-weight:600; color:#2d5a47; margin-bottom:0.5rem;">ğŸ“ è¨ªå•å…ˆã®æ¢ã—æ–¹</div>
            <ol style="margin:0; padding-left:1.2rem; line-height:2;">
              <li>ä¸‹éƒ¨ãƒ¡ãƒ‹ãƒ¥ãƒ¼ã®ã€Œè¨ªå•å…ˆã€ã‚’ã‚¿ãƒƒãƒ—</li>
              <li>ã‚¨ãƒªã‚¢ï¼ˆé–¢æ±ã€é–¢è¥¿ãªã©ï¼‰ã‚’é¸æŠ</li>
              <li>éƒ½é“åºœçœŒã‚’é¸æŠ</li>
              <li>è‘¬å„€ç¤¾ä¸€è¦§ãŒè¡¨ç¤ºã•ã‚Œã¾ã™</li>
            </ol>
          </div>
          <div style="margin-bottom:1.5rem;">
            <div style="font-weight:600; color:#2d5a47; margin-bottom:0.5rem;">âœ‹ æ‹…å½“ã‚’å–ã‚‹</div>
            <ol style="margin:0; padding-left:1.2rem; line-height:2;">
              <li>è‘¬å„€ç¤¾ã‚’ã‚¿ãƒƒãƒ—ã—ã¦è©³ç´°ã‚’é–‹ã</li>
              <li>ã€Œæ‹…å½“ã‚’å–ã‚‹ã€ãƒœã‚¿ãƒ³ã‚’ã‚¿ãƒƒãƒ—</li>
              <li>ã“ã‚Œã§ã‚ãªãŸã®æ‹…å½“ã«ãªã‚Šã¾ã™</li>
            </ol>
          </div>
          <div>
            <div style="font-weight:600; color:#2d5a47; margin-bottom:0.5rem;">ğŸ“ ã‚¹ãƒ†ãƒ¼ã‚¿ã‚¹ã®å¤‰æ›´</div>
            <div style="background:#f5f6fa; border-radius:8px; padding:0.75rem; line-height:1.8;">
              <p>â€¢ <strong>è¨ªå•æ¸ˆã¿</strong>ï¼šè¨ªå•å®Œäº†</p>
              <p>â€¢ <strong>å•†è«‡ä¸­</strong>ï¼šææ¡ˆãƒ»äº¤æ¸‰ä¸­</p>
              <p>â€¢ <strong>è¦‹è¾¼ã¿</strong>ï¼šå°å…¥å‰å‘ã</p>
              <p>â€¢ <strong>æˆç´„</strong>ï¼šå¥‘ç´„å®Œäº† ğŸ‰</p>
            </div>
          </div>
        </div>
      </div>

      <!-- äºˆå®šã®ç™»éŒ² -->
      <div class="card" id="help-schedule">
        <div class="card-header">
          <span class="card-title">ğŸ“… äºˆå®šã®ç™»éŒ²</span>
        </div>
        <div class="card-body">
          <ol style="margin:0; padding-left:1.2rem; line-height:2.2;">
            <li>ä¸‹éƒ¨ãƒ¡ãƒ‹ãƒ¥ãƒ¼ã®ã€Œäºˆå®šã€ã‚’ã‚¿ãƒƒãƒ—</li>
            <li>å³ä¸Šã®ã€Œ+ è¿½åŠ ã€ãƒœã‚¿ãƒ³ã‚’ã‚¿ãƒƒãƒ—</li>
            <li>è¨ªå•å…ˆã‚’é¸æŠï¼ˆã¾ãŸã¯ã€Œãã®ä»–ã€ã§ãƒ¡ãƒ¢ã«å…¥åŠ›ï¼‰</li>
            <li>è¨ªå•äºˆå®šæ—¥ã‚’é¸æŠ</li>
            <li>ã€Œä¿å­˜ã€ã‚’ã‚¿ãƒƒãƒ—</li>
          </ol>
          <div style="background:#e8f4fd; border-radius:8px; padding:0.75rem; margin-top:1rem;">
            <p style="margin:0; line-height:1.8;">
              ğŸ’¡ ç™»éŒ²ã—ãŸäºˆå®šã¯ã€ã‚«ãƒ¬ãƒ³ãƒ€ãƒ¼ã¨ãƒ›ãƒ¼ãƒ ç”»é¢ã®ã€Œä»Šæ—¥ã®äºˆå®šã€ã«è¡¨ç¤ºã•ã‚Œã¾ã™ã€‚
            </p>
          </div>
        </div>
      </div>

      <!-- çµŒè²»ç”³è«‹ -->
      <div class="card" id="help-expense">
        <div class="card-header">
          <span class="card-title">ğŸ’° çµŒè²»ç”³è«‹ã®æ–¹æ³•</span>
        </div>
        <div class="card-body">
          <ol style="margin:0; padding-left:1.2rem; line-height:2.2;">
            <li>ä¸‹éƒ¨ãƒ¡ãƒ‹ãƒ¥ãƒ¼ã®ã€ŒçµŒè²»ã€ã‚’ã‚¿ãƒƒãƒ—</li>
            <li>ã€Œ+ ç”³è«‹ã€ãƒœã‚¿ãƒ³ã‚’ã‚¿ãƒƒãƒ—</li>
            <li>æ—¥ä»˜ãƒ»ã‚«ãƒ†ã‚´ãƒªãƒ»é‡‘é¡ãƒ»å†…å®¹ã‚’å…¥åŠ›</li>
            <li>ã€Œç”³è«‹ã€ã‚’ã‚¿ãƒƒãƒ—</li>
          </ol>
          <div style="background:#fff3cd; border-radius:8px; padding:0.75rem; margin-top:1rem;">
            <div style="font-weight:600; margin-bottom:0.5rem;">ğŸ“‹ ã‚«ãƒ†ã‚´ãƒªä¾‹</div>
            <p style="margin:0; line-height:1.8; font-size:0.9rem;">
              äº¤é€šè²»ã€ã‚¬ã‚½ãƒªãƒ³ä»£ã€é§è»Šå ´ä»£ã€å®¿æ³Šè²»ã€æ¥å¾…è²»ã€ãã®ä»–
            </p>
          </div>
          <div style="background:#e8f0ec; border-radius:8px; padding:0.75rem; margin-top:0.75rem;">
            <p style="margin:0; line-height:1.8;">
              âœ… ç”³è«‹å¾Œã€ç®¡ç†è€…ãŒæ‰¿èªã™ã‚‹ã¨é€šçŸ¥ãŒå±Šãã¾ã™ã€‚
            </p>
          </div>
        </div>
      </div>

      <!-- ãŠå•ã„åˆã‚ã› -->
      <div class="card" style="background:linear-gradient(135deg, #f5f6fa, #e8e8e8);">
        <div class="card-body" style="text-align:center;">
          <div style="font-size:1.5rem; margin-bottom:0.5rem;">ğŸ¤”</div>
          <div style="font-weight:600; margin-bottom:0.5rem;">ã‚ã‹ã‚‰ãªã„ã“ã¨ãŒã‚ã‚Œã°</div>
          <p style="margin:0; font-size:0.9rem; color:#666;">
            ç®¡ç†è€…ã«é€£çµ¡ã™ã‚‹ã‹ã€æ²ç¤ºæ¿ã§è³ªå•ã—ã¦ãã ã•ã„ï¼
          </p>
        </div>
      </div>
    </div>
  </main>

  <!-- ä¸‹éƒ¨ãƒŠãƒ“ -->
  <nav class="bottom-nav">
    <button class="nav-btn active" data-page="home">
      <span class="nav-btn-icon">ğŸ </span>
      <span>ãƒ›ãƒ¼ãƒ </span>
    </button>
    <button class="nav-btn" data-page="prospects">
      <span class="nav-btn-icon">ğŸ¢</span>
      <span>è¨ªå•å…ˆ</span>
    </button>
    <button class="nav-btn" data-page="calendar">
      <span class="nav-btn-icon">ğŸ“…</span>
      <span>äºˆå®š</span>
    </button>
    <button class="nav-btn" data-page="manual">
      <span class="nav-btn-icon">ğŸ“–</span>
      <span>ãƒãƒ‹ãƒ¥ã‚¢ãƒ«</span>
    </button>
    <button class="nav-btn" data-page="expenses">
      <span class="nav-btn-icon">ğŸ’°</span>
      <span>çµŒè²»</span>
    </button>
    <button class="nav-btn" data-page="more">
      <span class="nav-btn-icon">â‰¡</span>
      <span>ãã®ä»–</span>
    </button>
  </nav>
</div>

<!-- è‘¬å„€ç¤¾è©³ç´°ãƒ¢ãƒ¼ãƒ€ãƒ« -->
<div class="modal-bg" id="prospectDetailModal">
  <div class="modal-box">
    <div class="modal-head">
      <h3>è‘¬å„€ç¤¾è©³ç´°</h3>
      <button class="modal-close" onclick="closeModal('prospectDetailModal')">&times;</button>
    </div>
    <div class="modal-content">
      <input type="hidden" id="selectedProspectId">
      <div id="prospectDetailContent"></div>
    </div>
    <div class="modal-foot">
      <button class="btn btn-secondary" onclick="closeModal('prospectDetailModal')">é–‰ã˜ã‚‹</button>
      <button class="btn btn-secondary" id="unassignBtn" onclick="unassignProspect()" style="display:none;">æ‹…å½“è§£é™¤</button>
      <button class="btn btn-primary" id="assignBtn" onclick="assignProspect()">æ‹…å½“ã™ã‚‹</button>
      <button class="btn btn-primary" onclick="updateProspectStatus()">æ›´æ–°</button>
    </div>
  </div>
</div>

<!-- è¨ªå•å…ˆãƒ¢ãƒ¼ãƒ€ãƒ« -->
<div class="modal-bg" id="prospectModal">
  <div class="modal-box">
    <div class="modal-head">
      <h3 id="prospectModalTitle">è¨ªå•å…ˆã‚’è¿½åŠ </h3>
      <button class="modal-close" onclick="closeModal('prospectModal')">&times;</button>
    </div>
    <div class="modal-content">
      <input type="hidden" id="prospectId">
      <div class="form-group">
        <label class="form-label">è‘¬å„€ç¤¾å *</label>
        <input type="text" class="form-input" id="pName">
      </div>
      <div class="form-group">
        <label class="form-label">éƒ½é“åºœçœŒ *</label>
        <input type="text" class="form-input" id="pArea" placeholder="ä¾‹ï¼šå¤§é˜ªåºœ">
      </div>
      <div class="form-group">
        <label class="form-label">é›»è©±ç•ªå·</label>
        <input type="tel" class="form-input" id="pPhone">
      </div>
      <div class="form-group">
        <label class="form-label">ã‚¹ãƒ†ãƒ¼ã‚¿ã‚¹</label>
        <select class="form-input" id="pStatus">
          <option value="æœªè¨ªå•">æœªè¨ªå•</option>
          <option value="è¨ªå•æ¸ˆã¿">è¨ªå•æ¸ˆã¿</option>
          <option value="å•†è«‡ä¸­">å•†è«‡ä¸­</option>
          <option value="è¦‹è¾¼ã¿">è¦‹è¾¼ã¿</option>
          <option value="æˆç´„">æˆç´„</option>
          <option value="è¦‹é€ã‚Š">è¦‹é€ã‚Š</option>
        </select>
      </div>
      <div class="form-group">
        <label class="form-label">ãƒ¡ãƒ¢</label>
        <textarea class="form-input" id="pNotes" rows="2"></textarea>
      </div>
    </div>
    <div class="modal-foot">
      <button class="btn btn-secondary" onclick="closeModal('prospectModal')">ã‚­ãƒ£ãƒ³ã‚»ãƒ«</button>
      <button class="btn btn-primary" onclick="saveProspect()">ä¿å­˜</button>
    </div>
  </div>
</div>

<!-- ã‚¹ã‚±ã‚¸ãƒ¥ãƒ¼ãƒ«ãƒ¢ãƒ¼ãƒ€ãƒ« -->
<div class="modal-bg" id="scheduleModal">
  <div class="modal-box">
    <div class="modal-head">
      <h3>äºˆå®šã‚’è¿½åŠ </h3>
      <button class="modal-close" onclick="closeModal('scheduleModal')">&times;</button>
    </div>
    <div class="modal-content">
      <div class="form-group">
        <label class="form-label">è¨ªå•å…ˆ *</label>
        <select class="form-input" id="sProspect"></select>
      </div>
      <div class="form-group">
        <label class="form-label">è¨ªå•äºˆå®šæ—¥ *</label>
        <input type="date" class="form-input" id="sDate">
      </div>
      <div class="form-group">
        <label class="form-label">ãƒ¡ãƒ¢</label>
        <input type="text" class="form-input" id="sMemo">
      </div>
    </div>
    <div class="modal-foot">
      <button class="btn btn-secondary" onclick="closeModal('scheduleModal')">ã‚­ãƒ£ãƒ³ã‚»ãƒ«</button>
      <button class="btn btn-primary" onclick="saveSchedule()">ä¿å­˜</button>
    </div>
  </div>
</div>

<!-- ç›®æ¨™ãƒ¢ãƒ¼ãƒ€ãƒ« -->
<div class="modal-bg" id="goalModal">
  <div class="modal-box">
    <div class="modal-head">
      <h3>ğŸ¯ ä»Šæœˆã®ç›®æ¨™ã‚’è¨­å®š</h3>
      <button class="modal-close" onclick="closeModal('goalModal')">&times;</button>
    </div>
    <div class="modal-content">
      <div style="background:#e8f0ec; padding:0.75rem; border-radius:8px; margin-bottom:1rem; font-size:0.8rem;">
        <strong>ğŸ“ KPIè¨­è¨ˆ</strong><br>
        Î²ï¼ˆã‚¢ãƒâ†’å•†è«‡ï¼‰= 70%<br>
        Î³ï¼ˆå•†è«‡â†’è¦‹è¾¼ã¿ï¼‰= 50%<br>
        Î´ï¼ˆè¦‹è¾¼ã¿â†’å—æ³¨ï¼‰= 10%
      </div>
      <div class="form-group">
        <label class="form-label">ğŸ† æœˆé–“å—æ³¨ç›®æ¨™ï¼ˆç¤¾ï¼‰</label>
        <input type="number" class="form-input" id="gClosed" placeholder="ä¾‹ï¼š5" oninput="calcKpiFromGoal()">
        <div class="form-hint">ã“ã®æ•°å­—ã‹ã‚‰å¿…è¦ãªã‚¢ãƒæ•°ã‚’é€†ç®—ã—ã¾ã™</div>
      </div>
      <div id="goalCalcResult" style="background:#f5f6fa; padding:1rem; border-radius:8px; margin-top:1rem; display:none;">
        <div style="font-weight:600; margin-bottom:0.5rem;">ğŸ“Š å¿…è¦æ•°ã®é€†ç®—çµæœ</div>
        <div style="display:grid; grid-template-columns:1fr 1fr; gap:0.5rem; font-size:0.9rem;">
          <div>è¦‹è¾¼ã¿æ•°ï¼ˆDï¼‰:</div><div style="font-weight:600;" id="calcProspect">-</div>
          <div>å•†è«‡æ•°ï¼ˆCï¼‰:</div><div style="font-weight:600;" id="calcNego">-</div>
          <div>ã‚¢ãƒæ•°ï¼ˆBï¼‰:</div><div style="font-weight:600; color:#2d5a47;" id="calcAppo">-</div>
        </div>
        <hr style="border:none; border-top:1px solid #e5e2dd; margin:0.75rem 0;">
        <div style="display:grid; grid-template-columns:1fr 1fr; gap:0.5rem; font-size:0.85rem; color:#5a5a5a;">
          <div>é€±ã‚ãŸã‚Š:</div><div id="calcWeekly">-</div>
          <div>æ—¥ã‚ãŸã‚Š:</div><div id="calcDaily">-</div>
        </div>
      </div>
    </div>
    <div class="modal-foot">
      <button class="btn btn-secondary" onclick="closeModal('goalModal')">ã‚­ãƒ£ãƒ³ã‚»ãƒ«</button>
      <button class="btn btn-primary" onclick="saveGoal()">ä¿å­˜</button>
    </div>
  </div>
</div>

<!-- çµŒè²»ãƒ¢ãƒ¼ãƒ€ãƒ« -->
<div class="modal-bg" id="expenseModal">
  <div class="modal-box">
    <div class="modal-head">
      <h3>çµŒè²»ã‚’ç”³è«‹</h3>
      <button class="modal-close" onclick="closeModal('expenseModal')">&times;</button>
    </div>
    <div class="modal-content">
      <div class="form-group">
        <label class="form-label">æ—¥ä»˜ *</label>
        <input type="date" class="form-input" id="eDate">
      </div>
      <div class="form-group">
        <label class="form-label">ã‚«ãƒ†ã‚´ãƒª *</label>
        <select class="form-input" id="eCategory">
          <option value="äº¤é€šè²»">ğŸšƒ äº¤é€šè²»</option>
          <option value="ã‚¬ã‚½ãƒªãƒ³ä»£">â›½ ã‚¬ã‚½ãƒªãƒ³ä»£</option>
          <option value="é§è»Šå ´ä»£">ğŸ…¿ï¸ é§è»Šå ´ä»£</option>
          <option value="æ¥å¾…è²»">ğŸ½ï¸ æ¥å¾…è²»</option>
          <option value="å®¿æ³Šè²»">ğŸ¨ å®¿æ³Šè²»</option>
          <option value="ãã®ä»–">ğŸ“ ãã®ä»–</option>
        </select>
      </div>
      <div class="form-group">
        <label class="form-label">é‡‘é¡ *</label>
        <input type="number" class="form-input" id="eAmount" placeholder="1000">
      </div>
      <div class="form-group">
        <label class="form-label">å†…å®¹</label>
        <input type="text" class="form-input" id="eDescription">
      </div>
    </div>
    <div class="modal-foot">
      <button class="btn btn-secondary" onclick="closeModal('expenseModal')">ã‚­ãƒ£ãƒ³ã‚»ãƒ«</button>
      <button class="btn btn-primary" onclick="saveExpense()">ç”³è«‹</button>
    </div>
  </div>
</div>

<!-- ãƒŠãƒ¬ãƒƒã‚¸ãƒ¢ãƒ¼ãƒ€ãƒ« -->
<div class="modal-bg" id="knowledgeModal">
  <div class="modal-box">
    <div class="modal-head">
      <h3>ãƒŠãƒ¬ãƒƒã‚¸ã‚’æŠ•ç¨¿</h3>
      <button class="modal-close" onclick="closeModal('knowledgeModal')">&times;</button>
    </div>
    <div class="modal-content">
      <div class="form-group">
        <label class="form-label">ã‚«ãƒ†ã‚´ãƒª *</label>
        <select class="form-input" id="kCategory">
          <option value="æˆåŠŸäº‹ä¾‹">ğŸ“ˆ æˆåŠŸäº‹ä¾‹</option>
          <option value="å¤±æ•—äº‹ä¾‹">ğŸ“‰ å¤±æ•—äº‹ä¾‹</option>
          <option value="FAQ">â“ FAQ</option>
          <option value="Tips">ğŸ’¡ Tips</option>
        </select>
      </div>
      <div class="form-group">
        <label class="form-label">ã‚¿ã‚¤ãƒˆãƒ« *</label>
        <input type="text" class="form-input" id="kTitle">
      </div>
      <div class="form-group">
        <label class="form-label">å†…å®¹ *</label>
        <textarea class="form-input" id="kContent" rows="4"></textarea>
      </div>
    </div>
    <div class="modal-foot">
      <button class="btn btn-secondary" onclick="closeModal('knowledgeModal')">ã‚­ãƒ£ãƒ³ã‚»ãƒ«</button>
      <button class="btn btn-primary" onclick="saveKnowledge()">æŠ•ç¨¿</button>
    </div>
  </div>
</div>

<!-- TODOè©³ç´°ãƒ¢ãƒ¼ãƒ€ãƒ« -->
<div class="modal-bg" id="todoDetailModal">
  <div class="modal-box">
    <div class="modal-head">
      <h3>ğŸ“‹ TODOè©³ç´°</h3>
      <button class="modal-close" onclick="closeModal('todoDetailModal')">&times;</button>
    </div>
    <div class="modal-content">
      <div id="todoDetailContent"></div>
      <hr style="border:none; border-top:1px solid #e5e2dd; margin:1rem 0;">
      <div class="form-group">
        <label class="form-label">ã‚¹ãƒ†ãƒ¼ã‚¿ã‚¹</label>
        <select class="form-input" id="todoStatus">
          <option value="æœªç€æ‰‹">æœªç€æ‰‹</option>
          <option value="ç¢ºèªæ¸ˆã¿">ç¢ºèªæ¸ˆã¿</option>
          <option value="å–çµ„ä¸­">å–çµ„ä¸­</option>
          <option value="å®Œäº†">å®Œäº†</option>
        </select>
      </div>
      <div class="form-group">
        <label class="form-label">å®Œäº†äºˆå®šæ—¥</label>
        <input type="date" class="form-input" id="todoEstimatedDate">
      </div>
      <div class="form-group">
        <label class="form-label">è¿”ä¿¡ãƒ»ã‚³ãƒ¡ãƒ³ãƒˆ</label>
        <textarea class="form-input" id="todoReply" rows="3" placeholder="é€²æ—ã‚„è³ªå•ãªã©..."></textarea>
      </div>
    </div>
    <div class="modal-foot">
      <button class="btn btn-secondary" onclick="closeModal('todoDetailModal')">é–‰ã˜ã‚‹</button>
      <button class="btn btn-primary" onclick="updateTodoStatus()">æ›´æ–°</button>
    </div>
  </div>
</div>

<script>
var supabase;
var currentUser = null;
var prospects = [];
var members = [];
var schedules = [];
var expenses = [];
var knowledge = [];
var posts = [];
var myGoal = null;
var notifications = [];
var myTodos = [];
var selectedTodoId = null;
var currentCalendarDate = new Date();
var selectedDate = null;

var REGIONS = ['åŒ—æµ·é“', 'æ±åŒ—', 'é–¢æ±', 'åŒ—é™¸', 'æ±æµ·', 'é–¢è¥¿', 'ä¸­å›½', 'å››å›½', 'ä¹å·'];
var PREFECTURES = {
  'åŒ—æµ·é“': ['åŒ—æµ·é“'],
  'æ±åŒ—': ['é’æ£®çœŒ','å²©æ‰‹çœŒ','å®®åŸçœŒ','ç§‹ç”°çœŒ','å±±å½¢çœŒ','ç¦å³¶çœŒ'],
  'é–¢æ±': ['æ±äº¬éƒ½','ç¥å¥ˆå·çœŒ','åŸ¼ç‰çœŒ','åƒè‘‰çœŒ','èŒ¨åŸçœŒ','æ ƒæœ¨çœŒ','ç¾¤é¦¬çœŒ'],
  'åŒ—é™¸': ['æ–°æ½ŸçœŒ','å¯Œå±±çœŒ','çŸ³å·çœŒ','ç¦äº•çœŒ'],
  'æ±æµ·': ['å±±æ¢¨çœŒ','é•·é‡çœŒ','å²é˜œçœŒ','é™å²¡çœŒ','æ„›çŸ¥çœŒ','ä¸‰é‡çœŒ'],
  'é–¢è¥¿': ['æ»‹è³€çœŒ','äº¬éƒ½åºœ','å¤§é˜ªåºœ','å…µåº«çœŒ','å¥ˆè‰¯çœŒ','å’Œæ­Œå±±çœŒ'],
  'ä¸­å›½': ['é³¥å–çœŒ','å³¶æ ¹çœŒ','å²¡å±±çœŒ','åºƒå³¶çœŒ','å±±å£çœŒ'],
  'å››å›½': ['å¾³å³¶çœŒ','é¦™å·çœŒ','æ„›åª›çœŒ','é«˜çŸ¥çœŒ'],
  'ä¹å·': ['ç¦å²¡çœŒ','ä½è³€çœŒ','é•·å´çœŒ','ç†Šæœ¬çœŒ','å¤§åˆ†çœŒ','å®®å´çœŒ','é¹¿å…å³¶çœŒ','æ²–ç¸„çœŒ']
};

var SUPABASE_URL = 'https://osyysvompcfuadlnuojs.supabase.co';
var SUPABASE_KEY = 'eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6Im9zeXlzdm9tcGNmdWFkbG51b2pzIiwicm9sZSI6ImFub24iLCJpYXQiOjE3NjgwNjYzODQsImV4cCI6MjA4MzY0MjM4NH0.6GkJnnULLFH0Ep2q7IzkV5O4XNlpy8vDEB2GNM7b0w4';

window.onload = function() {
  supabase = window.supabase.createClient(SUPABASE_URL, SUPABASE_KEY);
  var saved = localStorage.getItem('salesUser');
  if (saved) {
    currentUser = JSON.parse(saved);
    showMainApp();
  }
  document.getElementById('eDate').value = new Date().toISOString().split('T')[0];
  document.getElementById('sDate').value = new Date().toISOString().split('T')[0];
  setupEvents();
};

function validatePassword() {
  var pass = document.getElementById('registerPass').value;
  var hint = document.getElementById('registerPassHint');
  var input = document.getElementById('registerPass');
  
  if (pass.length === 0) {
    hint.textContent = 'â€» 4æ–‡å­—ä»¥ä¸Šã§å…¥åŠ›ã—ã¦ãã ã•ã„';
    hint.classList.remove('error');
    hint.style.color = '#8a8a8a';
    input.classList.remove('error');
  } else if (pass.length < 4) {
    hint.textContent = 'âš ï¸ ãƒ‘ã‚¹ãƒ¯ãƒ¼ãƒ‰ã¯4æ–‡å­—ä»¥ä¸Šå¿…è¦ã§ã™ï¼ˆç¾åœ¨' + pass.length + 'æ–‡å­—ï¼‰';
    hint.classList.add('error');
    hint.style.color = '#dc3545';
    input.classList.add('error');
  } else {
    hint.textContent = 'âœ“ OK';
    hint.classList.remove('error');
    hint.style.color = '#28a745';
    input.classList.remove('error');
  }
}

function toggleFaq(el) {
  el.classList.toggle('open');
}

function setupEvents() {
  document.getElementById('loginBtn').onclick = doLogin;
  document.getElementById('showRegisterLink').onclick = function() {
    document.getElementById('registerModal').classList.add('show');
  };
  document.getElementById('registerBtn').onclick = doRegister;
  document.getElementById('logoutBtn').onclick = doLogout;
  
  var navBtns = document.querySelectorAll('.bottom-nav .nav-btn');
  for (var i = 0; i < navBtns.length; i++) {
    navBtns[i].onclick = function() {
      switchPage(this.getAttribute('data-page'));
    };
  }
  
  document.getElementById('filterStatus').onchange = renderProspects;
  document.getElementById('filterRegion').onchange = function() {
    updatePrefectureFilter();
    renderProspects();
  };
  document.getElementById('filterPref').onchange = renderProspects;
}

function closeModal(id) { document.getElementById(id).classList.remove('show'); }
function openModal(id) { document.getElementById(id).classList.add('show'); }

function doLogin() {
  var name = document.getElementById('loginName').value.trim();
  var pass = document.getElementById('loginPass').value;
  if (!name || !pass) { showError('loginError', 'åå‰ã¨ãƒ‘ã‚¹ãƒ¯ãƒ¼ãƒ‰ã‚’å…¥åŠ›ã—ã¦ãã ã•ã„'); return; }
  supabase.from('sales_members').select('*').eq('name', name).eq('password_hash', pass).single()
    .then(function(r) {
      if (r.error || !r.data) { showError('loginError', 'åå‰ã¾ãŸã¯ãƒ‘ã‚¹ãƒ¯ãƒ¼ãƒ‰ãŒé•ã„ã¾ã™'); return; }
      currentUser = r.data;
      localStorage.setItem('salesUser', JSON.stringify(currentUser));
      showMainApp();
    });
}

function doRegister() {
  var name = document.getElementById('registerName').value.trim();
  var pass = document.getElementById('registerPass').value;
  if (!name || !pass) { showError('registerError', 'åå‰ã¨ãƒ‘ã‚¹ãƒ¯ãƒ¼ãƒ‰ã‚’å…¥åŠ›ã—ã¦ãã ã•ã„'); return; }
  if (pass.length < 4) {
    showError('registerError', 'ãƒ‘ã‚¹ãƒ¯ãƒ¼ãƒ‰ã¯4æ–‡å­—ä»¥ä¸Šã§å…¥åŠ›ã—ã¦ãã ã•ã„');
    document.getElementById('registerPass').classList.add('error');
    return;
  }
  supabase.from('sales_members').insert({ name: name, password_hash: pass }).select().single()
    .then(function(r) {
      if (r.error) { showError('registerError', 'ç™»éŒ²ã«å¤±æ•—ã—ã¾ã—ãŸ'); return; }
      currentUser = r.data;
      localStorage.setItem('salesUser', JSON.stringify(currentUser));
      closeModal('registerModal');
      showMainApp();
    });
}

function doLogout() {
  currentUser = null;
  localStorage.removeItem('salesUser');
  document.getElementById('mainApp').style.display = 'none';
  document.getElementById('loginScreen').style.display = 'flex';
}

function showError(id, msg) {
  var el = document.getElementById(id);
  el.textContent = msg;
  el.classList.remove('hidden');
}

function showMainApp() {
  document.getElementById('loginScreen').style.display = 'none';
  document.getElementById('mainApp').style.display = 'block';
  document.getElementById('userName').textContent = currentUser.name;
  document.getElementById('profileName').textContent = currentUser.name;
  document.getElementById('profileAvatar').textContent = currentUser.name.charAt(0);
  loadData();
}

function loadData() {
  supabase.from('sales_members').select('*').then(function(r) { members = r.data || []; renderRanking(); updateProfileCard(); });
  supabase.from('sales_prospects').select('*').order('created_at', { ascending: false }).then(function(r) { 
    prospects = r.data || []; 
    updateStats(); 
    renderProspects(); 
    updateFollowups();
    updateScheduleProspects();
    updateProfileCard();
    updateMotivation();
    renderMyProspectsList();
  });
  supabase.from('sales_schedules').select('*').eq('member_id', currentUser.id).order('scheduled_date', { ascending: true }).then(function(r) { 
    schedules = r.data || []; 
    renderSchedules(); 
    renderTodaySchedule();
    renderCalendar();
  });
  supabase.from('sales_expenses').select('*').eq('member_id', currentUser.id).order('expense_date', { ascending: false }).then(function(r) { 
    expenses = r.data || []; 
    updateStats(); 
    renderExpenses(); 
    updateReport();
  });
  supabase.from('sales_knowledge').select('*').order('created_at', { ascending: false }).then(function(r) { knowledge = r.data || []; renderKnowledge(); });
  supabase.from('sales_posts').select('*').order('created_at', { ascending: false }).limit(50).then(function(r) { posts = r.data || []; renderPosts(); });
  supabase.from('sales_notifications').select('*').eq('member_id', currentUser.id).order('created_at', { ascending: false }).then(function(r) {
    notifications = r.data || [];
    renderNotifications();
  });
  supabase.from('sales_todos').select('*').eq('member_id', currentUser.id).order('created_at', { ascending: false }).then(function(r) {
    myTodos = r.data || [];
    renderMyTodos();
  });
  var month = new Date().toISOString().slice(0, 7);
  supabase.from('sales_goals').select('*').eq('member_id', currentUser.id).eq('month', month).single().then(function(r) {
    myGoal = r.data || null;
    updateGoalDisplay();
    updateMotivation();
  });
}

function switchPage(page) {
  var navBtns = document.querySelectorAll('.bottom-nav .nav-btn');
  var pages = document.querySelectorAll('.page');
  for (var i = 0; i < navBtns.length; i++) {
    navBtns[i].classList.remove('active');
    if (navBtns[i].getAttribute('data-page') === page) navBtns[i].classList.add('active');
  }
  for (var i = 0; i < pages.length; i++) pages[i].classList.remove('active');
  document.getElementById('page-' + page).classList.add('active');
  
  // ä¸¦ã³æ›¿ãˆè¨­å®šãƒšãƒ¼ã‚¸ã®å ´åˆã¯è¨­å®šãƒªã‚¹ãƒˆã‚’åˆæœŸåŒ–
  if (page === 'sortSettings' && typeof renderSortSettings === 'function') {
    renderSortSettings();
  }
}

function switchTab(prefix, tab) {
  var btns = document.querySelectorAll('.tab-btn');
  var contents = document.querySelectorAll('.tab-content');
  for (var i = 0; i < btns.length; i++) btns[i].classList.remove('active');
  for (var i = 0; i < contents.length; i++) contents[i].classList.remove('active');
  event.target.classList.add('active');
  document.getElementById(prefix + '-' + tab).classList.add('active');
}

function updateStats() {
  var myProspects = prospects.filter(function(p) { return p.assigned_to === currentUser.id; });
  var visits = myProspects.filter(function(p) { return p.status !== 'æœªè¨ªå•'; }).length;
  var nego = myProspects.filter(function(p) { return p.status === 'å•†è«‡ä¸­'; }).length;
  var closed = myProspects.filter(function(p) { return p.status === 'æˆç´„'; }).length;
  var now = new Date();
  var thisMonth = now.getMonth();
  var thisYear = now.getFullYear();
  var monthExp = 0;
  for (var i = 0; i < expenses.length; i++) {
    var d = new Date(expenses[i].expense_date);
    if (d.getMonth() === thisMonth && d.getFullYear() === thisYear) monthExp += expenses[i].amount;
  }
  document.getElementById('statMyVisits').textContent = visits;
  document.getElementById('statNegotiating').textContent = nego;
  document.getElementById('statClosed').textContent = closed;
  document.getElementById('statExpense').textContent = 'Â¥' + monthExp.toLocaleString();
}

function updateGoalDisplay() {
  var myProspects = prospects.filter(function(p) { return p.assigned_to === currentUser.id; });
  
  // å„ã‚¹ãƒ†ãƒ¼ã‚¿ã‚¹ã®ä»¶æ•°ã‚’å–å¾—
  var appo = myProspects.filter(function(p) { return p.status === 'è¨ªå•æ¸ˆã¿' || p.status === 'å•†è«‡ä¸­' || p.status === 'è¦‹è¾¼ã¿' || p.status === 'æˆç´„'; }).length;
  var nego = myProspects.filter(function(p) { return p.status === 'å•†è«‡ä¸­' || p.status === 'è¦‹è¾¼ã¿' || p.status === 'æˆç´„'; }).length;
  var prospect = myProspects.filter(function(p) { return p.status === 'è¦‹è¾¼ã¿' || p.status === 'æˆç´„'; }).length;
  var closed = myProspects.filter(function(p) { return p.status === 'æˆç´„'; }).length;
  
  // ç›®æ¨™å€¤ï¼ˆå—æ³¨ç›®æ¨™ã‹ã‚‰é€†ç®—ï¼‰
  var closedTarget = myGoal ? myGoal.closed_goal : 0;
  var prospectTarget = Math.ceil(closedTarget / 0.10); // â‘ 10%
  var negoTarget = Math.ceil(prospectTarget / 0.50);   // â‘¡50%
  var appoTarget = Math.ceil(negoTarget / 0.70);       // â‘¢70%
  
  // ãƒ¡ã‚¤ãƒ³ã®å—æ³¨ç›®æ¨™è¡¨ç¤º
  var el1 = document.getElementById('goalClosedCurrent2');
  var el2 = document.getElementById('goalClosedTarget2');
  if (el1) el1.textContent = closed;
  if (el2) el2.textContent = closedTarget;
  
  // è¡¨ç¤ºæ›´æ–°
  document.getElementById('goalProspectCurrent').textContent = prospect;
  document.getElementById('goalProspectTarget').textContent = prospectTarget;
  document.getElementById('goalNegoCurrent').textContent = nego;
  document.getElementById('goalNegoTarget').textContent = negoTarget;
  document.getElementById('goalAppoCurrent').textContent = appo;
  document.getElementById('goalAppoTarget').textContent = appoTarget;
  
  // ãƒ—ãƒ­ã‚°ãƒ¬ã‚¹ãƒãƒ¼æ›´æ–°
  var closedPct = closedTarget > 0 ? Math.min(100, (closed / closedTarget) * 100) : 0;
  var prospectPct = prospectTarget > 0 ? Math.min(100, (prospect / prospectTarget) * 100) : 0;
  var negoPct = negoTarget > 0 ? Math.min(100, (nego / negoTarget) * 100) : 0;
  var appoPct = appoTarget > 0 ? Math.min(100, (appo / appoTarget) * 100) : 0;
  
  document.getElementById('goalClosedBar').style.width = closedPct + '%';
  document.getElementById('goalProspectBar').style.width = prospectPct + '%';
  document.getElementById('goalNegoBar').style.width = negoPct + '%';
  document.getElementById('goalAppoBar').style.width = appoPct + '%';
  
  // é”æˆåº¦ã«å¿œã˜ãŸè‰²å¤‰æ›´
  setBarColor('goalClosedBar', closedPct, closed >= closedTarget && closedTarget > 0);
  setBarColor('goalProspectBar', prospectPct, prospect >= prospectTarget && prospectTarget > 0);
  setBarColor('goalNegoBar', negoPct, nego >= negoTarget && negoTarget > 0);
  setBarColor('goalAppoBar', appoPct, appo >= appoTarget && appoTarget > 0);
  
  // KPIè¨ˆç®—ã‚«ãƒ¼ãƒ‰æ›´æ–°
  updateKpiCalcCard(closedTarget, appoTarget, negoTarget, prospectTarget, appo, nego, prospect, closed);
}

function updateKpiCalcCard(closedTarget, appoTarget, negoTarget, prospectTarget, appo, nego, prospect, closed) {
  var container = document.getElementById('kpiCalcContent');
  if (!closedTarget || closedTarget === 0) {
    container.innerHTML = '<div style="color:#8a8a8a; text-align:center;">ç›®æ¨™ã‚’è¨­å®šã™ã‚‹ã¨è¨ˆç®—çµæœãŒè¡¨ç¤ºã•ã‚Œã¾ã™</div>';
    return;
  }
  
  var weeklyAppo = Math.ceil(appoTarget / 4);
  var dailyAppo = Math.ceil(appoTarget / 20);
  var appoGap = appoTarget - appo;
  
  var html = '';
  html += '<div style="display:grid; grid-template-columns:1fr 1fr 1fr; gap:0.5rem; text-align:center; margin-bottom:1rem;">';
  html += '<div style="background:#f5f6fa; padding:0.5rem; border-radius:8px;"><div style="font-size:0.7rem; color:#8a8a8a;">é€±ç›®æ¨™</div><div style="font-weight:700; color:#2d5a47;">' + weeklyAppo + 'ä»¶</div></div>';
  html += '<div style="background:#f5f6fa; padding:0.5rem; border-radius:8px;"><div style="font-size:0.7rem; color:#8a8a8a;">æ—¥ç›®æ¨™</div><div style="font-weight:700; color:#2d5a47;">' + dailyAppo + 'ä»¶</div></div>';
  html += '<div style="background:' + (appoGap > 0 ? '#fff3cd' : '#d4edda') + '; padding:0.5rem; border-radius:8px;"><div style="font-size:0.7rem; color:#8a8a8a;">æ®‹ã‚Š</div><div style="font-weight:700; color:' + (appoGap > 0 ? '#856404' : '#155724') + ';">' + (appoGap > 0 ? appoGap + 'ä»¶' : 'é”æˆ!') + '</div></div>';
  html += '</div>';
  
  // è»¢æ›ç‡ã®å®Ÿç¸¾
  var actualBeta = appo > 0 ? Math.round((nego / appo) * 100) : 0;
  var actualGamma = nego > 0 ? Math.round((prospect / nego) * 100) : 0;
  var actualDelta = prospect > 0 ? Math.round((closed / prospect) * 100) : 0;
  
  html += '<div style="font-size:0.8rem; color:#5a5a5a;">';
  html += '<div style="font-weight:600; margin-bottom:0.25rem;">ğŸ“ˆ å®Ÿç¸¾è»¢æ›ç‡</div>';
  html += '<div style="display:flex; gap:1rem;">';
  html += '<span>Î²: <strong style="color:' + (actualBeta >= 70 ? '#28a745' : '#dc3545') + ';">' + actualBeta + '%</strong></span>';
  html += '<span>Î³: <strong style="color:' + (actualGamma >= 50 ? '#28a745' : '#dc3545') + ';">' + actualGamma + '%</strong></span>';
  html += '<span>Î´: <strong style="color:' + (actualDelta >= 10 ? '#28a745' : '#dc3545') + ';">' + actualDelta + '%</strong></span>';
  html += '</div></div>';
  
  container.innerHTML = html;
}

function updateFollowups() {
  var now = new Date();
  var sevenDaysAgo = new Date(now.getTime() - 7 * 24 * 60 * 60 * 1000);
  var followups = prospects.filter(function(p) {
    if (p.assigned_to !== currentUser.id) return false;
    if (p.status === 'æˆç´„' || p.status === 'è¦‹é€ã‚Š') return false;
    var updated = new Date(p.updated_at);
    return updated < sevenDaysAgo;
  });
  var container = document.getElementById('followupList');
  var alert = document.getElementById('followupAlert');
  var html = '';
  for (var i = 0; i < Math.min(3, followups.length); i++) {
    html += '<div class="alert-card-item">ãƒ»' + esc(followups[i].company_name) + '</div>';
  }
  if (followups.length > 3) html += '<div class="alert-card-item">ä»– ' + (followups.length - 3) + 'ä»¶</div>';
  container.innerHTML = html;
}

function renderProspects() {
  var region = document.getElementById('filterRegion').value;
  var pref = document.getElementById('filterPref').value;
  var status = document.getElementById('filterStatus').value;
  var filtered = prospects.filter(function(p) {
    if (region && p.region !== region) return false;
    if (pref && p.area !== pref) return false;
    if (status && p.status !== status) return false;
    return true;
  });
  document.getElementById('totalProspectsCount').textContent = prospects.length;
  var myCount = prospects.filter(function(p) { return p.assigned_to === currentUser.id; }).length;
  document.getElementById('myProspectsCount').textContent = 'ã‚ãªãŸã®æ‹…å½“: ' + myCount + 'ç¤¾';
  renderRegionList();
  updateRegionFilter();
  var container = document.getElementById('prospectsList');
  if (filtered.length === 0) {
    container.innerHTML = '<div class="card"><div class="empty">è©²å½“ã™ã‚‹è‘¬å„€ç¤¾ãŒã‚ã‚Šã¾ã›ã‚“</div></div>';
    return;
  }
  var html = '<div class="card">';
  html += '<div class="card-header"><span class="card-title">è‘¬å„€ç¤¾ä¸€è¦§ï¼ˆ' + filtered.length + 'ç¤¾ï¼‰</span></div>';
  for (var i = 0; i < filtered.length; i++) {
    var p = filtered[i];
    var member = members.find(function(m) { return m.id === p.assigned_to; });
    var badge = getBadge(p.status);
    var isMyProspect = p.assigned_to === currentUser.id;
    html += '<div class="list-item" onclick="openProspectDetail(\'' + p.id + '\')" style="' + (isMyProspect ? 'background:#e8f0ec;' : '') + '">';
    html += '<div class="list-item-content">';
    html += '<div class="list-item-title">' + esc(p.company_name);
    if (member) html += ' <span style="font-size:0.75rem; color:#2d5a47; font-weight:600;">ã€' + member.name.charAt(0) + 'ã€‘</span>';
    html += '</div>';
    html += '<div class="list-item-sub">' + esc(p.area || '') + (p.temperature && p.temperature !== 'æœªè¨­å®š' ? ' â€¢ ' + getTempEmoji(p.temperature) : '') + '</div>';
    html += '</div>';
    html += '<span class="badge ' + badge + '">' + (p.status || 'æœªè¨ªå•') + '</span>';
    html += '</div>';
  }
  html += '</div>';
  container.innerHTML = html;
}

function renderRegionList() {
  var regionCounts = {};
  for (var i = 0; i < REGIONS.length; i++) regionCounts[REGIONS[i]] = 0;
  for (var i = 0; i < prospects.length; i++) {
    var r = prospects[i].region;
    if (r && regionCounts[r] !== undefined) regionCounts[r]++;
  }
  var html = '';
  for (var i = 0; i < REGIONS.length; i++) {
    var r = REGIONS[i];
    var count = regionCounts[r];
    html += '<div class="list-item" onclick="filterByRegion(\'' + r + '\')" style="padding:0.75rem 1rem;">';
    html += '<div class="list-item-content"><div class="list-item-title" style="font-size:0.9rem;">' + r + '</div></div>';
    html += '<span style="font-weight:600; color:' + (count > 0 ? '#2d5a47' : '#ccc') + ';">' + count + 'ç¤¾</span></div>';
  }
  document.getElementById('regionList').innerHTML = html;
}

function filterByRegion(region) {
  document.getElementById('filterRegion').value = region;
  updatePrefectureFilter();
  renderProspects();
}

function updateRegionFilter() {
  var select = document.getElementById('filterRegion');
  var currentVal = select.value;
  var html = '<option value="">å…¨ã‚¨ãƒªã‚¢</option>';
  for (var i = 0; i < REGIONS.length; i++) html += '<option value="' + REGIONS[i] + '">' + REGIONS[i] + '</option>';
  select.innerHTML = html;
  select.value = currentVal;
}

function updatePrefectureFilter() {
  var region = document.getElementById('filterRegion').value;
  var select = document.getElementById('filterPref');
  var prefs = region ? (PREFECTURES[region] || []) : [];
  var html = '<option value="">å…¨éƒ½é“åºœçœŒ</option>';
  if (region) {
    for (var i = 0; i < prefs.length; i++) {
      var count = prospects.filter(function(p) { return p.area === prefs[i]; }).length;
      html += '<option value="' + prefs[i] + '">' + prefs[i] + ' (' + count + ')</option>';
    }
  }
  select.innerHTML = html;
}

function getTempEmoji(temp) {
  var map = { 'ç†±ã„': 'ğŸ”¥', 'æ¸©ã‹ã„': 'â˜€ï¸', 'æ™®é€š': 'ğŸ˜', 'å†·ãŸã„': 'â„ï¸' };
  return map[temp] || '';
}

function getBadge(status) {
  var map = { 'æœªè¨ªå•': 'badge-gray', 'è¨ªå•æ¸ˆã¿': 'badge-blue', 'å•†è«‡ä¸­': 'badge-yellow', 'è¦‹è¾¼ã¿': 'badge-yellow', 'æˆç´„': 'badge-green', 'è¦‹é€ã‚Š': 'badge-red' };
  return map[status] || 'badge-gray';
}

function openProspectDetail(id) {
  var p = prospects.find(function(x) { return x.id === id; });
  if (!p) return;
  var member = members.find(function(m) { return m.id === p.assigned_to; });
  var isMyProspect = p.assigned_to === currentUser.id;
  var isUnassigned = !p.assigned_to;
  var html = '<div style="margin-bottom:1rem;">';
  html += '<div style="font-size:1.2rem; font-weight:700; margin-bottom:0.5rem;">' + esc(p.company_name) + '</div>';
  html += '<div style="font-size:0.9rem; color:#5a5a5a;">';
  html += 'ğŸ“ ' + esc(p.region || '') + ' / ' + esc(p.area || '') + '<br>';
  if (p.address) html += 'ğŸ  ' + esc(p.address) + '<br>';
  if (p.phone) html += 'ğŸ“ ' + esc(p.phone) + '<br>';
  if (p.temperature && p.temperature !== 'æœªè¨­å®š') html += 'ğŸŒ¡ï¸ æ„Ÿåº¦: ' + p.temperature + '<br>';
  if (p.notes) html += 'ğŸ“ ' + esc(p.notes) + '<br>';
  html += '</div></div>';
  if (member) {
    html += '<div style="background:#e8f0ec; padding:0.75rem; border-radius:8px; margin-bottom:1rem;">';
    html += '<div style="font-size:0.85rem;"><strong>' + esc(member.name) + '</strong> ã•ã‚“ãŒæ‹…å½“ä¸­</div></div>';
  }
  html += '<div style="font-weight:600; margin-bottom:0.5rem;">ã‚¹ãƒ†ãƒ¼ã‚¿ã‚¹</div>';
  html += '<select class="form-input" id="prospectStatus" style="margin-bottom:1rem;">';
  html += '<option value="æœªè¨ªå•"' + (p.status === 'æœªè¨ªå•' ? ' selected' : '') + '>æœªè¨ªå•</option>';
  html += '<option value="è¨ªå•æ¸ˆã¿"' + (p.status === 'è¨ªå•æ¸ˆã¿' ? ' selected' : '') + '>è¨ªå•æ¸ˆã¿</option>';
  html += '<option value="å•†è«‡ä¸­"' + (p.status === 'å•†è«‡ä¸­' ? ' selected' : '') + '>å•†è«‡ä¸­</option>';
  html += '<option value="è¦‹è¾¼ã¿"' + (p.status === 'è¦‹è¾¼ã¿' ? ' selected' : '') + '>è¦‹è¾¼ã¿</option>';
  html += '<option value="æˆç´„"' + (p.status === 'æˆç´„' ? ' selected' : '') + '>æˆç´„</option>';
  html += '<option value="è¦‹é€ã‚Š"' + (p.status === 'è¦‹é€ã‚Š' ? ' selected' : '') + '>è¦‹é€ã‚Š</option>';
  html += '</select>';
  document.getElementById('prospectDetailContent').innerHTML = html;
  var assignBtn = document.getElementById('assignBtn');
  var unassignBtn = document.getElementById('unassignBtn');
  if (isUnassigned) { assignBtn.style.display = 'block'; assignBtn.textContent = 'æ‹…å½“ã™ã‚‹'; unassignBtn.style.display = 'none'; }
  else if (isMyProspect) { assignBtn.style.display = 'none'; unassignBtn.style.display = 'block'; }
  else { assignBtn.style.display = 'none'; unassignBtn.style.display = 'none'; }
  document.getElementById('selectedProspectId').value = id;
  openModal('prospectDetailModal');
}

function assignProspect() {
  var id = document.getElementById('selectedProspectId').value;
  if (!id) return;
  supabase.from('sales_prospects').update({ assigned_to: currentUser.id, updated_at: new Date().toISOString() }).eq('id', id).then(function() { closeModal('prospectDetailModal'); loadData(); });
}

function unassignProspect() {
  var id = document.getElementById('selectedProspectId').value;
  if (!id) return;
  if (!confirm('æ‹…å½“ã‚’è§£é™¤ã—ã¾ã™ã‹ï¼Ÿ')) return;
  supabase.from('sales_prospects').update({ assigned_to: null, updated_at: new Date().toISOString() }).eq('id', id).then(function() { closeModal('prospectDetailModal'); loadData(); });
}

function updateProspectStatus() {
  var id = document.getElementById('selectedProspectId').value;
  var status = document.getElementById('prospectStatus').value;
  if (!id) return;
  supabase.from('sales_prospects').update({ status: status, assigned_to: currentUser.id, updated_at: new Date().toISOString() }).eq('id', id).then(function() { closeModal('prospectDetailModal'); loadData(); });
}

function saveProspect() {
  var id = document.getElementById('prospectId').value;
  var data = {
    company_name: document.getElementById('pName').value.trim(),
    area: document.getElementById('pArea').value.trim(),
    phone: document.getElementById('pPhone').value.trim(),
    status: document.getElementById('pStatus').value,
    notes: document.getElementById('pNotes').value.trim(),
    updated_at: new Date().toISOString()
  };
  if (!data.company_name) { alert('è‘¬å„€ç¤¾åã‚’å…¥åŠ›'); return; }
  if (id) {
    supabase.from('sales_prospects').update(data).eq('id', id).then(function() { closeModal('prospectModal'); loadData(); });
  } else {
    data.assigned_to = currentUser.id;
    supabase.from('sales_prospects').insert(data).then(function() { closeModal('prospectModal'); loadData(); });
  }
}

function updateScheduleProspects() {
  var select = document.getElementById('sProspect');
  var html = '<option value="">é¸æŠã—ã¦ãã ã•ã„</option>';
  html += '<option value="">--- ãã®ä»–ï¼ˆè‡ªç”±å…¥åŠ›ï¼‰---</option>';
  for (var i = 0; i < prospects.length; i++) html += '<option value="' + prospects[i].id + '">' + esc(prospects[i].company_name) + '</option>';
  if (prospects.length === 0) {
    html += '<option value="" disabled>ï¼ˆè‘¬å„€ç¤¾ãŒç™»éŒ²ã•ã‚Œã¦ã„ã¾ã›ã‚“ï¼‰</option>';
  }
  select.innerHTML = html;
}

function openScheduleModal() {
  document.getElementById('sProspect').value = '';
  document.getElementById('sDate').value = new Date().toISOString().split('T')[0];
  document.getElementById('sMemo').value = '';
  openModal('scheduleModal');
}

function saveSchedule() {
  var data = {
    member_id: currentUser.id,
    prospect_id: document.getElementById('sProspect').value || null,
    scheduled_date: document.getElementById('sDate').value,
    memo: document.getElementById('sMemo').value.trim()
  };
  if (!data.scheduled_date) { alert('æ—¥ä»˜ã‚’å…¥åŠ›'); return; }
  supabase.from('sales_schedules').insert(data).then(function() { closeModal('scheduleModal'); loadData(); });
}

function renderSchedules() {
  var upcoming = schedules.filter(function(s) { return !s.is_done; });
  var done = schedules.filter(function(s) { return s.is_done; });
  document.getElementById('upcomingSchedules').innerHTML = renderScheduleList(upcoming);
  document.getElementById('doneSchedules').innerHTML = renderScheduleList(done);
}

function renderScheduleList(list) {
  if (list.length === 0) return '<div class="card"><div class="empty">äºˆå®šãŒã‚ã‚Šã¾ã›ã‚“</div></div>';
  var html = '<div class="card">';
  for (var i = 0; i < list.length; i++) {
    var s = list[i];
    var p = prospects.find(function(x) { return x.id === s.prospect_id; });
    html += '<div class="schedule-item" onclick="toggleSchedule(\'' + s.id + '\', ' + !s.is_done + ')">';
    html += '<div class="schedule-check ' + (s.is_done ? 'done' : '') + '"></div>';
    html += '<div class="schedule-info">';
    html += '<div class="schedule-company">' + (p ? esc(p.company_name) : 'ãã®ä»–') + '</div>';
    html += '<div class="schedule-memo">' + formatDate(s.scheduled_date) + (s.memo ? ' â€¢ ' + esc(s.memo) : '') + '</div>';
    html += '</div></div>';
  }
  html += '</div>';
  return html;
}

function toggleSchedule(id, done) {
  supabase.from('sales_schedules').update({ is_done: done }).eq('id', id).then(function() { loadData(); });
}

function openGoalModal() {
  document.getElementById('gClosed').value = myGoal ? myGoal.closed_goal : '';
  calcKpiFromGoal();
  openModal('goalModal');
}

function calcKpiFromGoal() {
  var closedGoal = parseInt(document.getElementById('gClosed').value) || 0;
  var resultDiv = document.getElementById('goalCalcResult');
  
  if (closedGoal <= 0) {
    resultDiv.style.display = 'none';
    return;
  }
  
  // é€†ç®—
  var prospectNeeded = Math.ceil(closedGoal / 0.10);  // Î´10%
  var negoNeeded = Math.ceil(prospectNeeded / 0.50);  // Î³50%
  var appoNeeded = Math.ceil(negoNeeded / 0.70);      // Î²70%
  var weeklyAppo = Math.ceil(appoNeeded / 4);
  var dailyAppo = Math.ceil(appoNeeded / 20);
  
  document.getElementById('calcProspect').textContent = prospectNeeded + 'ä»¶';
  document.getElementById('calcNego').textContent = negoNeeded + 'ä»¶';
  document.getElementById('calcAppo').textContent = appoNeeded + 'ä»¶';
  document.getElementById('calcWeekly').textContent = weeklyAppo + 'ä»¶/é€±';
  document.getElementById('calcDaily').textContent = dailyAppo + 'ä»¶/æ—¥';
  
  resultDiv.style.display = 'block';
}

function saveGoal() {
  var month = new Date().toISOString().slice(0, 7);
  var closedGoal = parseInt(document.getElementById('gClosed').value) || 0;
  
  // é€†ç®—ã§ä»–ã®ç›®æ¨™ã‚‚è‡ªå‹•è¨­å®š
  var prospectGoal = Math.ceil(closedGoal / 0.10);
  var negoGoal = Math.ceil(prospectGoal / 0.50);
  var appoGoal = Math.ceil(negoGoal / 0.70);
  
  var data = {
    member_id: currentUser.id,
    month: month,
    visit_goal: appoGoal,           // ã‚¢ãƒç›®æ¨™
    negotiation_goal: negoGoal,     // å•†è«‡ç›®æ¨™
    closed_goal: closedGoal         // å—æ³¨ç›®æ¨™
  };
  if (myGoal) {
    supabase.from('sales_goals').update(data).eq('id', myGoal.id).then(function() { closeModal('goalModal'); loadData(); });
  } else {
    supabase.from('sales_goals').insert(data).then(function() { closeModal('goalModal'); loadData(); });
  }
}

function renderTodaySchedule() {
  var today = new Date().toISOString().split('T')[0];
  var todayList = schedules.filter(function(s) { return s.scheduled_date === today && !s.is_done; });
  var container = document.getElementById('todaySchedule');
  if (todayList.length === 0) {
    container.innerHTML = '<div class="empty" style="padding:1rem;">ä»Šæ—¥ã®äºˆå®šã¯ã‚ã‚Šã¾ã›ã‚“</div>';
    return;
  }
  var html = '';
  for (var i = 0; i < todayList.length; i++) {
    var s = todayList[i];
    var p = prospects.find(function(x) { return x.id === s.prospect_id; });
    html += '<div class="list-item">';
    html += '<div class="list-item-icon">ğŸ“</div>';
    html += '<div class="list-item-content">';
    html += '<div class="list-item-title">' + (p ? esc(p.company_name) : 'ãã®ä»–') + '</div>';
    if (s.memo) html += '<div class="list-item-sub">' + esc(s.memo) + '</div>';
    html += '</div></div>';
  }
  container.innerHTML = html;
}

function renderMyProspectsList() {
  var container = document.getElementById('myProspectsList');
  var myProspects = prospects.filter(function(p) { return p.assigned_to === currentUser.id; });
  
  if (myProspects.length === 0) {
    container.innerHTML = '<div class="empty" style="padding:1rem;">æ‹…å½“ä¼šç¤¾ãŒã‚ã‚Šã¾ã›ã‚“<br><span style="font-size:0.8rem;">ã€Œè¨ªå•å…ˆã€ã‹ã‚‰æ‹…å½“ã‚’å–ã‚Šã¾ã—ã‚‡ã†</span></div>';
    return;
  }
  
  // ã‚¹ãƒ†ãƒ¼ã‚¿ã‚¹é †ã«ã‚½ãƒ¼ãƒˆï¼ˆæˆç´„â†’è¦‹è¾¼ã¿â†’å•†è«‡ä¸­â†’è¨ªå•æ¸ˆã¿â†’æœªè¨ªå•ï¼‰
  var statusOrder = {'æˆç´„': 0, 'è¦‹è¾¼ã¿': 1, 'å•†è«‡ä¸­': 2, 'è¨ªå•æ¸ˆã¿': 3, 'æœªè¨ªå•': 4};
  myProspects.sort(function(a, b) {
    return (statusOrder[a.status] || 5) - (statusOrder[b.status] || 5);
  });
  
  // ã‚¹ãƒ†ãƒ¼ã‚¿ã‚¹ã”ã¨ã®ä»¶æ•°ã‚’è¨ˆç®—
  var statusCounts = {};
  myProspects.forEach(function(p) {
    statusCounts[p.status] = (statusCounts[p.status] || 0) + 1;
  });
  
  var html = '';
  
  // ã‚¹ãƒ†ãƒ¼ã‚¿ã‚¹ã‚µãƒãƒªãƒ¼
  html += '<div style="display:flex; gap:0.5rem; padding:0.75rem; background:#f5f6fa; flex-wrap:wrap;">';
  var statuses = [
    { name: 'æˆç´„', color: '#28a745', icon: 'ğŸ†' },
    { name: 'è¦‹è¾¼ã¿', color: '#ff6b6b', icon: 'ğŸ”¥' },
    { name: 'å•†è«‡ä¸­', color: '#ffc107', icon: 'ğŸ’¼' },
    { name: 'è¨ªå•æ¸ˆã¿', color: '#17a2b8', icon: 'âœ“' },
    { name: 'æœªè¨ªå•', color: '#8a8a8a', icon: 'â—‹' }
  ];
  statuses.forEach(function(s) {
    var count = statusCounts[s.name] || 0;
    if (count > 0) {
      html += '<div style="display:flex; align-items:center; gap:0.25rem; font-size:0.75rem;">';
      html += '<span style="color:' + s.color + ';">' + s.icon + '</span>';
      html += '<span>' + s.name + '</span>';
      html += '<span style="font-weight:700; color:' + s.color + ';">' + count + '</span>';
      html += '</div>';
    }
  });
  html += '</div>';
  
  // ä¼šç¤¾ä¸€è¦§ï¼ˆæœ€å¤§10ä»¶è¡¨ç¤ºï¼‰
  var displayList = myProspects.slice(0, 10);
  displayList.forEach(function(p) {
    var statusBadge = {
      'æˆç´„': { bg: '#d4edda', color: '#155724', icon: 'ğŸ†' },
      'è¦‹è¾¼ã¿': { bg: '#f8d7da', color: '#721c24', icon: 'ğŸ”¥' },
      'å•†è«‡ä¸­': { bg: '#fff3cd', color: '#856404', icon: 'ğŸ’¼' },
      'è¨ªå•æ¸ˆã¿': { bg: '#cce5ff', color: '#004085', icon: 'âœ“' },
      'æœªè¨ªå•': { bg: '#f5f6fa', color: '#8a8a8a', icon: 'â—‹' }
    }[p.status] || { bg: '#f5f6fa', color: '#8a8a8a', icon: 'â—‹' };
    
    html += '<div class="list-item" onclick="openProspectDetail(\'' + p.id + '\')" style="cursor:pointer;">';
    html += '<div class="list-item-icon" style="background:' + statusBadge.bg + '; color:' + statusBadge.color + ';">' + statusBadge.icon + '</div>';
    html += '<div class="list-item-content">';
    html += '<div class="list-item-title">' + esc(p.company_name) + '</div>';
    html += '<div class="list-item-sub">' + esc(p.area || '') + ' <span style="background:' + statusBadge.bg + '; color:' + statusBadge.color + '; padding:0.1rem 0.4rem; border-radius:10px; font-size:0.65rem;">' + (p.status || 'æœªè¨ªå•') + '</span></div>';
    html += '</div>';
    html += '<div class="list-item-right">â†’</div>';
    html += '</div>';
  });
  
  // æ®‹ã‚ŠãŒã‚ã‚‹å ´åˆ
  if (myProspects.length > 10) {
    html += '<div style="text-align:center; padding:0.75rem; color:#8a8a8a; font-size:0.85rem;">ä»– ' + (myProspects.length - 10) + ' ç¤¾</div>';
  }
  
  container.innerHTML = html;
}

function renderPosts() {
  var container = document.getElementById('postsList');
  if (posts.length === 0) { container.innerHTML = '<div class="empty">æŠ•ç¨¿ãŒã‚ã‚Šã¾ã›ã‚“</div>'; return; }
  var html = '';
  for (var i = 0; i < posts.length; i++) {
    var p = posts[i];
    var member = members.find(function(m) { return m.id === p.member_id; });
    var name = member ? member.name : 'åŒ¿å';
    html += '<div class="post-item">';
    html += '<div class="post-header">';
    html += '<div class="post-avatar">' + name.charAt(0) + '</div>';
    html += '<span class="post-name">' + esc(name) + '</span>';
    html += '<span class="post-time">' + formatDateTime(p.created_at) + '</span>';
    html += '</div>';
    html += '<div class="post-content">' + esc(p.content) + '</div>';
    html += '</div>';
  }
  container.innerHTML = html;
}

function sendPost() {
  var content = document.getElementById('postInput').value.trim();
  if (!content) return;
  supabase.from('sales_posts').insert({ member_id: currentUser.id, content: content }).then(function() {
    document.getElementById('postInput').value = '';
    loadData();
  });
}

function openExpenseModal() {
  document.getElementById('eDate').value = new Date().toISOString().split('T')[0];
  document.getElementById('eCategory').value = 'äº¤é€šè²»';
  document.getElementById('eAmount').value = '';
  document.getElementById('eDescription').value = '';
  openModal('expenseModal');
}

function saveExpense() {
  var data = {
    member_id: currentUser.id,
    expense_date: document.getElementById('eDate').value,
    category: document.getElementById('eCategory').value,
    amount: parseInt(document.getElementById('eAmount').value) || 0,
    description: document.getElementById('eDescription').value.trim(),
    status: 'ç”³è«‹ä¸­'
  };
  if (!data.expense_date || !data.amount) { alert('æ—¥ä»˜ã¨é‡‘é¡ã‚’å…¥åŠ›'); return; }
  supabase.from('sales_expenses').insert(data).then(function() { closeModal('expenseModal'); loadData(); });
}

function renderExpenses() {
  var now = new Date();
  var thisMonth = now.getMonth();
  var thisYear = now.getFullYear();
  var total = 0;
  for (var i = 0; i < expenses.length; i++) {
    var d = new Date(expenses[i].expense_date);
    if (d.getMonth() === thisMonth && d.getFullYear() === thisYear) total += expenses[i].amount;
  }
  document.getElementById('expenseTotal').textContent = 'Â¥' + total.toLocaleString();
  var container = document.getElementById('expensesList');
  if (expenses.length === 0) { container.innerHTML = '<div class="empty">çµŒè²»ãŒã‚ã‚Šã¾ã›ã‚“</div>'; return; }
  var html = '';
  for (var i = 0; i < expenses.length; i++) {
    var e = expenses[i];
    var icon = getExpenseIcon(e.category);
    html += '<div class="list-item">';
    html += '<div class="list-item-icon">' + icon + '</div>';
    html += '<div class="list-item-content">';
    html += '<div class="list-item-title">' + e.category + '</div>';
    html += '<div class="list-item-sub">' + formatDate(e.expense_date) + (e.description ? ' â€¢ ' + esc(e.description) : '') + '</div>';
    html += '</div>';
    html += '<div class="list-item-right"><strong>Â¥' + e.amount.toLocaleString() + '</strong></div>';
    html += '</div>';
  }
  container.innerHTML = html;
}

function getExpenseIcon(cat) {
  var map = { 'äº¤é€šè²»': 'ğŸšƒ', 'ã‚¬ã‚½ãƒªãƒ³ä»£': 'â›½', 'é§è»Šå ´ä»£': 'ğŸ…¿ï¸', 'æ¥å¾…è²»': 'ğŸ½ï¸', 'å®¿æ³Šè²»': 'ğŸ¨', 'ãã®ä»–': 'ğŸ“' };
  return map[cat] || 'ğŸ“';
}

function openKnowledgeModal() {
  document.getElementById('kCategory').value = 'æˆåŠŸäº‹ä¾‹';
  document.getElementById('kTitle').value = '';
  document.getElementById('kContent').value = '';
  openModal('knowledgeModal');
}

function saveKnowledge() {
  var data = {
    member_id: currentUser.id,
    category: document.getElementById('kCategory').value,
    title: document.getElementById('kTitle').value.trim(),
    content: document.getElementById('kContent').value.trim()
  };
  if (!data.title || !data.content) { alert('ã‚¿ã‚¤ãƒˆãƒ«ã¨å†…å®¹ã‚’å…¥åŠ›'); return; }
  supabase.from('sales_knowledge').insert(data).then(function() { closeModal('knowledgeModal'); loadData(); });
}

function renderKnowledge() {
  var container = document.getElementById('knowledgeList');
  if (knowledge.length === 0) { container.innerHTML = '<div class="card"><div class="empty">ãƒŠãƒ¬ãƒƒã‚¸ãŒã‚ã‚Šã¾ã›ã‚“</div></div>'; return; }
  var html = '';
  for (var i = 0; i < knowledge.length; i++) {
    var k = knowledge[i];
    var member = members.find(function(m) { return m.id === k.member_id; });
    var icon = { 'æˆåŠŸäº‹ä¾‹': 'ğŸ“ˆ', 'å¤±æ•—äº‹ä¾‹': 'ğŸ“‰', 'FAQ': 'â“', 'Tips': 'ğŸ’¡' }[k.category] || 'ğŸ“';
    html += '<div class="card" style="margin-bottom:0.75rem;">';
    html += '<div class="card-body">';
    html += '<div style="font-size:0.75rem;color:#8a8a8a;margin-bottom:0.25rem;">' + icon + ' ' + k.category + '</div>';
    html += '<div style="font-weight:600;margin-bottom:0.5rem;">' + esc(k.title) + '</div>';
    html += '<div style="font-size:0.9rem;color:#5a5a5a;">' + esc(k.content) + '</div>';
    html += '<div style="font-size:0.75rem;color:#8a8a8a;margin-top:0.5rem;">' + (member ? member.name : 'åŒ¿å') + ' â€¢ ' + formatDate(k.created_at) + '</div>';
    html += '</div></div>';
  }
  container.innerHTML = html;
}

function renderRanking() {
  var counts = {};
  for (var i = 0; i < members.length; i++) counts[members[i].id] = { name: members[i].name, count: 0 };
  for (var i = 0; i < prospects.length; i++) {
    var p = prospects[i];
    if (p.assigned_to && counts[p.assigned_to] && p.status !== 'æœªè¨ªå•') counts[p.assigned_to].count++;
  }
  var arr = [];
  for (var id in counts) arr.push(counts[id]);
  arr.sort(function(a, b) { return b.count - a.count; });
  var container = document.getElementById('rankingList');
  if (arr.length === 0) { container.innerHTML = '<div class="empty">ãƒ‡ãƒ¼ã‚¿ãŒã‚ã‚Šã¾ã›ã‚“</div>'; return; }
  var html = '';
  for (var i = 0; i < arr.length; i++) {
    var r = i === 0 ? 'gold' : (i === 1 ? 'silver' : (i === 2 ? 'bronze' : ''));
    html += '<div class="rank-item">';
    html += '<div class="rank-num ' + r + '">' + (i + 1) + '</div>';
    html += '<div class="rank-name">' + esc(arr[i].name) + '</div>';
    html += '<div class="rank-val">' + arr[i].count + 'ä»¶</div>';
    html += '</div>';
  }
  container.innerHTML = html;
}

function updateReport() {
  var myProspects = prospects.filter(function(p) { return p.assigned_to === currentUser.id; });
  
  // å„ã‚¹ãƒ†ãƒ¼ã‚¿ã‚¹ã®ä»¶æ•°ã‚’è¨ˆç®—
  var appo = myProspects.filter(function(p) { return p.status === 'è¨ªå•æ¸ˆã¿' || p.status === 'å•†è«‡ä¸­' || p.status === 'è¦‹è¾¼ã¿' || p.status === 'æˆç´„'; }).length;
  var nego = myProspects.filter(function(p) { return p.status === 'å•†è«‡ä¸­' || p.status === 'è¦‹è¾¼ã¿' || p.status === 'æˆç´„'; }).length;
  var prospect = myProspects.filter(function(p) { return p.status === 'è¦‹è¾¼ã¿' || p.status === 'æˆç´„'; }).length;
  var closed = myProspects.filter(function(p) { return p.status === 'æˆç´„'; }).length;
  
  // ãƒ¡ã‚¤ãƒ³æ•°å€¤ã‚’æ›´æ–°
  document.getElementById('reportMainClosed').textContent = closed;
  document.getElementById('reportMainProspect').textContent = prospect;
  document.getElementById('reportMainNego').textContent = nego;
  document.getElementById('reportMainAppo').textContent = appo;
  
  // è»¢æ›ç‡ã‚’è¨ˆç®—
  var betaRate = appo > 0 ? Math.round((nego / appo) * 100) : 0;
  var gammaRate = nego > 0 ? Math.round((prospect / nego) * 100) : 0;
  var deltaRate = prospect > 0 ? Math.round((closed / prospect) * 100) : 0;
  
  // è»¢æ›ç‡ã‚’è¡¨ç¤º
  document.getElementById('reportBetaRate').textContent = betaRate + '%';
  document.getElementById('reportGammaRate').textContent = gammaRate + '%';
  document.getElementById('reportDeltaRate').textContent = deltaRate + '%';
  
  // ãƒãƒ¼ã®å¹…ã¨è‰²ã‚’è¨­å®š
  var betaBar = document.getElementById('reportBetaBar');
  var gammaBar = document.getElementById('reportGammaBar');
  var deltaBar = document.getElementById('reportDeltaBar');
  
  betaBar.style.width = Math.min(100, betaRate) + '%';
  gammaBar.style.width = Math.min(100, gammaRate) + '%';
  deltaBar.style.width = Math.min(100, deltaRate * 5) + '%'; // Î´ã¯10%ãŒ100%ã«ãªã‚‹ã‚ˆã†ã‚¹ã‚±ãƒ¼ãƒ«
  
  // è‰²ã®è¨­å®š
  setBarColor('reportBetaBar', betaRate >= 70 ? 100 : betaRate * 100 / 70, betaRate >= 70);
  setBarColor('reportGammaBar', gammaRate >= 50 ? 100 : gammaRate * 100 / 50, gammaRate >= 50);
  setBarColor('reportDeltaBar', deltaRate >= 10 ? 100 : deltaRate * 100 / 10, deltaRate >= 10);
  
  // ã‚¹ãƒ†ãƒ¼ã‚¿ã‚¹è¡¨ç¤º
  document.getElementById('reportBetaStatus').innerHTML = betaRate >= 70 ? '<span style="color:#28a745;">âœ“ é”æˆ</span>' : '<span style="color:#dc3545;">ã‚ã¨' + (70 - betaRate) + 'pt</span>';
  document.getElementById('reportGammaStatus').innerHTML = gammaRate >= 50 ? '<span style="color:#28a745;">âœ“ é”æˆ</span>' : '<span style="color:#dc3545;">ã‚ã¨' + (50 - gammaRate) + 'pt</span>';
  document.getElementById('reportDeltaStatus').innerHTML = deltaRate >= 10 ? '<span style="color:#28a745;">âœ“ é”æˆ</span>' : '<span style="color:#dc3545;">ã‚ã¨' + (10 - deltaRate) + 'pt</span>';
  
  // ãƒ•ã‚¡ãƒãƒ«åˆ†æ
  renderFunnelAnalysis(appo, nego, prospect, closed);
  
  // ç›®æ¨™é”æˆçŠ¶æ³
  renderGoalAchievement(appo, nego, prospect, closed);
  
  // çµŒè²»è¨ˆç®—
  var now = new Date();
  var thisMonth = now.getMonth();
  var thisYear = now.getFullYear();
  var monthExp = 0, expCount = 0, transport = 0;
  var categoryTotals = {};
  for (var i = 0; i < expenses.length; i++) {
    var e = expenses[i];
    var d = new Date(e.expense_date);
    if (d.getMonth() === thisMonth && d.getFullYear() === thisYear) {
      monthExp += e.amount;
      expCount++;
      if (e.category === 'äº¤é€šè²»' || e.category === 'ã‚¬ã‚½ãƒªãƒ³ä»£') transport += e.amount;
      categoryTotals[e.category] = (categoryTotals[e.category] || 0) + e.amount;
    }
  }
  document.getElementById('reportExpense').textContent = 'Â¥' + monthExp.toLocaleString();
  document.getElementById('reportExpenseCount').textContent = expCount;
  document.getElementById('reportTransport').textContent = 'Â¥' + transport.toLocaleString();
  
  // çµŒè²»å†…è¨³
  var breakdownHtml = '';
  Object.keys(categoryTotals).forEach(function(cat) {
    var pct = monthExp > 0 ? Math.round((categoryTotals[cat] / monthExp) * 100) : 0;
    breakdownHtml += '<div style="display:flex; justify-content:space-between; align-items:center; padding:0.5rem 0; border-bottom:1px solid #f0f0f0;">';
    breakdownHtml += '<span style="font-size:0.85rem;">' + cat + '</span>';
    breakdownHtml += '<span style="font-weight:600;">Â¥' + categoryTotals[cat].toLocaleString() + ' <span style="font-size:0.7rem; color:#8a8a8a;">(' + pct + '%)</span></span>';
    breakdownHtml += '</div>';
  });
  document.getElementById('expenseBreakdown').innerHTML = breakdownHtml;
}

function renderFunnelAnalysis(appo, nego, prospect, closed) {
  var maxWidth = appo || 1;
  var html = '';
  
  var stages = [
    { label: 'ã‚¢ãƒï¼ˆè¨ªå•æ¸ˆã¿ã€œï¼‰', value: appo, color: '#17a2b8' },
    { label: 'å•†è«‡ï¼ˆå•†è«‡ä¸­ã€œï¼‰', value: nego, color: '#ffc107' },
    { label: 'è¦‹è¾¼ã¿ï¼ˆè¦‹è¾¼ã¿ã€œï¼‰', value: prospect, color: '#fd7e14' },
    { label: 'æˆç´„', value: closed, color: '#28a745' }
  ];
  
  stages.forEach(function(s, i) {
    var width = maxWidth > 0 ? Math.max(20, (s.value / maxWidth) * 100) : 20;
    var dropRate = i > 0 && stages[i-1].value > 0 ? Math.round(((stages[i-1].value - s.value) / stages[i-1].value) * 100) : 0;
    
    html += '<div style="margin-bottom:0.75rem;">';
    html += '<div style="display:flex; justify-content:space-between; align-items:center; margin-bottom:0.25rem;">';
    html += '<span style="font-size:0.8rem;">' + s.label + '</span>';
    html += '<span style="font-weight:600;">' + s.value + 'ä»¶</span>';
    html += '</div>';
    html += '<div style="background:#e5e2dd; border-radius:4px; overflow:hidden;">';
    html += '<div style="width:' + width + '%; height:24px; background:' + s.color + '; border-radius:4px; transition:width 0.5s;"></div>';
    html += '</div>';
    if (i > 0 && dropRate > 0) {
      html += '<div style="font-size:0.7rem; color:#dc3545; text-align:right; margin-top:0.15rem;">â†“ ' + dropRate + '% é›¢è„±</div>';
    }
    html += '</div>';
  });
  
  document.getElementById('funnelAnalysis').innerHTML = html;
}

function renderGoalAchievement(appo, nego, prospect, closed) {
  var closedTarget = myGoal ? myGoal.closed_goal : 0;
  var prospectTarget = Math.ceil(closedTarget / 0.10);
  var negoTarget = Math.ceil(prospectTarget / 0.50);
  var appoTarget = Math.ceil(negoTarget / 0.70);
  
  if (!closedTarget) {
    document.getElementById('goalAchievement').innerHTML = '<div style="text-align:center; color:#8a8a8a; padding:1rem;">ç›®æ¨™ã‚’è¨­å®šã™ã‚‹ã¨é”æˆçŠ¶æ³ãŒè¡¨ç¤ºã•ã‚Œã¾ã™</div>';
    return;
  }
  
  var items = [
    { label: 'å—æ³¨', current: closed, target: closedTarget, icon: 'ğŸ†' },
    { label: 'è¦‹è¾¼ã¿', current: prospect, target: prospectTarget, icon: 'ğŸ”¥' },
    { label: 'å•†è«‡', current: nego, target: negoTarget, icon: 'ğŸ’¼' },
    { label: 'ã‚¢ãƒ', current: appo, target: appoTarget, icon: 'ğŸ“' }
  ];
  
  var html = '';
  items.forEach(function(item) {
    var pct = item.target > 0 ? Math.round((item.current / item.target) * 100) : 0;
    var isAchieved = item.current >= item.target;
    var color = isAchieved ? '#28a745' : (pct >= 50 ? '#ffc107' : '#dc3545');
    
    html += '<div style="display:flex; align-items:center; gap:0.75rem; padding:0.75rem 0; border-bottom:1px solid #f0f0f0;">';
    html += '<div style="font-size:1.2rem;">' + item.icon + '</div>';
    html += '<div style="flex:1;">';
    html += '<div style="display:flex; justify-content:space-between; margin-bottom:0.25rem;">';
    html += '<span style="font-size:0.85rem;">' + item.label + '</span>';
    html += '<span style="font-weight:600;">' + item.current + ' / ' + item.target + '</span>';
    html += '</div>';
    html += '<div class="goal-bar" style="height:8px;"><div class="goal-fill" style="width:' + Math.min(100, pct) + '%; background:' + color + ';"></div></div>';
    html += '</div>';
    html += '<div style="font-weight:700; color:' + color + '; min-width:50px; text-align:right;">' + pct + '%</div>';
    html += '</div>';
  });
  
  // æ®‹ã‚Šæ—¥æ•°ã¨å¿…è¦ãƒšãƒ¼ã‚¹
  var now = new Date();
  var lastDay = new Date(now.getFullYear(), now.getMonth() + 1, 0).getDate();
  var remainingDays = lastDay - now.getDate();
  var remainingWorkDays = Math.ceil(remainingDays * 5 / 7); // å–¶æ¥­æ—¥æ¦‚ç®—
  var remainingAppo = Math.max(0, appoTarget - appo);
  var dailyPace = remainingWorkDays > 0 ? Math.ceil(remainingAppo / remainingWorkDays) : remainingAppo;
  
  html += '<div style="margin-top:1rem; padding:1rem; background:#f5f6fa; border-radius:8px;">';
  html += '<div style="font-weight:600; margin-bottom:0.5rem;">ğŸ“… æ®‹ã‚ŠæœŸé–“</div>';
  html += '<div style="display:grid; grid-template-columns:repeat(3,1fr); gap:0.5rem; text-align:center;">';
  html += '<div><div style="font-size:1.2rem; font-weight:700;">' + remainingDays + '</div><div style="font-size:0.7rem; color:#8a8a8a;">æ®‹ã‚Šæ—¥æ•°</div></div>';
  html += '<div><div style="font-size:1.2rem; font-weight:700;">' + remainingAppo + '</div><div style="font-size:0.7rem; color:#8a8a8a;">æ®‹ã‚Šã‚¢ãƒ</div></div>';
  html += '<div><div style="font-size:1.2rem; font-weight:700; color:' + (dailyPace > 10 ? '#dc3545' : '#28a745') + ';">' + dailyPace + '</div><div style="font-size:0.7rem; color:#8a8a8a;">ä»¶/æ—¥</div></div>';
  html += '</div></div>';
  
  document.getElementById('goalAchievement').innerHTML = html;
}

function renderNotifications() {
  var unreadCount = notifications.filter(function(n) { return !n.is_read; }).length;
  document.getElementById('notifCount').textContent = unreadCount + 'ä»¶ã®æœªèª­';
  var container = document.getElementById('notificationsList');
  if (notifications.length === 0) { container.innerHTML = '<div class="empty">é€šçŸ¥ãŒã‚ã‚Šã¾ã›ã‚“</div>'; return; }
  var html = '';
  for (var i = 0; i < notifications.length; i++) {
    var n = notifications[i];
    var iconClass = n.type === 'success' ? 'success' : (n.type === 'error' ? 'error' : 'info');
    var icon = n.type === 'success' ? 'âœ“' : (n.type === 'error' ? 'âœ•' : 'â„¹');
    html += '<div class="notif-item ' + (n.is_read ? '' : 'unread') + '" onclick="markRead(\'' + n.id + '\')">';
    html += '<div class="notif-icon ' + iconClass + '">' + icon + '</div>';
    html += '<div class="notif-content">';
    html += '<div class="notif-title">' + esc(n.title) + '</div>';
    if (n.content) html += '<div class="notif-text">' + esc(n.content) + '</div>';
    html += '<div class="notif-time">' + formatDateTime(n.created_at) + '</div>';
    html += '</div></div>';
  }
  container.innerHTML = html;
  updateHomeAlerts();
}

function markRead(id) {
  supabase.from('sales_notifications').update({ is_read: true }).eq('id', id).then(function() { loadData(); });
}

function markAllRead() {
  supabase.from('sales_notifications').update({ is_read: true }).eq('member_id', currentUser.id).then(function() { loadData(); });
}

function renderMyTodos() {
  var pendingCount = myTodos.filter(function(t) { return t.status !== 'å®Œäº†'; }).length;
  var unreadCount = myTodos.filter(function(t) { return !t.is_read; }).length;
  document.getElementById('todoCount').textContent = pendingCount + 'ä»¶ã®æœªå®Œäº†' + (unreadCount > 0 ? 'ï¼ˆ' + unreadCount + 'ä»¶æœªèª­ï¼‰' : '');
  var container = document.getElementById('myTodosList');
  if (myTodos.length === 0) { container.innerHTML = '<div class="empty">TODOãŒã‚ã‚Šã¾ã›ã‚“</div>'; return; }
  var html = '';
  for (var i = 0; i < myTodos.length; i++) {
    var t = myTodos[i];
    var isDone = t.status === 'å®Œäº†';
    var isUnread = !t.is_read;
    var statusBadge = getTodoStatusBadge(t.status);
    html += '<div class="my-todo-item" style="' + (isUnread ? 'background:#fff8e1;' : '') + '" onclick="openTodoDetail(\'' + t.id + '\')">';
    html += '<div style="flex:1;">';
    html += '<div style="display:flex; align-items:center; gap:0.5rem; margin-bottom:0.25rem;">';
    if (isUnread) html += '<span style="background:#dc3545; color:white; font-size:0.6rem; padding:0.1rem 0.4rem; border-radius:4px;">NEW</span>';
    html += '<span class="badge ' + statusBadge + '">' + t.status + '</span></div>';
    html += '<div class="my-todo-title" style="' + (isDone ? 'text-decoration:line-through; color:#8a8a8a;' : '') + '">' + esc(t.title) + '</div>';
    html += '<div class="my-todo-meta">';
    if (t.due_date) html += 'æœŸé™: ' + formatDate(t.due_date) + ' ';
    if (t.estimated_date) html += 'â†’ å®Œäº†äºˆå®š: ' + formatDate(t.estimated_date);
    html += '</div>';
    if (t.description) html += '<div style="font-size:0.8rem; color:#5a5a5a; margin-top:0.25rem;">' + esc(t.description) + '</div>';
    if (t.member_reply) html += '<div style="font-size:0.8rem; color:#2d5a47; margin-top:0.25rem; background:#e8f0ec; padding:0.4rem; border-radius:4px;">ğŸ’¬ ' + esc(t.member_reply) + '</div>';
    html += '</div>';
    html += '<div style="color:#8a8a8a;">â†’</div></div>';
  }
  container.innerHTML = html;
  updateHomeAlerts();
  renderHomeTodos();
}

function renderHomeTodos() {
  var container = document.getElementById('homeTodoList');
  var pendingTodos = myTodos.filter(function(t) { return t.status !== 'å®Œäº†'; });
  if (pendingTodos.length === 0) { container.innerHTML = '<div class="empty" style="padding:1rem;">æœªå®Œäº†ã®TODOã¯ã‚ã‚Šã¾ã›ã‚“ ğŸ‰</div>'; return; }
  var html = '';
  var showCount = Math.min(3, pendingTodos.length);
  for (var i = 0; i < showCount; i++) {
    var t = pendingTodos[i];
    var isUnread = !t.is_read;
    var statusBadge = getTodoStatusBadge(t.status);
    html += '<div class="list-item" style="' + (isUnread ? 'background:#fff8e1;' : '') + '" onclick="openTodoDetail(\'' + t.id + '\')">';
    html += '<div class="list-item-icon" style="background:' + (isUnread ? '#ffc107' : '#e8f0ec') + ';">' + (isUnread ? 'ğŸ†•' : 'ğŸ“‹') + '</div>';
    html += '<div class="list-item-content">';
    html += '<div style="display:flex; align-items:center; gap:0.5rem;">';
    html += '<span class="badge ' + statusBadge + '" style="font-size:0.6rem;">' + t.status + '</span>';
    html += '<span class="list-item-title" style="font-size:0.85rem;">' + esc(t.title) + '</span></div>';
    if (t.due_date) html += '<div class="list-item-sub">æœŸé™: ' + formatDate(t.due_date) + '</div>';
    html += '</div>';
    html += '<div class="list-item-right">â†’</div></div>';
  }
  if (pendingTodos.length > 3) html += '<div style="text-align:center; padding:0.5rem; font-size:0.8rem; color:#8a8a8a;">ä»– ' + (pendingTodos.length - 3) + 'ä»¶</div>';
  container.innerHTML = html;
}

function getTodoStatusBadge(status) {
  var map = { 'æœªç€æ‰‹': 'badge-gray', 'ç¢ºèªæ¸ˆã¿': 'badge-blue', 'å–çµ„ä¸­': 'badge-yellow', 'å®Œäº†': 'badge-green' };
  return map[status] || 'badge-gray';
}

function openTodoDetail(id) {
  selectedTodoId = id;
  var t = myTodos.find(function(x) { return x.id === id; });
  if (!t) return;
  if (!t.is_read) {
    supabase.from('sales_todos').update({ is_read: true, read_at: new Date().toISOString() }).eq('id', id).then(function() {
      t.is_read = true;
      renderMyTodos();
    });
  }
  var html = '';
  html += '<div style="font-size:1.1rem; font-weight:600; margin-bottom:0.5rem;">' + esc(t.title) + '</div>';
  if (t.description) html += '<div style="color:#5a5a5a; margin-bottom:0.5rem;">' + esc(t.description) + '</div>';
  html += '<div style="font-size:0.8rem; color:#8a8a8a;">';
  if (t.due_date) html += 'ğŸ“… æœŸé™: ' + formatDate(t.due_date) + '<br>';
  html += 'ğŸ“† ä½œæˆæ—¥: ' + formatDateTime(t.created_at) + '</div>';
  document.getElementById('todoDetailContent').innerHTML = html;
  document.getElementById('todoStatus').value = t.status || 'æœªç€æ‰‹';
  document.getElementById('todoEstimatedDate').value = t.estimated_date || '';
  document.getElementById('todoReply').value = t.member_reply || '';
  openModal('todoDetailModal');
}

function updateTodoStatus() {
  if (!selectedTodoId) return;
  var data = {
    status: document.getElementById('todoStatus').value,
    estimated_date: document.getElementById('todoEstimatedDate').value || null,
    member_reply: document.getElementById('todoReply').value.trim(),
    replied_at: new Date().toISOString()
  };
  supabase.from('sales_todos').update(data).eq('id', selectedTodoId).then(function() { closeModal('todoDetailModal'); loadData(); });
}

function updateHomeAlerts() {
  var unreadNotifs = notifications.filter(function(n) { return !n.is_read; });
  var notifCard = document.getElementById('newNotifCard');
  if (unreadNotifs.length > 0) {
    notifCard.style.display = 'block';
    document.getElementById('newNotifTitle').textContent = unreadNotifs.length + 'ä»¶ã®æ–°ã—ã„é€šçŸ¥';
    document.getElementById('newNotifPreview').textContent = unreadNotifs[0].title;
  } else { notifCard.style.display = 'none'; }
  var pendingTodos = myTodos.filter(function(t) { return t.status !== 'å®Œäº†'; });
  var todoCard = document.getElementById('newTodoCard');
  if (pendingTodos.length > 0) {
    todoCard.style.display = 'block';
    document.getElementById('newTodoTitle').textContent = pendingTodos.length + 'ä»¶ã®æœªå®Œäº†TODO';
    document.getElementById('newTodoPreview').textContent = pendingTodos[0].title;
  } else { todoCard.style.display = 'none'; }
}

function renderCalendar() {
  var year = currentCalendarDate.getFullYear();
  var month = currentCalendarDate.getMonth();
  document.getElementById('calendarTitle').textContent = year + 'å¹´' + (month + 1) + 'æœˆ';
  var firstDay = new Date(year, month, 1);
  var lastDay = new Date(year, month + 1, 0);
  var startDay = firstDay.getDay();
  var daysInMonth = lastDay.getDate();
  var today = new Date();
  var todayStr = today.toISOString().split('T')[0];
  var scheduleDates = {};
  for (var i = 0; i < schedules.length; i++) scheduleDates[schedules[i].scheduled_date] = true;
  var html = '<div class="calendar-grid">';
  var days = ['æ—¥', 'æœˆ', 'ç«', 'æ°´', 'æœ¨', 'é‡‘', 'åœŸ'];
  for (var d = 0; d < 7; d++) {
    var cls = d === 0 ? 'sun' : (d === 6 ? 'sat' : '');
    html += '<div class="calendar-header ' + cls + '">' + days[d] + '</div>';
  }
  var prevMonth = new Date(year, month, 0);
  var prevDays = prevMonth.getDate();
  for (var d = startDay - 1; d >= 0; d--) html += '<div class="calendar-day other-month">' + (prevDays - d) + '</div>';
  for (var d = 1; d <= daysInMonth; d++) {
    var dateStr = year + '-' + String(month + 1).padStart(2, '0') + '-' + String(d).padStart(2, '0');
    var isToday = dateStr === todayStr;
    var isSelected = selectedDate === dateStr;
    var hasSchedule = scheduleDates[dateStr];
    var cls = 'calendar-day';
    if (isToday) cls += ' today';
    if (isSelected) cls += ' selected';
    if (hasSchedule) cls += ' has-schedule';
    html += '<div class="' + cls + '" onclick="selectDate(\'' + dateStr + '\')">' + d + '</div>';
  }
  var totalCells = startDay + daysInMonth;
  var nextDays = 7 - (totalCells % 7);
  if (nextDays < 7) {
    for (var d = 1; d <= nextDays; d++) html += '<div class="calendar-day other-month">' + d + '</div>';
  }
  html += '</div>';
  document.getElementById('calendarGrid').innerHTML = html;
  if (!selectedDate) selectDate(todayStr);
  else renderSelectedDateSchedules();
}

function changeMonth(delta) {
  currentCalendarDate.setMonth(currentCalendarDate.getMonth() + delta);
  renderCalendar();
}

function selectDate(dateStr) {
  selectedDate = dateStr;
  document.getElementById('sDate').value = dateStr;
  renderCalendar();
  renderSelectedDateSchedules();
}

function renderSelectedDateSchedules() {
  var d = new Date(selectedDate);
  document.getElementById('selectedDateTitle').textContent = (d.getMonth() + 1) + '/' + d.getDate() + 'ã®äºˆå®š';
  var daySchedules = schedules.filter(function(s) { return s.scheduled_date === selectedDate; });
  var container = document.getElementById('selectedDateSchedules');
  if (daySchedules.length === 0) { container.innerHTML = '<div class="empty">äºˆå®šãŒã‚ã‚Šã¾ã›ã‚“</div>'; return; }
  var html = '';
  for (var i = 0; i < daySchedules.length; i++) {
    var s = daySchedules[i];
    var p = prospects.find(function(x) { return x.id === s.prospect_id; });
    html += '<div class="list-item" onclick="toggleSchedule(\'' + s.id + '\', ' + !s.is_done + ')">';
    html += '<div class="list-item-icon" style="background:' + (s.is_done ? '#d4edda' : '#fff3cd') + ';">' + (s.is_done ? 'âœ“' : 'ğŸ“') + '</div>';
    html += '<div class="list-item-content">';
    html += '<div class="list-item-title" style="' + (s.is_done ? 'text-decoration:line-through; color:#8a8a8a;' : '') + '">' + (p ? esc(p.company_name) : 'ãã®ä»–') + '</div>';
    if (s.memo) html += '<div class="list-item-sub">' + esc(s.memo) + '</div>';
    html += '</div></div>';
  }
  container.innerHTML = html;
}

// ã‚²ãƒ¼ãƒŸãƒ•ã‚£ã‚±ãƒ¼ã‚·ãƒ§ãƒ³é–¢é€£
function setBarColor(barId, pct, isOver) {
  var bar = document.getElementById(barId);
  bar.classList.remove('low', 'mid', 'high', 'over');
  if (isOver) {
    bar.classList.add('over');
  } else if (pct >= 70) {
    bar.classList.add('high');
  } else if (pct >= 40) {
    bar.classList.add('mid');
  } else {
    bar.classList.add('low');
  }
}

function updateProfileCard() {
  var myProspects = prospects.filter(function(p) { return p.assigned_to === currentUser.id; });
  var closed = myProspects.filter(function(p) { return p.status === 'æˆç´„'; }).length;
  var nego = myProspects.filter(function(p) { return p.status === 'å•†è«‡ä¸­'; }).length;
  var prospect = myProspects.filter(function(p) { return p.status === 'è¦‹è¾¼ã¿'; }).length;
  
  document.getElementById('profileClosed').textContent = closed;
  document.getElementById('profileNego').textContent = nego;
  var prospectEl = document.getElementById('profileProspect');
  if (prospectEl) prospectEl.textContent = prospect;
  
  // å£²ä¸Šé«˜ã‚’è¨ˆç®—ãƒ»è¡¨ç¤ºï¼ˆæˆç´„æ•° Ã— 500ä¸‡å††ï¼‰
  var sales = closed * 5000000;
  var salesText = sales >= 100000000 ? (sales / 100000000).toFixed(1) + 'å„„å††' : (sales / 10000).toLocaleString() + 'ä¸‡å††';
  if (sales === 0) salesText = 'Â¥0';
  else salesText = 'Â¥' + salesText.replace('Â¥', '');
  
  var salesEl = document.getElementById('profileSales');
  var closedCountEl = document.getElementById('profileClosedCount');
  if (salesEl) salesEl.textContent = sales > 0 ? (sales / 10000).toLocaleString() + 'ä¸‡å††' : 'Â¥0';
  if (closedCountEl) closedCountEl.textContent = closed;
  
  // ãƒ¬ãƒ™ãƒ«è¨ˆç®—ï¼ˆæˆç´„æ•°ãƒ™ãƒ¼ã‚¹ï¼‰
  var level = getLevelInfo(closed);
  document.getElementById('levelText').textContent = 'Lv.' + level.level + ' ' + level.title;
  
  // ãƒ©ãƒ³ã‚­ãƒ³ã‚°è¨ˆç®—
  var rankData = calculateRanking();
  var myRank = rankData.findIndex(function(r) { return r.id === currentUser.id; }) + 1;
  document.getElementById('profileRank').textContent = myRank > 0 ? myRank + 'ä½' : '-';
  
  // ãƒãƒƒã‚¸ç”Ÿæˆ
  updateBadges(closed, nego + prospect, myProspects.length);
}

function getLevelInfo(closedCount) {
  var levels = [
    { min: 0, level: 1, title: 'æ–°äººå–¶æ¥­' },
    { min: 1, level: 2, title: 'è¦‹ç¿’ã„å–¶æ¥­' },
    { min: 3, level: 3, title: 'ä¸€äººå‰å–¶æ¥­' },
    { min: 5, level: 4, title: 'ãƒ™ãƒ†ãƒ©ãƒ³å–¶æ¥­' },
    { min: 10, level: 5, title: 'å–¶æ¥­ãƒã‚¹ã‚¿ãƒ¼' },
    { min: 20, level: 6, title: 'å–¶æ¥­ã‚¨ã‚­ã‚¹ãƒ‘ãƒ¼ãƒˆ' },
    { min: 50, level: 7, title: 'ãƒ¬ã‚¸ã‚§ãƒ³ãƒ‰' }
  ];
  for (var i = levels.length - 1; i >= 0; i--) {
    if (closedCount >= levels[i].min) return levels[i];
  }
  return levels[0];
}

function updateBadges(closed, nego, total) {
  var badges = [];
  
  // æˆç´„ãƒãƒƒã‚¸
  if (closed >= 1) badges.push({ icon: 'ğŸ¥‰', text: 'åˆæˆç´„' });
  if (closed >= 5) badges.push({ icon: 'ğŸ¥ˆ', text: '5ç¤¾é”æˆ' });
  if (closed >= 10) badges.push({ icon: 'ğŸ¥‡', text: '10ç¤¾é”æˆ' });
  if (closed >= 20) badges.push({ icon: 'ğŸ‘‘', text: '20ç¤¾é”æˆ' });
  
  // å•†è«‡ãƒãƒƒã‚¸
  if (nego >= 3) badges.push({ icon: 'ğŸ”¥', text: 'å•†è«‡ç‹' });
  
  // æ‹…å½“ãƒãƒƒã‚¸
  if (total >= 10) badges.push({ icon: 'ğŸ“‹', text: 'æ‹…å½“10ç¤¾' });
  if (total >= 30) badges.push({ icon: 'ğŸŒŸ', text: 'æ‹…å½“30ç¤¾' });
  
  var html = '';
  badges.forEach(function(b) {
    html += '<div class="achievement-badge"><span>' + b.icon + '</span><span>' + b.text + '</span></div>';
  });
  
  // æœªç²å¾—ãƒãƒƒã‚¸ï¼ˆãƒ’ãƒ³ãƒˆï¼‰
  if (closed < 1) html += '<div class="achievement-badge locked"><span>ğŸ”’</span><span>åˆæˆç´„ã§è§£æ”¾</span></div>';
  
  document.getElementById('badgeCollection').innerHTML = html;
}

function calculateRanking() {
  var counts = [];
  members.forEach(function(m) {
    var mp = prospects.filter(function(p) { return p.assigned_to === m.id; });
    var closed = mp.filter(function(p) { return p.status === 'æˆç´„'; }).length;
    var nego = mp.filter(function(p) { return p.status === 'å•†è«‡ä¸­' || p.status === 'è¦‹è¾¼ã¿'; }).length;
    counts.push({ id: m.id, name: m.name, closed: closed, nego: nego, score: closed * 10 + nego });
  });
  counts.sort(function(a, b) { return b.score - a.score; });
  return counts;
}

function updateMotivation() {
  var myProspects = prospects.filter(function(p) { return p.assigned_to === currentUser.id; });
  var closed = myProspects.filter(function(p) { return p.status === 'æˆç´„'; }).length;
  var closedTarget = myGoal ? myGoal.closed_goal : 0;
  var remaining = closedTarget - closed;
  
  var messages = [];
  var hour = new Date().getHours();
  
  if (hour < 12) {
    messages.push({ icon: 'â˜€ï¸', main: 'ãŠã¯ã‚ˆã†ã”ã–ã„ã¾ã™ï¼', sub: 'ä»Šæ—¥ã‚‚1æ—¥é ‘å¼µã‚Šã¾ã—ã‚‡ã†' });
  } else if (hour < 18) {
    messages.push({ icon: 'ğŸ’ª', main: 'åˆå¾Œã‚‚é ‘å¼µã‚Šã¾ã—ã‚‡ã†ï¼', sub: 'ã‚‚ã†ã²ã¨è¸ã‚“å¼µã‚Š' });
  } else {
    messages.push({ icon: 'ğŸŒ™', main: 'ãŠç–²ã‚Œæ§˜ã§ã™ï¼', sub: 'ä»Šæ—¥ã®æŒ¯ã‚Šè¿”ã‚Šã‚’ã—ã¾ã—ã‚‡ã†' });
  }
  
  if (closedTarget > 0) {
    if (remaining <= 0) {
      messages = [{ icon: 'ğŸ‰', main: 'ç›®æ¨™é”æˆãŠã‚ã§ã¨ã†ï¼', sub: 'ç´ æ™´ã‚‰ã—ã„æˆæœã§ã™ï¼æ¬¡ã®ç›®æ¨™ã«æŒ‘æˆ¦ã—ã¾ã—ã‚‡ã†' }];
    } else if (remaining === 1) {
      messages = [{ icon: 'ğŸ”¥', main: 'ã‚ã¨1ç¤¾ã§ç›®æ¨™é”æˆï¼', sub: 'æœ€å¾Œã®ä¸€æŠ¼ã—ã€é ‘å¼µã‚Œï¼' }];
    } else if (remaining <= 3) {
      messages = [{ icon: 'âœ¨', main: 'ã‚ã¨' + remaining + 'ç¤¾ã§ç›®æ¨™é”æˆï¼', sub: 'ã‚´ãƒ¼ãƒ«ã¯ã™ããã“ï¼' }];
    } else {
      var rate = Math.round((closed / closedTarget) * 100);
      if (rate >= 50) {
        messages = [{ icon: 'ğŸ“ˆ', main: 'é †èª¿ã«é€²ã‚“ã§ã„ã¾ã™ï¼', sub: 'é”æˆç‡' + rate + '%ã€ã“ã®èª¿å­ï¼' }];
      }
    }
  }
  
  // ãƒ©ãƒ³ã‚­ãƒ³ã‚°ãƒ¡ãƒƒã‚»ãƒ¼ã‚¸
  var rankData = calculateRanking();
  var myRank = rankData.findIndex(function(r) { return r.id === currentUser.id; }) + 1;
  if (myRank === 1) {
    messages = [{ icon: 'ğŸ‘‘', main: 'ç¾åœ¨1ä½ï¼ãƒˆãƒƒãƒ—ã‚’ã‚­ãƒ¼ãƒ—ï¼', sub: 'ãƒãƒ¼ãƒ ã‚’å¼•ã£å¼µã£ã¦ã„ã¾ã™' }];
  } else if (myRank === 2) {
    messages.push({ icon: 'ğŸ¥ˆ', main: 'ç¾åœ¨2ä½ï¼1ä½ã¾ã§ã‚ã¨å°‘ã—', sub: 'è¿½ã„ä¸Šã’ã¦ã„ãã¾ã—ã‚‡ã†' });
  }
  
  var msg = messages[Math.floor(Math.random() * messages.length)];
  document.getElementById('motivationIcon').textContent = msg.icon;
  document.getElementById('motivationMain').textContent = msg.main;
  document.getElementById('motivationSub').textContent = msg.sub;
}

// ==================== ä¸¦ã³æ›¿ãˆæ©Ÿèƒ½ ====================
var sortMode = false;
var defaultSectionOrder = ['sales', 'motivation', 'progress', 'schedule', 'goal', 'prospects', 'todo'];
var sectionLabels = {
  'sales': { icon: 'ğŸ’°', name: 'å£²ä¸Šé«˜' },
  'motivation': { icon: 'ğŸ’ª', name: 'åŠ±ã¾ã—ãƒ¡ãƒƒã‚»ãƒ¼ã‚¸' },
  'progress': { icon: 'ğŸ“Š', name: 'é€²æ—ã‚µãƒãƒªãƒ¼' },
  'schedule': { icon: 'ğŸ“…', name: 'ä»Šæ—¥ã®äºˆå®š' },
  'goal': { icon: 'ğŸ¯', name: 'ä»Šæœˆã®ç›®æ¨™' },
  'prospects': { icon: 'ğŸ¢', name: 'æ‹…å½“ä¼šç¤¾' },
  'todo': { icon: 'ğŸ“‹', name: 'TODO' }
};

function getSavedOrder() {
  try {
    var saved = localStorage.getItem('homeSectionOrder');
    if (saved) {
      var order = JSON.parse(saved);
      // å…¨ã¦ã®ã‚»ã‚¯ã‚·ãƒ§ãƒ³ãŒå«ã¾ã‚Œã¦ã„ã‚‹ã‹ç¢ºèª
      var valid = defaultSectionOrder.every(function(s) { return order.indexOf(s) >= 0; });
      if (valid) return order;
    }
  } catch (e) {}
  return defaultSectionOrder.slice();
}

function saveSectionOrder(order) {
  try {
    localStorage.setItem('homeSectionOrder', JSON.stringify(order));
  } catch (e) {}
}

function applySectionOrder() {
  var order = getSavedOrder();
  var container = document.getElementById('sortableContainer');
  if (!container) return;
  
  order.forEach(function(sectionId) {
    var item = container.querySelector('[data-section="' + sectionId + '"]');
    if (item) container.appendChild(item);
  });
}

function toggleSortMode() {
  sortMode = !sortMode;
  var container = document.getElementById('sortableContainer');
  var btn = document.getElementById('sortModeBtn');
  var icon = document.getElementById('sortModeIcon');
  var text = document.getElementById('sortModeText');
  
  if (sortMode) {
    container.classList.add('sort-mode');
    icon.textContent = 'âœ“';
    text.textContent = 'å®Œäº†';
    btn.classList.remove('btn-secondary');
    btn.classList.add('btn-primary');
    initDragAndDrop();
  } else {
    container.classList.remove('sort-mode');
    icon.textContent = 'âš™ï¸';
    text.textContent = 'ä¸¦ã³æ›¿ãˆ';
    btn.classList.remove('btn-primary');
    btn.classList.add('btn-secondary');
    // é †åºã‚’ä¿å­˜
    var items = container.querySelectorAll('.sortable-item');
    var order = [];
    items.forEach(function(item) {
      var section = item.getAttribute('data-section');
      if (section) order.push(section);
    });
    saveSectionOrder(order);
  }
}

function initDragAndDrop() {
  var container = document.getElementById('sortableContainer');
  var items = container.querySelectorAll('.sortable-item');
  var draggedItem = null;
  
  items.forEach(function(item) {
    item.setAttribute('draggable', 'true');
    
    item.ondragstart = function(e) {
      draggedItem = this;
      this.classList.add('dragging');
      e.dataTransfer.effectAllowed = 'move';
    };
    
    item.ondragend = function(e) {
      this.classList.remove('dragging');
      items.forEach(function(i) { i.classList.remove('drag-over'); });
      draggedItem = null;
    };
    
    item.ondragover = function(e) {
      e.preventDefault();
      if (this !== draggedItem) {
        this.classList.add('drag-over');
      }
    };
    
    item.ondragleave = function(e) {
      this.classList.remove('drag-over');
    };
    
    item.ondrop = function(e) {
      e.preventDefault();
      this.classList.remove('drag-over');
      if (draggedItem && this !== draggedItem) {
        var allItems = Array.from(container.querySelectorAll('.sortable-item'));
        var fromIndex = allItems.indexOf(draggedItem);
        var toIndex = allItems.indexOf(this);
        
        if (fromIndex < toIndex) {
          container.insertBefore(draggedItem, this.nextSibling);
        } else {
          container.insertBefore(draggedItem, this);
        }
      }
    };
  });
}

// ã‚¹ãƒãƒ›ç”¨ï¼šè¨­å®šç”»é¢ã§ã®ä¸¦ã³æ›¿ãˆ
function renderSortSettings() {
  var container = document.getElementById('sortSettingsList');
  if (!container) return;
  
  var order = getSavedOrder();
  var html = '';
  
  order.forEach(function(sectionId, index) {
    var label = sectionLabels[sectionId] || { icon: 'ğŸ“„', name: sectionId };
    html += '<div class="sort-list-item" data-section="' + sectionId + '">';
    html += '<div class="sort-list-icon">' + label.icon + '</div>';
    html += '<div class="sort-list-name">' + label.name + '</div>';
    html += '<div class="sort-list-arrows">';
    html += '<button onclick="moveSectionUp(\'' + sectionId + '\')" ' + (index === 0 ? 'disabled' : '') + '>â–²</button>';
    html += '<button onclick="moveSectionDown(\'' + sectionId + '\')" ' + (index === order.length - 1 ? 'disabled' : '') + '>â–¼</button>';
    html += '</div>';
    html += '</div>';
  });
  
  container.innerHTML = html;
}

function moveSectionUp(sectionId) {
  var order = getSavedOrder();
  var index = order.indexOf(sectionId);
  if (index > 0) {
    order.splice(index, 1);
    order.splice(index - 1, 0, sectionId);
    saveSectionOrder(order);
    renderSortSettings();
    applySectionOrder();
  }
}

function moveSectionDown(sectionId) {
  var order = getSavedOrder();
  var index = order.indexOf(sectionId);
  if (index < order.length - 1) {
    order.splice(index, 1);
    order.splice(index + 1, 0, sectionId);
    saveSectionOrder(order);
    renderSortSettings();
    applySectionOrder();
  }
}

function saveSortOrder() {
  alert('ä¸¦ã³æ›¿ãˆã‚’ä¿å­˜ã—ã¾ã—ãŸï¼');
  switchPage('more');
}

function resetSortOrder() {
  if (confirm('ãƒ‡ãƒ•ã‚©ãƒ«ãƒˆã®é †åºã«æˆ»ã—ã¾ã™ã‹ï¼Ÿ')) {
    saveSectionOrder(defaultSectionOrder.slice());
    renderSortSettings();
    applySectionOrder();
    alert('ãƒ‡ãƒ•ã‚©ãƒ«ãƒˆã«æˆ»ã—ã¾ã—ãŸ');
  }
}

// åˆæœŸåŒ–æ™‚ã«é †åºã‚’é©ç”¨
document.addEventListener('DOMContentLoaded', function() {
  setTimeout(applySectionOrder, 100);
});

function scrollToHelp(id) {
  var el = document.getElementById(id);
  if (el) {
    el.scrollIntoView({ behavior: 'smooth', block: 'start' });
  }
}

function esc(str) {
  if (!str) return '';
  var div = document.createElement('div');
  div.textContent = str;
  return div.innerHTML;
}

function formatDate(str) {
  if (!str) return '-';
  var d = new Date(str);
  return (d.getMonth() + 1) + '/' + d.getDate();
}

function formatDateTime(str) {
  if (!str) return '-';
  var d = new Date(str);
  return (d.getMonth() + 1) + '/' + d.getDate() + ' ' + d.getHours() + ':' + String(d.getMinutes()).padStart(2, '0');
}
</script>

</body>
</html>