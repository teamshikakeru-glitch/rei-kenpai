<!DOCTYPE html>
<html lang="ja">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>ãƒ’ã‚¢ãƒªãƒ³ã‚°å›ç­”ç®¡ç† | ç¤¼ã‚«ã‚¹ã‚¿ãƒ </title>
<link href="https://fonts.googleapis.com/css2?family=Noto+Sans+JP:wght@300;400;500;700&family=Noto+Serif+JP:wght@400;700&display=swap" rel="stylesheet">
<script src="https://cdn.jsdelivr.net/npm/@supabase/supabase-js@2"></script>
<style>
  * { margin: 0; padding: 0; box-sizing: border-box; }
  :root {
    --gold: #c9a227; --gold-light: #fdf8e8; --bg: #faf8f5;
    --dark: #2d2d2d; --text: #444; --text-light: #888;
    --border: #e0dbd2; --white: #fff; --success: #4caf50; --error: #e53935;
  }
  body { font-family: 'Noto Sans JP', sans-serif; background: var(--bg); color: var(--text); min-height: 100vh; }

  /* Login */
  .login-screen { display: flex; align-items: center; justify-content: center; min-height: 100vh; padding: 20px; }
  .login-box { background: var(--white); border-radius: 16px; padding: 40px; max-width: 400px; width: 100%; box-shadow: 0 4px 20px rgba(0,0,0,0.08); text-align: center; }
  .login-box h1 { font-family: 'Noto Serif JP', serif; font-size: 22px; color: var(--dark); margin-bottom: 8px; }
  .login-box p { font-size: 13px; color: var(--text-light); margin-bottom: 24px; }
  .login-input { width: 100%; padding: 14px 18px; border: 1.5px solid var(--border); border-radius: 10px; font-size: 16px; font-family: 'Noto Sans JP'; text-align: center; letter-spacing: 8px; outline: none; }
  .login-input:focus { border-color: var(--gold); }
  .login-btn { width: 100%; padding: 14px; background: var(--gold); color: #fff; border: none; border-radius: 10px; font-size: 15px; font-weight: 700; cursor: pointer; margin-top: 16px; font-family: 'Noto Sans JP'; }
  .login-error { color: var(--error); font-size: 13px; margin-top: 12px; display: none; }

  /* Main */
  .main-screen { display: none; }
  .header { background: linear-gradient(135deg, #1a1a2e, #16213e); padding: 20px 24px; display: flex; align-items: center; justify-content: space-between; }
  .header-title { font-family: 'Noto Serif JP', serif; color: #fff; font-size: 18px; }
  .header-badge { background: var(--gold); color: #fff; padding: 4px 14px; border-radius: 20px; font-size: 13px; font-weight: 700; }
  .header-logout { color: rgba(255,255,255,0.5); font-size: 13px; cursor: pointer; border: none; background: none; font-family: 'Noto Sans JP'; }

  /* Response list */
  .content { max-width: 1100px; margin: 0 auto; padding: 24px 16px; }
  .stats-row { display: grid; grid-template-columns: repeat(auto-fit, minmax(150px, 1fr)); gap: 12px; margin-bottom: 24px; }
  .stat-card { background: var(--white); border-radius: 12px; padding: 18px; text-align: center; border: 1px solid var(--border); }
  .stat-num { font-size: 28px; font-weight: 700; color: var(--gold); }
  .stat-label { font-size: 12px; color: var(--text-light); margin-top: 4px; }

  .response-card {
    background: var(--white); border-radius: 12px; padding: 20px 24px;
    margin-bottom: 12px; border: 1px solid var(--border);
    cursor: pointer; transition: box-shadow 0.2s;
  }
  .response-card:hover { box-shadow: 0 4px 16px rgba(0,0,0,0.08); }
  .response-card.unread { border-left: 4px solid var(--gold); }
  .response-top { display: flex; align-items: center; justify-content: space-between; margin-bottom: 8px; }
  .response-company { font-size: 16px; font-weight: 700; color: var(--dark); }
  .response-date { font-size: 12px; color: var(--text-light); }
  .response-meta { display: flex; gap: 12px; flex-wrap: wrap; }
  .response-tag { font-size: 12px; padding: 3px 10px; border-radius: 12px; background: #f0f0f0; color: var(--text); }
  .response-tag.unread-tag { background: var(--gold-light); color: var(--gold); font-weight: 500; }

  /* Detail modal */
  .modal-overlay {
    display: none; position: fixed; top: 0; left: 0; right: 0; bottom: 0;
    background: rgba(0,0,0,0.5); z-index: 100; overflow-y: auto; padding: 20px;
  }
  .modal-overlay.show { display: flex; align-items: flex-start; justify-content: center; }
  .modal {
    background: var(--white); border-radius: 16px; max-width: 800px; width: 100%;
    margin: 40px auto; overflow: hidden; position: relative;
  }
  .modal-header {
    background: linear-gradient(135deg, #1a1a2e, #16213e);
    padding: 24px; display: flex; align-items: center; justify-content: space-between;
  }
  .modal-header h2 { font-family: 'Noto Serif JP', serif; color: #fff; font-size: 20px; }
  .modal-close { background: none; border: none; color: rgba(255,255,255,0.6); font-size: 28px; cursor: pointer; padding: 0 8px; }
  .modal-body { padding: 24px; max-height: 70vh; overflow-y: auto; }

  .detail-section { margin-bottom: 28px; }
  .detail-section-title {
    font-size: 14px; font-weight: 700; color: var(--gold);
    padding-bottom: 8px; border-bottom: 2px solid var(--gold-light);
    margin-bottom: 14px; display: flex; align-items: center; gap: 8px;
  }
  .detail-row { display: grid; grid-template-columns: 180px 1fr; gap: 8px; padding: 8px 0; border-bottom: 1px solid #f5f5f5; }
  .detail-label { font-size: 13px; color: var(--text-light); font-weight: 500; }
  .detail-value { font-size: 14px; color: var(--dark); line-height: 1.7; }
  .detail-value.empty { color: #ccc; font-style: italic; }

  /* Notes */
  .notes-section { margin-top: 24px; padding-top: 20px; border-top: 2px solid var(--border); }
  .notes-section h3 { font-size: 14px; color: var(--dark); margin-bottom: 10px; }
  .notes-textarea { width: 100%; padding: 12px; border: 1.5px solid var(--border); border-radius: 10px; font-family: 'Noto Sans JP'; font-size: 14px; min-height: 80px; outline: none; resize: vertical; }
  .notes-textarea:focus { border-color: var(--gold); }
  .notes-actions { display: flex; gap: 10px; margin-top: 10px; }
  .notes-btn { padding: 10px 24px; border-radius: 8px; font-family: 'Noto Sans JP'; font-size: 13px; font-weight: 700; cursor: pointer; border: none; }
  .notes-btn.save { background: var(--gold); color: #fff; }
  .notes-btn.mark-read { background: var(--success); color: #fff; }

  .empty-state { text-align: center; padding: 60px 20px; color: var(--text-light); }
  .empty-state .icon { font-size: 48px; margin-bottom: 16px; }

  /* ID recommendation */
  .recommend-section { margin-top: 20px; padding: 16px; background: var(--gold-light); border-radius: 12px; }
  .recommend-section h4 { font-size: 13px; color: var(--gold); margin-bottom: 8px; }
  .recommend-ids { display: flex; flex-wrap: wrap; gap: 6px; }
  .recommend-id { padding: 4px 12px; background: var(--white); border: 1px solid var(--gold); border-radius: 16px; font-size: 12px; color: var(--gold); font-weight: 500; }

  @media (max-width: 600px) {
    .detail-row { grid-template-columns: 1fr; }
    .detail-label { font-weight: 700; color: var(--dark); }
    .stats-row { grid-template-columns: repeat(2, 1fr); }
  }
</style>
</head>
<body>

<!-- Login screen -->
<div class="login-screen" id="loginScreen">
  <div class="login-box">
    <h1>ãƒ’ã‚¢ãƒªãƒ³ã‚°å›ç­”ç®¡ç†</h1>
    <p>ãƒ‘ã‚¹ãƒ¯ãƒ¼ãƒ‰ã‚’å…¥åŠ›ã—ã¦ãã ã•ã„</p>
    <input type="password" class="login-input" id="loginPassword" maxlength="4" placeholder="â€¢â€¢â€¢â€¢">
    <button class="login-btn" onclick="doLogin()">ãƒ­ã‚°ã‚¤ãƒ³</button>
    <div class="login-error" id="loginError">ãƒ‘ã‚¹ãƒ¯ãƒ¼ãƒ‰ãŒé•ã„ã¾ã™</div>
  </div>
</div>

<!-- Main screen -->
<div class="main-screen" id="mainScreen">
  <div class="header">
    <div class="header-title">ğŸ“‹ ãƒ’ã‚¢ãƒªãƒ³ã‚°å›ç­”ç®¡ç†</div>
    <div style="display:flex;align-items:center;gap:16px;">
      <div class="header-badge" id="totalBadge">0ä»¶</div>
      <button class="header-logout" onclick="location.reload()">ãƒ­ã‚°ã‚¢ã‚¦ãƒˆ</button>
    </div>
  </div>

  <div class="content">
    <div class="stats-row" id="statsRow"></div>
    <div id="responseList"></div>
  </div>
</div>

<!-- Detail modal -->
<div class="modal-overlay" id="modalOverlay">
  <div class="modal">
    <div class="modal-header">
      <h2 id="modalTitle">å›ç­”è©³ç´°</h2>
      <button class="modal-close" onclick="closeModal()">Ã—</button>
    </div>
    <div class="modal-body" id="modalBody"></div>
  </div>
</div>

<script>
var SUPABASE_URL = 'https://osyysvompcfuadlnuojs.supabase.co';
var SUPABASE_KEY = 'eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6Im9zeXlzdm9tcGNmdWFkbG51b2pzIiwicm9sZSI6ImFub24iLCJpYXQiOjE3MzYzMTQ0NjksImV4cCI6MjA1MTg5MDQ2OX0.a1C8R5Ry5x6fBSnSloTTqOmOIkuMOp7W5YLaXbITvOE';
var sb = window.supabase.createClient(SUPABASE_URL, SUPABASE_KEY);
var responses = [];

var PASSWORD = '1123';

// Question labels mapping
var QUESTIONS = {
  q1_estimate_method: 'è¦‹ç©æ›¸ã®ä½œæˆæ–¹æ³•',
  q2_estimate_time: 'è¦‹ç©ä½œæˆã«ã‹ã‹ã‚‹æ™‚é–“',
  q3_plan_types: 'ãƒ—ãƒ©ãƒ³ã®ç¨®é¡æ•°',
  q4_option_trouble: 'ã‚ªãƒ—ã‚·ãƒ§ãƒ³è¦‹ç©ã®å›°ã‚Šã”ã¨',
  q5_cost_management: 'åŸä¾¡ãƒ»ç²—åˆ©ã®ç®¡ç†è€…',
  q6_discount_rules: 'å€¤å¼•ããƒ«ãƒ¼ãƒ«',
  q7_customer_management: 'é¡§å®¢æƒ…å ±ã®ç®¡ç†æ–¹æ³•',
  q8_past_records: 'éå»ã®æ–½è¡Œè¨˜éŒ²ã®ç¢ºèª',
  q9_handover_trouble: 'å¼•ãç¶™ãã®å›°ã‚Šã”ã¨',
  q10_alert_sharing: 'æ³¨æ„é¡§å®¢ã®å…±æœ‰æ–¹æ³•',
  q11_search_needs: 'é¡§å®¢æ¤œç´¢ã®ãƒ‹ãƒ¼ã‚º',
  q12_shift_method: 'ã‚·ãƒ•ãƒˆã®æ±ºã‚æ–¹',
  q13_absence_flow: 'æ¬ å‹¤æ™‚ã®å¯¾å¿œ',
  q14_staffing_trouble: 'ã‚¹ã‚¿ãƒƒãƒ•é…ç½®ã®å›°ã‚Šã”ã¨',
  q15_external_staff: 'å¤–æ³¨ã‚¹ã‚¿ãƒƒãƒ•ã®åˆ©ç”¨',
  q16_forgotten_tasks: 'å¿˜ã‚ŒãŒã¡ãªæº–å‚™',
  q17_memorial_follow: 'æ³•è¦ãƒ•ã‚©ãƒ­ãƒ¼ã®çŠ¶æ³',
  q18_invitation_sending: 'æ¡ˆå†…çŠ¶ã®é€ä»˜',
  q19_follow_leak: 'ãƒ•ã‚©ãƒ­ãƒ¼æ¼ã‚Œã®æ‡¸å¿µ',
  q20_follow_assignee: 'ãƒ•ã‚©ãƒ­ãƒ¼æ‹…å½“ã®æœ‰ç„¡',
  q21_stats_tracking: 'å£²ä¸Šãƒ»ä»¶æ•°ã®æŠŠæ¡',
  q22_staff_performance: 'æ‹…å½“è€…åˆ¥å®Ÿç¸¾ã®ç¢ºèª',
  q23_pricing_analytics: 'å€¤å¼•ãç‡ãƒ»å¹³å‡å˜ä¾¡',
  q24_owner_only_data: 'ç¤¾é•·ã ã‘è¦‹ãŸã„æ•°å­—',
  q25_restricted_info: 'è¦‹ã›ãŸããªã„æƒ…å ±',
  q26_payment_trouble: 'å…¥é‡‘ç®¡ç†ã®å›°ã‚Šã”ã¨',
  q27_donor_list: 'çŒ®æ¯è€…ãƒªã‚¹ãƒˆã®æä¾›',
  q28_remote_guide: 'é æ–¹å‚åˆ—è€…ã¸ã®æ¡ˆå†…',
  q29_mobile_needs: 'ã‚¹ãƒãƒ›å…¥åŠ›ã®ãƒ‹ãƒ¼ã‚º',
  q30_file_trouble: 'å†™çœŸãƒ»æ›¸é¡ç®¡ç†',
  q31_templates: 'å®šå‹æ–‡ã®æœ‰ç„¡',
  q32_activity_log: 'æ“ä½œãƒ­ã‚°ã®å¿…è¦æ€§',
  q33_input_errors: 'å…¥åŠ›ãƒŸã‚¹ãŒèµ·ãã‚„ã™ã„ä½œæ¥­'
};

var SECTIONS = [
  { title: 'ğŸ“‹ è¦‹ç©ãƒ»å£²ä¸Šã¾ã‚ã‚Š', keys: ['q1_estimate_method','q2_estimate_time','q3_plan_types','q4_option_trouble','q5_cost_management','q6_discount_rules'] },
  { title: 'ğŸ‘¤ é¡§å®¢ãƒ»æ–½ä¸»ç®¡ç†', keys: ['q7_customer_management','q8_past_records','q9_handover_trouble','q10_alert_sharing','q11_search_needs'] },
  { title: 'ğŸ”§ ç¾å ´ã‚ªãƒšãƒ¬ãƒ¼ã‚·ãƒ§ãƒ³', keys: ['q12_shift_method','q13_absence_flow','q14_staffing_trouble','q15_external_staff','q16_forgotten_tasks'] },
  { title: 'ğŸ•Š æ³•è¦ãƒ»ã‚¢ãƒ•ã‚¿ãƒ¼ãƒ•ã‚©ãƒ­ãƒ¼', keys: ['q17_memorial_follow','q18_invitation_sending','q19_follow_leak','q20_follow_assignee'] },
  { title: 'ğŸ“Š çµŒå–¶ãƒ»æ•°å­—ã®ç®¡ç†', keys: ['q21_stats_tracking','q22_staff_performance','q23_pricing_analytics','q24_owner_only_data','q25_restricted_info'] },
  { title: 'ğŸ”— ç¤¼ã¨ã®é€£æº', keys: ['q26_payment_trouble','q27_donor_list','q28_remote_guide'] },
  { title: 'ğŸ’¡ ç¾å ´ã®å›°ã‚Šã”ã¨', keys: ['q29_mobile_needs','q30_file_trouble','q31_templates','q32_activity_log','q33_input_errors'] }
];

// Recommend feature IDs based on answers
function getRecommendedIds(r) {
  var ids = [];
  if (r.q1_estimate_method === 'æ‰‹æ›¸ã' || r.q1_estimate_method === 'Excel') ids.push('E1');
  if (r.q4_option_trouble) ids.push('E2');
  if (r.q5_cost_management === 'ç¤¾é•·ã®ã¿') ids.push('E3');
  if (r.q6_discount_rules) ids.push('E5');
  if (r.q7_customer_management === 'ç´™ã®å°å¸³' || r.q7_customer_management === 'ç‰¹ã«ç®¡ç†ã—ã¦ã„ãªã„') ids.push('C1');
  if (r.q8_past_records) ids.push('C2');
  if (r.q9_handover_trouble) ids.push('C3');
  if (r.q10_alert_sharing === 'ç‰¹ã«å…±æœ‰ã—ã¦ã„ãªã„') ids.push('C4');
  if (r.q11_search_needs) ids.push('C5');
  if (r.q12_shift_method) ids.push('O1');
  if (r.q13_absence_flow) ids.push('O2');
  if (r.q15_external_staff === 'ã‚ˆãä½¿ã†') ids.push('O4');
  if (r.q16_forgotten_tasks) ids.push('O5');
  if (r.q17_memorial_follow === 'æ™‚ã€…å¿˜ã‚Œã‚‹' || r.q17_memorial_follow === 'ã—ã¦ã„ãªã„') ids.push('F1');
  if (r.q19_follow_leak) ids.push('F5');
  if (r.q21_stats_tracking === 'æŠŠæ¡ã§ãã¦ã„ãªã„') ids.push('M1');
  if (r.q22_staff_performance) ids.push('M2');
  if (r.q24_owner_only_data) ids.push('M4');
  if (r.q25_restricted_info) ids.push('M5');
  if (r.q26_payment_trouble) ids.push('R2');
  if (r.q29_mobile_needs) ids.push('U1');
  if (r.q30_file_trouble) ids.push('U2');
  return ids;
}

function doLogin() {
  var pw = document.getElementById('loginPassword').value;
  if (pw === PASSWORD) {
    document.getElementById('loginScreen').style.display = 'none';
    document.getElementById('mainScreen').style.display = 'block';
    loadResponses();
  } else {
    document.getElementById('loginError').style.display = 'block';
  }
}

document.getElementById('loginPassword').addEventListener('keydown', function(e) {
  if (e.key === 'Enter') doLogin();
});

async function loadResponses() {
  var result = await sb.from('hearing_responses').select('*').order('created_at', { ascending: false });
  if (result.error) { console.error(result.error); return; }
  responses = result.data || [];
  renderStats();
  renderList();
}

function renderStats() {
  var total = responses.length;
  var unread = responses.filter(function(r) { return !r.is_read; }).length;
  var thisMonth = responses.filter(function(r) {
    var d = new Date(r.created_at);
    var now = new Date();
    return d.getMonth() === now.getMonth() && d.getFullYear() === now.getFullYear();
  }).length;

  document.getElementById('totalBadge').textContent = total + 'ä»¶';
  document.getElementById('statsRow').innerHTML =
    '<div class="stat-card"><div class="stat-num">' + total + '</div><div class="stat-label">ç·å›ç­”æ•°</div></div>' +
    '<div class="stat-card"><div class="stat-num" style="color:var(--error)">' + unread + '</div><div class="stat-label">æœªç¢ºèª</div></div>' +
    '<div class="stat-card"><div class="stat-num">' + thisMonth + '</div><div class="stat-label">ä»Šæœˆã®å›ç­”</div></div>';
}

function renderList() {
  var html = '';
  if (responses.length === 0) {
    html = '<div class="empty-state"><div class="icon">ğŸ“­</div><p>ã¾ã å›ç­”ãŒã‚ã‚Šã¾ã›ã‚“</p></div>';
  }
  responses.forEach(function(r, i) {
    var date = new Date(r.created_at);
    var dateStr = date.getFullYear() + '/' + (date.getMonth()+1) + '/' + date.getDate() + ' ' + date.getHours() + ':' + String(date.getMinutes()).padStart(2,'0');
    var unreadClass = r.is_read ? '' : ' unread';
    var unreadTag = r.is_read ? '' : '<span class="response-tag unread-tag">æœªç¢ºèª</span>';
    var casesTag = r.monthly_cases ? '<span class="response-tag">' + r.monthly_cases + '</span>' : '';
    html += '<div class="response-card' + unreadClass + '" onclick="showDetail(' + i + ')">' +
      '<div class="response-top"><div class="response-company">' + (r.company_name || 'åç§°æœªå…¥åŠ›') + '</div><div class="response-date">' + dateStr + '</div></div>' +
      '<div class="response-meta">' + unreadTag + casesTag + (r.contact_name ? '<span class="response-tag">æ‹…å½“: ' + r.contact_name + '</span>' : '') + '</div></div>';
  });
  document.getElementById('responseList').innerHTML = html;
}

function showDetail(index) {
  var r = responses[index];
  document.getElementById('modalTitle').textContent = r.company_name || 'å›ç­”è©³ç´°';

  var html = '';

  // Basic info
  html += '<div class="detail-section"><div class="detail-section-title">ğŸ¢ åŸºæœ¬æƒ…å ±</div>';
  html += detailRow('è‘¬å„€ç¤¾å', r.company_name);
  html += detailRow('ã”æ‹…å½“è€…å', r.contact_name);
  html += detailRow('æœˆé–“æ–½è¡Œä»¶æ•°', r.monthly_cases);
  html += detailRow('ã‚¹ã‚¿ãƒƒãƒ•äººæ•°', r.staff_count);
  html += detailRow('ç¾åœ¨ã®ã‚·ã‚¹ãƒ†ãƒ ', r.current_system);
  html += '</div>';

  // Question sections
  SECTIONS.forEach(function(sec) {
    html += '<div class="detail-section"><div class="detail-section-title">' + sec.title + '</div>';
    sec.keys.forEach(function(key) {
      html += detailRow(QUESTIONS[key], r[key]);
    });
    html += '</div>';
  });

  // Priority
  html += '<div class="detail-section"><div class="detail-section-title">â­ å„ªå…ˆèª²é¡Œ</div>';
  html += detailRow('ç¬¬1å„ªå…ˆ', r.priority_1);
  html += detailRow('ç¬¬2å„ªå…ˆ', r.priority_2);
  html += detailRow('ç¬¬3å„ªå…ˆ', r.priority_3);
  html += detailRow('è‡ªç”±ã‚³ãƒ¡ãƒ³ãƒˆ', r.free_comment);
  html += '</div>';

  // Recommended IDs
  var recIds = getRecommendedIds(r);
  if (recIds.length > 0) {
    html += '<div class="recommend-section"><h4>ğŸ’¡ å›ç­”ã‹ã‚‰æ¨æ¸¬ã•ã‚Œã‚‹æ¨å¥¨æ©Ÿèƒ½ID</h4><div class="recommend-ids">';
    recIds.forEach(function(id) { html += '<span class="recommend-id">' + id + '</span>'; });
    html += '</div></div>';
  }

  // Notes
  html += '<div class="notes-section"><h3>ğŸ“ ç®¡ç†è€…ãƒ¡ãƒ¢</h3>';
  html += '<textarea class="notes-textarea" id="notesInput" placeholder="ãƒ¡ãƒ¢ã‚’å…¥åŠ›...">' + (r.notes || '') + '</textarea>';
  html += '<div class="notes-actions">';
  html += '<button class="notes-btn save" onclick="saveNotes(\'' + r.id + '\')">ãƒ¡ãƒ¢ã‚’ä¿å­˜</button>';
  if (!r.is_read) {
    html += '<button class="notes-btn mark-read" onclick="markRead(\'' + r.id + '\', ' + index + ')">âœ“ ç¢ºèªæ¸ˆã¿ã«ã™ã‚‹</button>';
  }
  html += '</div></div>';

  document.getElementById('modalBody').innerHTML = html;
  document.getElementById('modalOverlay').classList.add('show');
}

function detailRow(label, value) {
  var valClass = value ? '' : ' empty';
  var valText = value || 'æœªå›ç­”';
  return '<div class="detail-row"><div class="detail-label">' + label + '</div><div class="detail-value' + valClass + '">' + valText + '</div></div>';
}

function closeModal() {
  document.getElementById('modalOverlay').classList.remove('show');
}

document.getElementById('modalOverlay').addEventListener('click', function(e) {
  if (e.target === this) closeModal();
});

async function saveNotes(id) {
  var notes = document.getElementById('notesInput').value;
  await sb.from('hearing_responses').update({ notes: notes }).eq('id', id);
  alert('ãƒ¡ãƒ¢ã‚’ä¿å­˜ã—ã¾ã—ãŸ');
}

async function markRead(id, index) {
  await sb.from('hearing_responses').update({ is_read: true }).eq('id', id);
  responses[index].is_read = true;
  renderStats();
  renderList();
  closeModal();
}
</script>
</body>
</html>