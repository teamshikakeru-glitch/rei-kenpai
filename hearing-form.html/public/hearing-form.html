<!DOCTYPE html>
<html lang="ja">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>ç¤¼ã‚«ã‚¹ã‚¿ãƒ  ãƒ’ã‚¢ãƒªãƒ³ã‚°ã‚·ãƒ¼ãƒˆ</title>
<link rel="preconnect" href="https://fonts.googleapis.com">
<link href="https://fonts.googleapis.com/css2?family=Noto+Sans+JP:wght@300;400;500;700&family=Noto+Serif+JP:wght@400;700&display=swap" rel="stylesheet">
<script src="https://cdn.jsdelivr.net/npm/@supabase/supabase-js@2"></script>
<style>
  * { margin: 0; padding: 0; box-sizing: border-box; }
  
  :root {
    --gold: #c9a227;
    --gold-light: #f5ecd0;
    --gold-bg: #fdf8e8;
    --bg: #faf8f5;
    --bg2: #f5f0e8;
    --dark: #2d2d2d;
    --text: #444;
    --text-light: #888;
    --border: #e0dbd2;
    --white: #ffffff;
    --success: #4caf50;
    --error: #e53935;
  }

  body {
    font-family: 'Noto Sans JP', sans-serif;
    background: linear-gradient(135deg, var(--bg) 0%, var(--bg2) 100%);
    color: var(--text);
    min-height: 100vh;
    line-height: 1.8;
  }

  /* Header */
  .header {
    background: linear-gradient(135deg, #1a1a2e 0%, #16213e 100%);
    padding: 40px 20px;
    text-align: center;
    position: relative;
    overflow: hidden;
  }
  .header::before {
    content: '';
    position: absolute;
    top: 0; left: 0; right: 0; bottom: 0;
    background: radial-gradient(ellipse at 30% 50%, rgba(201,162,39,0.15) 0%, transparent 60%);
  }
  .header-logo {
    display: inline-flex;
    align-items: center;
    gap: 10px;
    margin-bottom: 16px;
    position: relative;
  }
  .header-logo-icon {
    width: 40px; height: 40px;
    background: var(--gold);
    border-radius: 10px;
    display: flex; align-items: center; justify-content: center;
    font-family: 'Noto Serif JP', serif;
    font-weight: 700; font-size: 20px; color: #fff;
  }
  .header-logo-text {
    font-family: 'Noto Serif JP', serif;
    font-size: 18px; color: rgba(255,255,255,0.9);
    letter-spacing: 2px;
  }
  .header h1 {
    font-family: 'Noto Serif JP', serif;
    font-size: 28px; color: #fff;
    font-weight: 700; letter-spacing: 3px;
    position: relative; margin-bottom: 12px;
  }
  .header p {
    color: rgba(255,255,255,0.6);
    font-size: 14px; position: relative;
  }

  /* Container */
  .container {
    max-width: 720px;
    margin: 0 auto;
    padding: 0 16px 60px;
  }

  /* Intro */
  .intro {
    background: var(--white);
    border-radius: 16px;
    padding: 28px 24px;
    margin: -30px auto 24px;
    position: relative;
    box-shadow: 0 4px 20px rgba(0,0,0,0.06);
    border: 1px solid var(--border);
  }
  .intro p {
    font-size: 14px;
    color: var(--text);
    line-height: 2;
  }
  .intro strong { color: var(--dark); }
  .intro .time-note {
    display: inline-flex; align-items: center; gap: 6px;
    background: var(--gold-bg);
    padding: 6px 14px; border-radius: 20px;
    font-size: 13px; color: var(--gold);
    font-weight: 500; margin-top: 12px;
  }

  /* Section */
  .section {
    background: var(--white);
    border-radius: 16px;
    margin-bottom: 20px;
    overflow: hidden;
    box-shadow: 0 2px 12px rgba(0,0,0,0.04);
    border: 1px solid var(--border);
  }
  .section-header {
    background: linear-gradient(135deg, #1a1a2e 0%, #16213e 100%);
    padding: 18px 24px;
    display: flex; align-items: center; gap: 12px;
    cursor: pointer;
    user-select: none;
    transition: opacity 0.2s;
  }
  .section-header:hover { opacity: 0.9; }
  .section-icon {
    font-size: 22px;
    width: 40px; height: 40px;
    background: rgba(201,162,39,0.2);
    border-radius: 10px;
    display: flex; align-items: center; justify-content: center;
    flex-shrink: 0;
  }
  .section-title {
    font-family: 'Noto Serif JP', serif;
    font-size: 16px; color: #fff;
    font-weight: 700;
  }
  .section-subtitle {
    font-size: 12px; color: rgba(255,255,255,0.5);
    margin-top: 2px;
  }
  .section-toggle {
    margin-left: auto;
    color: rgba(255,255,255,0.4);
    font-size: 20px;
    transition: transform 0.3s;
  }
  .section.open .section-toggle { transform: rotate(180deg); }
  .section-body {
    max-height: 0;
    overflow: hidden;
    transition: max-height 0.4s ease;
  }
  .section.open .section-body {
    max-height: 3000px;
  }
  .section-inner {
    padding: 20px 24px 24px;
  }

  /* Question */
  .question {
    margin-bottom: 24px;
  }
  .question:last-child { margin-bottom: 0; }
  .question-label {
    display: flex; align-items: flex-start; gap: 8px;
    margin-bottom: 8px;
  }
  .question-num {
    background: var(--gold);
    color: #fff;
    font-size: 11px; font-weight: 700;
    width: 24px; height: 24px;
    border-radius: 6px;
    display: flex; align-items: center; justify-content: center;
    flex-shrink: 0;
    margin-top: 2px;
  }
  .question-text {
    font-size: 14px;
    font-weight: 500;
    color: var(--dark);
    line-height: 1.6;
  }
  .question-hint {
    font-size: 12px;
    color: var(--text-light);
    margin-left: 32px;
    margin-bottom: 8px;
  }

  /* Input styles */
  .input-wrap {
    margin-left: 32px;
  }
  textarea, input[type="text"] {
    width: 100%;
    padding: 12px 16px;
    border: 1.5px solid var(--border);
    border-radius: 10px;
    font-family: 'Noto Sans JP', sans-serif;
    font-size: 14px;
    color: var(--dark);
    background: var(--bg);
    transition: border-color 0.2s, box-shadow 0.2s;
    outline: none;
    resize: vertical;
  }
  textarea:focus, input[type="text"]:focus {
    border-color: var(--gold);
    box-shadow: 0 0 0 3px rgba(201,162,39,0.12);
    background: #fff;
  }
  textarea { min-height: 70px; }
  textarea.large { min-height: 120px; }

  /* Radio options */
  .radio-group {
    display: flex; flex-wrap: wrap; gap: 8px;
    margin-left: 32px;
  }
  .radio-option {
    position: relative;
  }
  .radio-option input {
    position: absolute; opacity: 0;
  }
  .radio-option label {
    display: block;
    padding: 8px 18px;
    border: 1.5px solid var(--border);
    border-radius: 20px;
    font-size: 13px;
    color: var(--text);
    cursor: pointer;
    transition: all 0.2s;
    background: var(--bg);
  }
  .radio-option input:checked + label {
    border-color: var(--gold);
    background: var(--gold-bg);
    color: var(--gold);
    font-weight: 500;
  }
  .radio-option label:hover {
    border-color: var(--gold);
  }

  /* Submit section */
  .submit-section {
    background: var(--white);
    border-radius: 16px;
    padding: 32px 24px;
    text-align: center;
    box-shadow: 0 2px 12px rgba(0,0,0,0.04);
    border: 1px solid var(--border);
    margin-top: 20px;
  }
  .submit-btn {
    display: inline-flex; align-items: center; gap: 8px;
    background: linear-gradient(135deg, var(--gold) 0%, #d4af37 100%);
    color: #fff;
    border: none;
    padding: 16px 48px;
    border-radius: 30px;
    font-family: 'Noto Sans JP', sans-serif;
    font-size: 16px;
    font-weight: 700;
    cursor: pointer;
    transition: transform 0.2s, box-shadow 0.2s;
    letter-spacing: 2px;
  }
  .submit-btn:hover {
    transform: translateY(-2px);
    box-shadow: 0 6px 20px rgba(201,162,39,0.3);
  }
  .submit-btn:active { transform: translateY(0); }
  .submit-btn:disabled {
    opacity: 0.5; cursor: not-allowed; transform: none;
  }
  .submit-note {
    font-size: 12px; color: var(--text-light);
    margin-top: 12px;
  }

  /* Progress */
  .progress-bar {
    position: fixed; top: 0; left: 0; right: 0;
    height: 3px; background: rgba(0,0,0,0.05);
    z-index: 100;
  }
  .progress-fill {
    height: 100%;
    background: linear-gradient(90deg, var(--gold), #d4af37);
    transition: width 0.3s;
    border-radius: 0 2px 2px 0;
  }

  /* Toast */
  .toast {
    position: fixed; bottom: 30px; left: 50%; transform: translateX(-50%);
    padding: 16px 32px; border-radius: 12px;
    color: #fff; font-size: 14px; font-weight: 500;
    z-index: 200; opacity: 0;
    transition: opacity 0.3s, transform 0.3s;
    pointer-events: none;
  }
  .toast.show {
    opacity: 1; transform: translateX(-50%) translateY(-10px);
  }
  .toast.success { background: var(--success); }
  .toast.error { background: var(--error); }

  /* Complete screen */
  .complete-screen {
    display: none;
    text-align: center;
    padding: 80px 24px;
  }
  .complete-screen.show { display: block; }
  .complete-icon {
    font-size: 64px; margin-bottom: 24px;
  }
  .complete-screen h2 {
    font-family: 'Noto Serif JP', serif;
    font-size: 24px; color: var(--dark);
    margin-bottom: 16px;
  }
  .complete-screen p {
    font-size: 14px; color: var(--text);
    line-height: 2;
  }

  /* Required mark */
  .required {
    color: var(--error);
    font-size: 11px;
    margin-left: 4px;
  }

  @media (max-width: 480px) {
    .header h1 { font-size: 22px; }
    .section-inner { padding: 16px; }
    .radio-group { gap: 6px; }
    .radio-option label { padding: 6px 14px; font-size: 12px; }
    .input-wrap, .radio-group, .question-hint { margin-left: 0; }
  }
</style>
</head>
<body>

<div class="progress-bar"><div class="progress-fill" id="progressFill" style="width:0%"></div></div>

<div class="header">
  <div class="header-logo">
    <div class="header-logo-icon">ç¤¼</div>
    <div class="header-logo-text">ç¤¼ ã‚«ã‚¹ã‚¿ãƒ </div>
  </div>
  <h1>ãƒ’ã‚¢ãƒªãƒ³ã‚°ã‚·ãƒ¼ãƒˆ</h1>
  <p>å¾¡ç¤¾ã®æ¥­å‹™æ”¹å–„ã«æœ€é©ãªã‚·ã‚¹ãƒ†ãƒ ã‚’ã”ææ¡ˆã™ã‚‹ãŸã‚ã®è³ªå•ã§ã™</p>
</div>

<div class="container" id="formContainer">

  <div class="intro">
    <p>ã“ã®ãƒ’ã‚¢ãƒªãƒ³ã‚°ã‚·ãƒ¼ãƒˆã¯ã€<strong>å¾¡ç¤¾ã«æœ€é©ãªæ¥­å‹™ã‚·ã‚¹ãƒ†ãƒ </strong>ã‚’ã”ææ¡ˆã™ã‚‹ãŸã‚ã®ã‚‚ã®ã§ã™ã€‚<br>
    ç¾åœ¨ã®æ¥­å‹™ã§ã€Œå›°ã£ã¦ã„ã‚‹ã“ã¨ã€ã€Œã‚‚ã£ã¨æ¥½ã«ã—ãŸã„ã“ã¨ã€ã‚’æ•™ãˆã¦ãã ã•ã„ã€‚<br>
    <strong>æ­£è§£ãƒ»ä¸æ­£è§£ã¯ã‚ã‚Šã¾ã›ã‚“ã€‚</strong>ç‡ç›´ãªã”æ„è¦‹ã‚’ãŠèã‹ã›ãã ã•ã„ã€‚</p>
    <div class="time-note">â± æ‰€è¦æ™‚é–“ï¼šç´„10ã€œ15åˆ†</div>
  </div>

  <form id="hearingForm">

    <!-- åŸºæœ¬æƒ…å ± -->
    <div class="section open">
      <div class="section-header" onclick="toggleSection(this)">
        <div class="section-icon">ğŸ¢</div>
        <div>
          <div class="section-title">åŸºæœ¬æƒ…å ±</div>
          <div class="section-subtitle">ã¾ãšã¯å¾¡ç¤¾ã«ã¤ã„ã¦æ•™ãˆã¦ãã ã•ã„</div>
        </div>
        <div class="section-toggle">â–¼</div>
      </div>
      <div class="section-body">
        <div class="section-inner">
          <div class="question">
            <div class="question-label">
              <div class="question-text">è‘¬å„€ç¤¾å<span class="required">â€»å¿…é ˆ</span></div>
            </div>
            <div class="input-wrap">
              <input type="text" name="company_name" required placeholder="ä¾‹ï¼šã€‡ã€‡è‘¬ç¥­">
            </div>
          </div>
          <div class="question">
            <div class="question-label">
              <div class="question-text">ã”æ‹…å½“è€…å</div>
            </div>
            <div class="input-wrap">
              <input type="text" name="contact_name" placeholder="ä¾‹ï¼šå±±ç”°å¤ªéƒ">
            </div>
          </div>
          <div class="question">
            <div class="question-label">
              <div class="question-text">æœˆé–“ã®æ–½è¡Œä»¶æ•°</div>
            </div>
            <div class="radio-group">
              <div class="radio-option"><input type="radio" name="monthly_cases" value="10ä»¶æœªæº€" id="mc1"><label for="mc1">10ä»¶æœªæº€</label></div>
              <div class="radio-option"><input type="radio" name="monthly_cases" value="10ã€œ30ä»¶" id="mc2"><label for="mc2">10ã€œ30ä»¶</label></div>
              <div class="radio-option"><input type="radio" name="monthly_cases" value="30ã€œ50ä»¶" id="mc3"><label for="mc3">30ã€œ50ä»¶</label></div>
              <div class="radio-option"><input type="radio" name="monthly_cases" value="50ä»¶ä»¥ä¸Š" id="mc4"><label for="mc4">50ä»¶ä»¥ä¸Š</label></div>
            </div>
          </div>
          <div class="question">
            <div class="question-label">
              <div class="question-text">ã‚¹ã‚¿ãƒƒãƒ•äººæ•°</div>
            </div>
            <div class="input-wrap">
              <input type="text" name="staff_count" placeholder="ä¾‹ï¼šæ­£ç¤¾å“¡5åã€ãƒ‘ãƒ¼ãƒˆ3å">
            </div>
          </div>
          <div class="question">
            <div class="question-label">
              <div class="question-text">ç¾åœ¨ä½¿ã£ã¦ã„ã‚‹ã‚·ã‚¹ãƒ†ãƒ ãƒ»ãƒ„ãƒ¼ãƒ«</div>
            </div>
            <div class="question-hint">ç´™ãƒ»Excelãƒ»å°‚ç”¨ã‚½ãƒ•ãƒˆãªã©ã€ãªã‚“ã§ã‚‚OKã§ã™</div>
            <div class="input-wrap">
              <textarea name="current_system" placeholder="ä¾‹ï¼šè¦‹ç©ã¯Excelã€é¡§å®¢ç®¡ç†ã¯ç´™ã®å°å¸³"></textarea>
            </div>
          </div>
        </div>
      </div>
    </div>

    <!-- â‘  è¦‹ç©ãƒ»å£²ä¸Š -->
    <div class="section">
      <div class="section-header" onclick="toggleSection(this)">
        <div class="section-icon">ğŸ“‹</div>
        <div>
          <div class="section-title">è¦‹ç©ãƒ»å£²ä¸Šã¾ã‚ã‚Š</div>
          <div class="section-subtitle">è¦‹ç©æ›¸ã®ä½œæˆã‚„å£²ä¸Šç®¡ç†ã«ã¤ã„ã¦</div>
        </div>
        <div class="section-toggle">â–¼</div>
      </div>
      <div class="section-body">
        <div class="section-inner">
          <div class="question">
            <div class="question-label"><div class="question-num">1</div><div class="question-text">è¦‹ç©æ›¸ã¯ä»Šã©ã†ã‚„ã£ã¦ä½œã£ã¦ã„ã¾ã™ã‹ï¼Ÿ</div></div>
            <div class="radio-group">
              <div class="radio-option"><input type="radio" name="q1_estimate_method" value="æ‰‹æ›¸ã" id="q1a"><label for="q1a">æ‰‹æ›¸ã</label></div>
              <div class="radio-option"><input type="radio" name="q1_estimate_method" value="Excel" id="q1b"><label for="q1b">Excel</label></div>
              <div class="radio-option"><input type="radio" name="q1_estimate_method" value="å°‚ç”¨ã‚½ãƒ•ãƒˆ" id="q1c"><label for="q1c">å°‚ç”¨ã‚½ãƒ•ãƒˆ</label></div>
              <div class="radio-option"><input type="radio" name="q1_estimate_method" value="ãã®ä»–" id="q1d"><label for="q1d">ãã®ä»–</label></div>
            </div>
          </div>
          <div class="question">
            <div class="question-label"><div class="question-num">2</div><div class="question-text">è¦‹ç©ã®ä½œæˆã«ã€ã ã„ãŸã„ã©ã®ãã‚‰ã„æ™‚é–“ãŒã‹ã‹ã‚Šã¾ã™ã‹ï¼Ÿ</div></div>
            <div class="input-wrap"><textarea name="q2_estimate_time" placeholder="ä¾‹ï¼š1ä»¶ã‚ãŸã‚Š30åˆ†ãã‚‰ã„"></textarea></div>
          </div>
          <div class="question">
            <div class="question-label"><div class="question-num">3</div><div class="question-text">ãƒ—ãƒ©ãƒ³ã¯ä½•ç¨®é¡ã‚ã‚Šã¾ã™ã‹ï¼Ÿ</div></div>
            <div class="input-wrap"><input type="text" name="q3_plan_types" placeholder="ä¾‹ï¼šå®¶æ—è‘¬ãƒ»ä¸€èˆ¬è‘¬ãƒ»ç›´è‘¬ã®3ç¨®é¡"></div>
          </div>
          <div class="question">
            <div class="question-label"><div class="question-num">4</div><div class="question-text">ã‚ªãƒ—ã‚·ãƒ§ãƒ³ï¼ˆèŠ±ãƒ»æ–™ç†ç­‰ï¼‰ã®è¦‹ç©ã§å›°ã‚‹ã“ã¨ã¯ã‚ã‚Šã¾ã™ã‹ï¼Ÿ</div></div>
            <div class="input-wrap"><textarea name="q4_option_trouble" placeholder="ä¾‹ï¼šã‚ªãƒ—ã‚·ãƒ§ãƒ³ãŒå¤šã™ãã¦è¨ˆç®—ãƒŸã‚¹ãŒèµ·ãã‚‹"></textarea></div>
          </div>
          <div class="question">
            <div class="question-label"><div class="question-num">5</div><div class="question-text">åŸä¾¡ãƒ»ç²—åˆ©ã¯èª°ãŒç®¡ç†ã—ã¦ã„ã¾ã™ã‹ï¼Ÿ</div></div>
            <div class="radio-group">
              <div class="radio-option"><input type="radio" name="q5_cost_management" value="ç¤¾é•·ã®ã¿" id="q5a"><label for="q5a">ç¤¾é•·ã®ã¿</label></div>
              <div class="radio-option"><input type="radio" name="q5_cost_management" value="å…¨å“¡è¦‹ãˆã‚‹" id="q5b"><label for="q5b">å…¨å“¡è¦‹ãˆã‚‹</label></div>
              <div class="radio-option"><input type="radio" name="q5_cost_management" value="ç®¡ç†ã—ã¦ã„ãªã„" id="q5c"><label for="q5c">ç®¡ç†ã—ã¦ã„ãªã„</label></div>
            </div>
          </div>
          <div class="question">
            <div class="question-label"><div class="question-num">6</div><div class="question-text">å€¤å¼•ãã®ãƒ«ãƒ¼ãƒ«ã¯ã‚ã‚Šã¾ã™ã‹ï¼Ÿ</div></div>
            <div class="input-wrap"><textarea name="q6_discount_rules" placeholder="ä¾‹ï¼šãƒªãƒ”ãƒ¼ã‚¿ãƒ¼ã¯5%å¼•ãã€ç¤¾å“¡ã®è£é‡ã§å€¤å¼•ãã™ã‚‹ã“ã¨ã‚‚ã‚ã‚‹"></textarea></div>
          </div>
        </div>
      </div>
    </div>

    <!-- â‘¡ é¡§å®¢ãƒ»æ–½ä¸»ç®¡ç† -->
    <div class="section">
      <div class="section-header" onclick="toggleSection(this)">
        <div class="section-icon">ğŸ‘¤</div>
        <div>
          <div class="section-title">é¡§å®¢ãƒ»æ–½ä¸»ç®¡ç†</div>
          <div class="section-subtitle">é¡§å®¢æƒ…å ±ã®ç®¡ç†ã‚„å¼•ãç¶™ãã«ã¤ã„ã¦</div>
        </div>
        <div class="section-toggle">â–¼</div>
      </div>
      <div class="section-body">
        <div class="section-inner">
          <div class="question">
            <div class="question-label"><div class="question-num">7</div><div class="question-text">é¡§å®¢æƒ…å ±ã¯ã©ã“ã§ç®¡ç†ã—ã¦ã„ã¾ã™ã‹ï¼Ÿ</div></div>
            <div class="radio-group">
              <div class="radio-option"><input type="radio" name="q7_customer_management" value="ç´™ã®å°å¸³" id="q7a"><label for="q7a">ç´™ã®å°å¸³</label></div>
              <div class="radio-option"><input type="radio" name="q7_customer_management" value="Excel" id="q7b"><label for="q7b">Excel</label></div>
              <div class="radio-option"><input type="radio" name="q7_customer_management" value="å°‚ç”¨ã‚·ã‚¹ãƒ†ãƒ " id="q7c"><label for="q7c">å°‚ç”¨ã‚·ã‚¹ãƒ†ãƒ </label></div>
              <div class="radio-option"><input type="radio" name="q7_customer_management" value="ç‰¹ã«ç®¡ç†ã—ã¦ã„ãªã„" id="q7d"><label for="q7d">ç‰¹ã«ç®¡ç†ã—ã¦ã„ãªã„</label></div>
            </div>
          </div>
          <div class="question">
            <div class="question-label"><div class="question-num">8</div><div class="question-text">åŒã˜å®¶æ—ã®éå»ã®æ–½è¡Œè¨˜éŒ²ã¯ç¢ºèªã§ãã¾ã™ã‹ï¼Ÿ</div></div>
            <div class="input-wrap"><textarea name="q8_past_records" placeholder="ä¾‹ï¼šå°å¸³ã‚’æ¢ã›ã°è¦‹ã¤ã‹ã‚‹ãŒæ™‚é–“ãŒã‹ã‹ã‚‹"></textarea></div>
          </div>
          <div class="question">
            <div class="question-label"><div class="question-num">9</div><div class="question-text">æ‹…å½“è€…ã®å¼•ãç¶™ãã§å›°ã£ãŸã“ã¨ã¯ã‚ã‚Šã¾ã™ã‹ï¼Ÿ</div></div>
            <div class="input-wrap"><textarea name="q9_handover_trouble" placeholder="ä¾‹ï¼šå‰ã®æ‹…å½“ã—ã‹çŸ¥ã‚‰ãªã„æƒ…å ±ãŒã‚ã£ãŸ"></textarea></div>
          </div>
          <div class="question">
            <div class="question-label"><div class="question-num">10</div><div class="question-text">æ³¨æ„ãŒå¿…è¦ãªé¡§å®¢ã®å…±æœ‰ã¯ã©ã†ã—ã¦ã„ã¾ã™ã‹ï¼Ÿ</div></div>
            <div class="radio-group">
              <div class="radio-option"><input type="radio" name="q10_alert_sharing" value="å£é ­ã§å…±æœ‰" id="q10a"><label for="q10a">å£é ­ã§å…±æœ‰</label></div>
              <div class="radio-option"><input type="radio" name="q10_alert_sharing" value="ãƒ¡ãƒ¢ã‚’è²¼ã£ã¦ã„ã‚‹" id="q10b"><label for="q10b">ãƒ¡ãƒ¢ã‚’è²¼ã£ã¦ã„ã‚‹</label></div>
              <div class="radio-option"><input type="radio" name="q10_alert_sharing" value="ç‰¹ã«å…±æœ‰ã—ã¦ã„ãªã„" id="q10c"><label for="q10c">ç‰¹ã«å…±æœ‰ã—ã¦ã„ãªã„</label></div>
            </div>
          </div>
          <div class="question">
            <div class="question-label"><div class="question-num">11</div><div class="question-text">é¡§å®¢ã‚’æ¤œç´¢ã—ãŸã„ã¨æ€ã†ã“ã¨ã¯ã‚ã‚Šã¾ã™ã‹ï¼Ÿ</div></div>
            <div class="input-wrap"><textarea name="q11_search_needs" placeholder="ä¾‹ï¼šã€Œå»å¹´ã®â—‹â—‹åœ°åŒºã®æ–½è¡Œã€ã‚’æ¢ã—ãŸã„ã“ã¨ãŒã‚ã‚‹"></textarea></div>
          </div>
        </div>
      </div>
    </div>

    <!-- â‘¢ ç¾å ´ã‚ªãƒšãƒ¬ãƒ¼ã‚·ãƒ§ãƒ³ -->
    <div class="section">
      <div class="section-header" onclick="toggleSection(this)">
        <div class="section-icon">ğŸ”§</div>
        <div>
          <div class="section-title">ç¾å ´ã‚ªãƒšãƒ¬ãƒ¼ã‚·ãƒ§ãƒ³</div>
          <div class="section-subtitle">ã‚·ãƒ•ãƒˆãƒ»ã‚¹ã‚¿ãƒƒãƒ•é…ç½®ãƒ»æº–å‚™ã«ã¤ã„ã¦</div>
        </div>
        <div class="section-toggle">â–¼</div>
      </div>
      <div class="section-body">
        <div class="section-inner">
          <div class="question">
            <div class="question-label"><div class="question-num">12</div><div class="question-text">å¤œé–“å½“ç•ªã®ã‚·ãƒ•ãƒˆã¯ã©ã†æ±ºã‚ã¦ã„ã¾ã™ã‹ï¼Ÿ</div></div>
            <div class="input-wrap"><textarea name="q12_shift_method" placeholder="ä¾‹ï¼šæœˆåˆã«ç¤¾é•·ãŒæ‰‹ä½œæ¥­ã§çµ„ã‚“ã§ã„ã‚‹"></textarea></div>
          </div>
          <div class="question">
            <div class="question-label"><div class="question-num">13</div><div class="question-text">æ€¥ãªæ¬ å‹¤ãŒå‡ºãŸæ™‚ã¯ã©ã†å¯¾å¿œã—ã¦ã„ã¾ã™ã‹ï¼Ÿ</div></div>
            <div class="input-wrap"><textarea name="q13_absence_flow" placeholder="ä¾‹ï¼šé›»è©±ã§1äººãšã¤é€£çµ¡ã—ã¦ä»£ã‚ã‚Šã‚’æ¢ã™"></textarea></div>
          </div>
          <div class="question">
            <div class="question-label"><div class="question-num">14</div><div class="question-text">æ–½è¡Œå½“æ—¥ã®ã‚¹ã‚¿ãƒƒãƒ•é…ç½®ã§å›°ã‚‹ã“ã¨ã¯ã‚ã‚Šã¾ã™ã‹ï¼Ÿ</div></div>
            <div class="input-wrap"><textarea name="q14_staffing_trouble" placeholder=""></textarea></div>
          </div>
          <div class="question">
            <div class="question-label"><div class="question-num">15</div><div class="question-text">å¤–æ³¨ã‚¹ã‚¿ãƒƒãƒ•ã‚’ä½¿ã†ã“ã¨ã¯ã‚ã‚Šã¾ã™ã‹ï¼Ÿ</div></div>
            <div class="radio-group">
              <div class="radio-option"><input type="radio" name="q15_external_staff" value="ã‚ˆãä½¿ã†" id="q15a"><label for="q15a">ã‚ˆãä½¿ã†</label></div>
              <div class="radio-option"><input type="radio" name="q15_external_staff" value="ãŸã¾ã«ä½¿ã†" id="q15b"><label for="q15b">ãŸã¾ã«ä½¿ã†</label></div>
              <div class="radio-option"><input type="radio" name="q15_external_staff" value="ä½¿ã‚ãªã„" id="q15c"><label for="q15c">ä½¿ã‚ãªã„</label></div>
            </div>
          </div>
          <div class="question">
            <div class="question-label"><div class="question-num">16</div><div class="question-text">æ–½è¡Œæº–å‚™ã§ã€Œå¿˜ã‚ŒãŒã¡ã€ãªã“ã¨ã¯ã‚ã‚Šã¾ã™ã‹ï¼Ÿ</div></div>
            <div class="input-wrap"><textarea name="q16_forgotten_tasks" placeholder=""></textarea></div>
          </div>
        </div>
      </div>
    </div>

    <!-- â‘£ æ³•è¦ãƒ»ã‚¢ãƒ•ã‚¿ãƒ¼ãƒ•ã‚©ãƒ­ãƒ¼ -->
    <div class="section">
      <div class="section-header" onclick="toggleSection(this)">
        <div class="section-icon">ğŸ•Š</div>
        <div>
          <div class="section-title">æ³•è¦ãƒ»ã‚¢ãƒ•ã‚¿ãƒ¼ãƒ•ã‚©ãƒ­ãƒ¼</div>
          <div class="section-subtitle">æ–½è¡Œå¾Œã®ãƒ•ã‚©ãƒ­ãƒ¼ãƒ»æ³•è¦å¯¾å¿œã«ã¤ã„ã¦</div>
        </div>
        <div class="section-toggle">â–¼</div>
      </div>
      <div class="section-body">
        <div class="section-inner">
          <div class="question">
            <div class="question-label"><div class="question-num">17</div><div class="question-text">å››åä¹æ—¥ãƒ»ä¸€å‘¨å¿Œã®ãƒ•ã‚©ãƒ­ãƒ¼ã¯ã—ã¦ã„ã¾ã™ã‹ï¼Ÿ</div></div>
            <div class="radio-group">
              <div class="radio-option"><input type="radio" name="q17_memorial_follow" value="æ¯å›ã—ã¦ã„ã‚‹" id="q17a"><label for="q17a">æ¯å›ã—ã¦ã„ã‚‹</label></div>
              <div class="radio-option"><input type="radio" name="q17_memorial_follow" value="æ™‚ã€…å¿˜ã‚Œã‚‹" id="q17b"><label for="q17b">æ™‚ã€…å¿˜ã‚Œã‚‹</label></div>
              <div class="radio-option"><input type="radio" name="q17_memorial_follow" value="ã—ã¦ã„ãªã„" id="q17c"><label for="q17c">ã—ã¦ã„ãªã„</label></div>
            </div>
          </div>
          <div class="question">
            <div class="question-label"><div class="question-num">18</div><div class="question-text">æ³•è¦ã®æ¡ˆå†…çŠ¶ã¯é€ã£ã¦ã„ã¾ã™ã‹ï¼Ÿ</div></div>
            <div class="input-wrap"><textarea name="q18_invitation_sending" placeholder=""></textarea></div>
          </div>
          <div class="question">
            <div class="question-label"><div class="question-num">19</div><div class="question-text">æ–½è¡Œå¾Œã®ãƒ•ã‚©ãƒ­ãƒ¼æ¼ã‚Œã¯æ°—ã«ãªã‚Šã¾ã™ã‹ï¼Ÿ</div></div>
            <div class="input-wrap"><textarea name="q19_follow_leak" placeholder=""></textarea></div>
          </div>
          <div class="question">
            <div class="question-label"><div class="question-num">20</div><div class="question-text">ãƒ•ã‚©ãƒ­ãƒ¼æ¥­å‹™ã®æ‹…å½“ã¯æ±ºã¾ã£ã¦ã„ã¾ã™ã‹ï¼Ÿ</div></div>
            <div class="input-wrap"><textarea name="q20_follow_assignee" placeholder=""></textarea></div>
          </div>
        </div>
      </div>
    </div>

    <!-- â‘¤ çµŒå–¶ãƒ»æ•°å­— -->
    <div class="section">
      <div class="section-header" onclick="toggleSection(this)">
        <div class="section-icon">ğŸ“Š</div>
        <div>
          <div class="section-title">çµŒå–¶ãƒ»æ•°å­—ã®ç®¡ç†</div>
          <div class="section-subtitle">å£²ä¸Šã‚„å®Ÿç¸¾ã®æŠŠæ¡ã«ã¤ã„ã¦</div>
        </div>
        <div class="section-toggle">â–¼</div>
      </div>
      <div class="section-body">
        <div class="section-inner">
          <div class="question">
            <div class="question-label"><div class="question-num">21</div><div class="question-text">æ–½è¡Œä»¶æ•°ã‚„å£²ä¸Šã®æ¨ç§»ã¯æŠŠæ¡ã§ãã¦ã„ã¾ã™ã‹ï¼Ÿ</div></div>
            <div class="radio-group">
              <div class="radio-option"><input type="radio" name="q21_stats_tracking" value="æœˆæ¬¡ã§æŠŠæ¡" id="q21a"><label for="q21a">æœˆæ¬¡ã§æŠŠæ¡</label></div>
              <div class="radio-option"><input type="radio" name="q21_stats_tracking" value="å¹´æ¬¡ã§æŠŠæ¡" id="q21b"><label for="q21b">å¹´æ¬¡ã§æŠŠæ¡</label></div>
              <div class="radio-option"><input type="radio" name="q21_stats_tracking" value="æŠŠæ¡ã§ãã¦ã„ãªã„" id="q21c"><label for="q21c">æŠŠæ¡ã§ãã¦ã„ãªã„</label></div>
            </div>
          </div>
          <div class="question">
            <div class="question-label"><div class="question-num">22</div><div class="question-text">æ‹…å½“è€…ã”ã¨ã®å®Ÿç¸¾ã‚’è¦‹ãŸã„ã¨æ€ã„ã¾ã™ã‹ï¼Ÿ</div></div>
            <div class="input-wrap"><textarea name="q22_staff_performance" placeholder=""></textarea></div>
          </div>
          <div class="question">
            <div class="question-label"><div class="question-num">23</div><div class="question-text">å€¤å¼•ãç‡ã‚„å¹³å‡å˜ä¾¡ã¯æ°—ã«ãªã‚Šã¾ã™ã‹ï¼Ÿ</div></div>
            <div class="input-wrap"><textarea name="q23_pricing_analytics" placeholder=""></textarea></div>
          </div>
          <div class="question">
            <div class="question-label"><div class="question-num">24</div><div class="question-text">ã€Œç¤¾é•·ã ã‘è¦‹ãŸã„æ•°å­—ã€ã¯ã‚ã‚Šã¾ã™ã‹ï¼Ÿ</div></div>
            <div class="input-wrap"><textarea name="q24_owner_only_data" placeholder="ä¾‹ï¼šã‚¹ã‚¿ãƒƒãƒ•ã®äººä»¶è²»ç‡ã€ç²—åˆ©ç‡ãªã©"></textarea></div>
          </div>
          <div class="question">
            <div class="question-label"><div class="question-num">25</div><div class="question-text">ã‚¹ã‚¿ãƒƒãƒ•ã«è¦‹ã›ãŸããªã„æƒ…å ±ã¯ã‚ã‚Šã¾ã™ã‹ï¼Ÿ</div></div>
            <div class="input-wrap"><textarea name="q25_restricted_info" placeholder=""></textarea></div>
          </div>
        </div>
      </div>
    </div>

    <!-- â‘¥ ç¤¼ã¨ã®é€£æº -->
    <div class="section">
      <div class="section-header" onclick="toggleSection(this)">
        <div class="section-icon">ğŸ”—</div>
        <div>
          <div class="section-title">ã‚ªãƒ³ãƒ©ã‚¤ãƒ³é¦™å…¸ï¼ˆç¤¼ï¼‰ã¨ã®é€£æº</div>
          <div class="section-subtitle">çŒ®æ¯ãƒ‡ãƒ¼ã‚¿ã®æ´»ç”¨ã«ã¤ã„ã¦</div>
        </div>
        <div class="section-toggle">â–¼</div>
      </div>
      <div class="section-body">
        <div class="section-inner">
          <div class="question">
            <div class="question-label"><div class="question-num">26</div><div class="question-text">ã‚ªãƒ³ãƒ©ã‚¤ãƒ³é¦™å…¸ã®å…¥é‡‘ç®¡ç†ã§å›°ã‚‹ã“ã¨ã¯ã‚ã‚Šã¾ã™ã‹ï¼Ÿ</div></div>
            <div class="input-wrap"><textarea name="q26_payment_trouble" placeholder=""></textarea></div>
          </div>
          <div class="question">
            <div class="question-label"><div class="question-num">27</div><div class="question-text">çŒ®æ¯è€…ã®ãƒªã‚¹ãƒˆã‚’éºæ—ã«æ¸¡ã—ã¦ã„ã¾ã™ã‹ï¼Ÿ</div></div>
            <div class="radio-group">
              <div class="radio-option"><input type="radio" name="q27_donor_list" value="ç´™ã§æ¸¡ã—ã¦ã„ã‚‹" id="q27a"><label for="q27a">ç´™ã§æ¸¡ã—ã¦ã„ã‚‹</label></div>
              <div class="radio-option"><input type="radio" name="q27_donor_list" value="ãƒ‡ãƒ¼ã‚¿ã§æ¸¡ã—ã¦ã„ã‚‹" id="q27b"><label for="q27b">ãƒ‡ãƒ¼ã‚¿ã§æ¸¡ã—ã¦ã„ã‚‹</label></div>
              <div class="radio-option"><input type="radio" name="q27_donor_list" value="æ¸¡ã—ã¦ã„ãªã„" id="q27c"><label for="q27c">æ¸¡ã—ã¦ã„ãªã„</label></div>
            </div>
          </div>
          <div class="question">
            <div class="question-label"><div class="question-num">28</div><div class="question-text">é æ–¹ã®å‚åˆ—è€…ã¸ã®æ¡ˆå†…ã¯ã©ã†ã—ã¦ã„ã¾ã™ã‹ï¼Ÿ</div></div>
            <div class="input-wrap"><textarea name="q28_remote_guide" placeholder=""></textarea></div>
          </div>
        </div>
      </div>
    </div>

    <!-- â‘¦ ç¾å ´ã®å›°ã‚Šã”ã¨ -->
    <div class="section">
      <div class="section-header" onclick="toggleSection(this)">
        <div class="section-icon">ğŸ’¡</div>
        <div>
          <div class="section-title">ç¾å ´ã®å›°ã‚Šã”ã¨</div>
          <div class="section-subtitle">æ—¥ã€…ã®æ¥­å‹™ã§ã€Œã‚ã£ãŸã‚‰ã„ã„ãªã€ã¨æ€ã†ã“ã¨</div>
        </div>
        <div class="section-toggle">â–¼</div>
      </div>
      <div class="section-body">
        <div class="section-inner">
          <div class="question">
            <div class="question-label"><div class="question-num">29</div><div class="question-text">ç¾å ´ã§ã‚¹ãƒãƒ›ã‹ã‚‰å…¥åŠ›ã—ãŸã„ã“ã¨ã¯ã‚ã‚Šã¾ã™ã‹ï¼Ÿ</div></div>
            <div class="input-wrap"><textarea name="q29_mobile_needs" placeholder=""></textarea></div>
          </div>
          <div class="question">
            <div class="question-label"><div class="question-num">30</div><div class="question-text">å†™çœŸã‚„æ›¸é¡ã®ç®¡ç†ã§å›°ã£ã¦ã„ã‚‹ã“ã¨ã¯ã‚ã‚Šã¾ã™ã‹ï¼Ÿ</div></div>
            <div class="input-wrap"><textarea name="q30_file_trouble" placeholder=""></textarea></div>
          </div>
          <div class="question">
            <div class="question-label"><div class="question-num">31</div><div class="question-text">ã‚ˆãä½¿ã†å®šå‹æ–‡ï¼ˆæŒ¨æ‹¶çŠ¶ç­‰ï¼‰ã¯ã‚ã‚Šã¾ã™ã‹ï¼Ÿ</div></div>
            <div class="input-wrap"><textarea name="q31_templates" placeholder=""></textarea></div>
          </div>
          <div class="question">
            <div class="question-label"><div class="question-num">32</div><div class="question-text">ã€Œèª°ãŒã„ã¤ä½•ã‚’ã—ãŸã‹ã€ã®è¨˜éŒ²ã¯å¿…è¦ã§ã™ã‹ï¼Ÿ</div></div>
            <div class="input-wrap"><textarea name="q32_activity_log" placeholder=""></textarea></div>
          </div>
          <div class="question">
            <div class="question-label"><div class="question-num">33</div><div class="question-text">å…¥åŠ›ãƒŸã‚¹ãŒèµ·ãã‚„ã™ã„ä½œæ¥­ã¯ã‚ã‚Šã¾ã™ã‹ï¼Ÿ</div></div>
            <div class="input-wrap"><textarea name="q33_input_errors" placeholder=""></textarea></div>
          </div>
        </div>
      </div>
    </div>

    <!-- ã¾ã¨ã‚ -->
    <div class="section">
      <div class="section-header" onclick="toggleSection(this)">
        <div class="section-icon">â­</div>
        <div>
          <div class="section-title">ã¾ã¨ã‚</div>
          <div class="section-subtitle">ä¸€ç•ªè§£æ±ºã—ãŸã„èª²é¡Œã‚’æ•™ãˆã¦ãã ã•ã„</div>
        </div>
        <div class="section-toggle">â–¼</div>
      </div>
      <div class="section-body">
        <div class="section-inner">
          <div class="question">
            <div class="question-label"><div class="question-text">ä¸€ç•ªè§£æ±ºã—ãŸã„èª²é¡Œã¯ä½•ã§ã™ã‹ï¼Ÿ</div></div>
            <div class="input-wrap"><textarea name="priority_1" placeholder="ä¾‹ï¼šè¦‹ç©ä½œæˆã«æ™‚é–“ãŒã‹ã‹ã‚Šã™ãã‚‹"></textarea></div>
          </div>
          <div class="question">
            <div class="question-label"><div class="question-text">2ç•ªç›®ã«è§£æ±ºã—ãŸã„èª²é¡Œ</div></div>
            <div class="input-wrap"><textarea name="priority_2" placeholder=""></textarea></div>
          </div>
          <div class="question">
            <div class="question-label"><div class="question-text">3ç•ªç›®ã«è§£æ±ºã—ãŸã„èª²é¡Œ</div></div>
            <div class="input-wrap"><textarea name="priority_3" placeholder=""></textarea></div>
          </div>
          <div class="question">
            <div class="question-label"><div class="question-text">ãã®ä»–ã€æ°—ã«ãªã‚‹ã“ã¨ã‚„ã”è¦æœ›</div></div>
            <div class="input-wrap"><textarea name="free_comment" class="large" placeholder="ä½•ã§ã‚‚ãŠæ°—è»½ã«ã©ã†ã"></textarea></div>
          </div>
        </div>
      </div>
    </div>

    <!-- é€ä¿¡ãƒœã‚¿ãƒ³ -->
    <div class="submit-section">
      <button type="submit" class="submit-btn" id="submitBtn">
        é€ä¿¡ã™ã‚‹ â†’
      </button>
      <div class="submit-note">â€» é€ä¿¡å¾Œã®ä¿®æ­£ã¯ãŠé›»è©±ã¾ãŸã¯ãƒ¡ãƒ¼ãƒ«ã«ã¦ãŠçŸ¥ã‚‰ã›ãã ã•ã„</div>
    </div>

  </form>
</div>

<!-- å®Œäº†ç”»é¢ -->
<div class="complete-screen" id="completeScreen">
  <div class="complete-icon">âœ¨</div>
  <h2>ã”å›ç­”ã‚ã‚ŠãŒã¨ã†ã”ã–ã„ã¾ã™</h2>
  <p>
    ã„ãŸã ã„ãŸå†…å®¹ã‚’ã‚‚ã¨ã«ã€<br>
    å¾¡ç¤¾ã«æœ€é©ãªã‚·ã‚¹ãƒ†ãƒ ãƒ—ãƒ©ãƒ³ã‚’ã”ææ¡ˆã•ã›ã¦ã„ãŸã ãã¾ã™ã€‚<br><br>
    æ‹…å½“è€…ã‚ˆã‚Šæ•°æ—¥ä»¥å†…ã«ã”é€£çµ¡ã„ãŸã—ã¾ã™ã€‚<br>
    ä»Šã—ã°ã‚‰ããŠå¾…ã¡ãã ã•ã„ã€‚
  </p>
</div>

<div class="toast" id="toast"></div>

<script>
var SUPABASE_URL = 'https://osyysvompcfuadlnuojs.supabase.co';
var SUPABASE_KEY = 'eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6Im9zeXlzdm9tcGNmdWFkbG51b2pzIiwicm9sZSI6ImFub24iLCJpYXQiOjE3MzYzMTQ0NjksImV4cCI6MjA1MTg5MDQ2OX0.a1C8R5Ry5x6fBSnSloTTqOmOIkuMOp7W5YLaXbITvOE';
var supabase = window.supabase.createClient(SUPABASE_URL, SUPABASE_KEY);

// Section toggle
function toggleSection(header) {
  var section = header.parentElement;
  section.classList.toggle('open');
}

// Progress tracking
function updateProgress() {
  var form = document.getElementById('hearingForm');
  var inputs = form.querySelectorAll('input[type="text"], textarea');
  var radios = form.querySelectorAll('input[type="radio"]');
  var filled = 0;
  var total = inputs.length;

  inputs.forEach(function(input) {
    if (input.value.trim()) filled++;
  });

  var radioGroups = {};
  radios.forEach(function(r) { radioGroups[r.name] = radioGroups[r.name] || false; if (r.checked) radioGroups[r.name] = true; });
  var radioNames = Object.keys(radioGroups);
  total += radioNames.length;
  radioNames.forEach(function(name) { if (radioGroups[name]) filled++; });

  var pct = Math.round((filled / total) * 100);
  document.getElementById('progressFill').style.width = pct + '%';
}

document.addEventListener('input', updateProgress);
document.addEventListener('change', updateProgress);

// Toast
function showToast(msg, type) {
  var toast = document.getElementById('toast');
  toast.textContent = msg;
  toast.className = 'toast ' + type + ' show';
  setTimeout(function() { toast.classList.remove('show'); }, 3000);
}

// Form submit
document.getElementById('hearingForm').addEventListener('submit', async function(e) {
  e.preventDefault();
  
  var btn = document.getElementById('submitBtn');
  btn.disabled = true;
  btn.textContent = 'é€ä¿¡ä¸­...';

  var form = e.target;
  var data = {};

  // Text inputs & textareas
  form.querySelectorAll('input[type="text"], textarea').forEach(function(el) {
    if (el.name) data[el.name] = el.value.trim() || null;
  });

  // Radio buttons
  form.querySelectorAll('input[type="radio"]:checked').forEach(function(el) {
    data[el.name] = el.value;
  });

  // Validation
  if (!data.company_name) {
    showToast('è‘¬å„€ç¤¾åã‚’å…¥åŠ›ã—ã¦ãã ã•ã„', 'error');
    btn.disabled = false;
    btn.textContent = 'é€ä¿¡ã™ã‚‹ â†’';
    return;
  }

  try {
    var result = await supabase.from('hearing_responses').insert([data]);
    
    if (result.error) {
      throw result.error;
    }

    document.getElementById('formContainer').style.display = 'none';
    document.getElementById('completeScreen').classList.add('show');
    document.getElementById('progressFill').style.width = '100%';
    window.scrollTo({ top: 0, behavior: 'smooth' });

  } catch (err) {
    console.error(err);
    showToast('é€ä¿¡ã«å¤±æ•—ã—ã¾ã—ãŸã€‚ã‚‚ã†ä¸€åº¦ãŠè©¦ã—ãã ã•ã„ã€‚', 'error');
    btn.disabled = false;
    btn.textContent = 'é€ä¿¡ã™ã‚‹ â†’';
  }
});
</script>
</body>
</html>